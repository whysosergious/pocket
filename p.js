var Nl=Object.defineProperty;var Ll=(r,n,l)=>n in r?Nl(r,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[n]=l;var Pl=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports);var ke=(r,n,l)=>(Ll(r,typeof n!="symbol"?n+"":n,l),l),vs=(r,n,l)=>{if(!n.has(r))throw TypeError("Cannot "+l)};var Fl=(r,n,l)=>(vs(r,n,"read from private field"),l?l.call(r):n.get(r)),Ui=(r,n,l)=>{if(n.has(r))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(r):n.set(r,l)},So=(r,n,l,u)=>(vs(r,n,"write to private field"),u?u.call(r,l):n.set(r,l),l);var ys=(r,n,l,u)=>({set _(f){So(r,n,f,l)},get _(){return Fl(r,n,u)}}),_s=(r,n,l)=>(vs(r,n,"access private method"),l);var Bl=Pl((exports,module)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const v of f)if(v.type==="childList")for(const x of v.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&u(x)}).observe(document,{childList:!0,subtree:!0});function l(f){const v={};return f.integrity&&(v.integrity=f.integrity),f.referrerPolicy&&(v.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?v.credentials="include":f.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function u(f){if(f.ep)return;f.ep=!0;const v=l(f);fetch(f.href,v)}})();const rootStyles="",editor="";function makeMap(r,n){const l=Object.create(null),u=r.split(",");for(let f=0;f<u.length;f++)l[u[f]]=!0;return n?f=>!!l[f.toLowerCase()]:f=>!!l[f]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=r=>onRE.test(r),isModelListener=r=>r.startsWith("onUpdate:"),extend=Object.assign,remove=(r,n)=>{const l=r.indexOf(n);l>-1&&r.splice(l,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(r,n)=>hasOwnProperty$1.call(r,n),isArray=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isFunction=r=>typeof r=="function",isString=r=>typeof r=="string",isSymbol=r=>typeof r=="symbol",isObject=r=>r!==null&&typeof r=="object",isPromise=r=>isObject(r)&&isFunction(r.then)&&isFunction(r.catch),objectToString=Object.prototype.toString,toTypeString=r=>objectToString.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const n=Object.create(null);return l=>n[l]||(n[l]=r(l))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,(n,l)=>l?l.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,n)=>!Object.is(r,n),invokeArrayFns=(r,n)=>{for(let l=0;l<r.length;l++)r[l](n)},def=(r,n,l)=>{Object.defineProperty(r,n,{configurable:!0,enumerable:!1,value:l})},looseToNumber=r=>{const n=parseFloat(r);return isNaN(n)?r:n};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(r){if(isArray(r)){const n={};for(let l=0;l<r.length;l++){const u=r[l],f=isString(u)?parseStringStyle(u):normalizeStyle(u);if(f)for(const v in f)n[v]=f[v]}return n}else{if(isString(r))return r;if(isObject(r))return r}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(r){const n={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(l=>{if(l){const u=l.split(propertyDelimiterRE);u.length>1&&(n[u[0].trim()]=u[1].trim())}}),n}function normalizeClass(r){let n="";if(isString(r))n=r;else if(isArray(r))for(let l=0;l<r.length;l++){const u=normalizeClass(r[l]);u&&(n+=u+" ")}else if(isObject(r))for(const l in r)r[l]&&(n+=l+" ");return n.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}const toDisplayString=r=>isString(r)?r:r==null?"":isArray(r)||isObject(r)&&(r.toString===objectToString||!isFunction(r.toString))?JSON.stringify(r,replacer,2):String(r),replacer=(r,n)=>n&&n.__v_isRef?replacer(r,n.value):isMap(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((l,[u,f])=>(l[`${u} =>`]=f,l),{})}:isSet(n)?{[`Set(${n.size})`]:[...n.values()]}:isObject(n)&&!isArray(n)&&!isPlainObject(n)?String(n):n;let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const l=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=l}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let l,u;for(l=0,u=this.effects.length;l<u;l++)this.effects[l].stop();for(l=0,u=this.cleanups.length;l<u;l++)this.cleanups[l]();if(this.scopes)for(l=0,u=this.scopes.length;l<u;l++)this.scopes[l].stop(!0);if(!this.detached&&this.parent&&!n){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(r,n=activeEffectScope){n&&n.active&&n.effects.push(r)}function getCurrentScope(){return activeEffectScope}const createDep=r=>{const n=new Set(r);return n.w=0,n.n=0,n},wasTracked=r=>(r.w&trackOpBit)>0,newTracked=r=>(r.n&trackOpBit)>0,initDepMarkers=({deps:r})=>{if(r.length)for(let n=0;n<r.length;n++)r[n].w|=trackOpBit},finalizeDepMarkers=r=>{const{deps:n}=r;if(n.length){let l=0;for(let u=0;u<n.length;u++){const f=n[u];wasTracked(f)&&!newTracked(f)?f.delete(r):n[l++]=f,f.w&=~trackOpBit,f.n&=~trackOpBit}n.length=l}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(n,l=null,u){this.fn=n,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,u)}run(){if(!this.active)return this.fn();let n=activeEffect,l=shouldTrack;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(r){const{deps:n}=r;if(n.length){for(let l=0;l<n.length;l++)n[l].delete(r);n.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function track(r,n,l){if(shouldTrack&&activeEffect){let u=targetMap.get(r);u||targetMap.set(r,u=new Map);let f=u.get(l);f||u.set(l,f=createDep()),trackEffects(f)}}function trackEffects(r,n){let l=!1;effectTrackDepth<=maxMarkerBits?newTracked(r)||(r.n|=trackOpBit,l=!wasTracked(r)):l=!r.has(activeEffect),l&&(r.add(activeEffect),activeEffect.deps.push(r))}function trigger(r,n,l,u,f,v){const x=targetMap.get(r);if(!x)return;let k=[];if(n==="clear")k=[...x.values()];else if(l==="length"&&isArray(r)){const E=Number(u);x.forEach((R,z)=>{(z==="length"||z>=E)&&k.push(R)})}else switch(l!==void 0&&k.push(x.get(l)),n){case"add":isArray(r)?isIntegerKey(l)&&k.push(x.get("length")):(k.push(x.get(ITERATE_KEY)),isMap(r)&&k.push(x.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(r)||(k.push(x.get(ITERATE_KEY)),isMap(r)&&k.push(x.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&k.push(x.get(ITERATE_KEY));break}if(k.length===1)k[0]&&triggerEffects(k[0]);else{const E=[];for(const R of k)R&&E.push(...R);triggerEffects(createDep(E))}}function triggerEffects(r,n){const l=isArray(r)?r:[...r];for(const u of l)u.computed&&triggerEffect(u);for(const u of l)u.computed||triggerEffect(u)}function triggerEffect(r,n){(r!==activeEffect||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const r={};return["includes","indexOf","lastIndexOf"].forEach(n=>{r[n]=function(...l){const u=toRaw(this);for(let v=0,x=this.length;v<x;v++)track(u,"get",v+"");const f=u[n](...l);return f===-1||f===!1?u[n](...l.map(toRaw)):f}}),["push","pop","shift","unshift","splice"].forEach(n=>{r[n]=function(...l){pauseTracking();const u=toRaw(this)[n].apply(this,l);return resetTracking(),u}}),r}function hasOwnProperty(r){const n=toRaw(this);return track(n,"has",r),n.hasOwnProperty(r)}function createGetter(r=!1,n=!1){return function(u,f,v){if(f==="__v_isReactive")return!r;if(f==="__v_isReadonly")return r;if(f==="__v_isShallow")return n;if(f==="__v_raw"&&v===(r?n?shallowReadonlyMap:readonlyMap:n?shallowReactiveMap:reactiveMap).get(u))return u;const x=isArray(u);if(!r){if(x&&hasOwn(arrayInstrumentations,f))return Reflect.get(arrayInstrumentations,f,v);if(f==="hasOwnProperty")return hasOwnProperty}const k=Reflect.get(u,f,v);return(isSymbol(f)?builtInSymbols.has(f):isNonTrackableKeys(f))||(r||track(u,"get",f),n)?k:isRef(k)?x&&isIntegerKey(f)?k:k.value:isObject(k)?r?readonly(k):reactive(k):k}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(r=!1){return function(l,u,f,v){let x=l[u];if(isReadonly(x)&&isRef(x)&&!isRef(f))return!1;if(!r&&(!isShallow(f)&&!isReadonly(f)&&(x=toRaw(x),f=toRaw(f)),!isArray(l)&&isRef(x)&&!isRef(f)))return x.value=f,!0;const k=isArray(l)&&isIntegerKey(u)?Number(u)<l.length:hasOwn(l,u),E=Reflect.set(l,u,f,v);return l===toRaw(v)&&(k?hasChanged(f,x)&&trigger(l,"set",u,f):trigger(l,"add",u,f)),E}}function deleteProperty(r,n){const l=hasOwn(r,n);r[n];const u=Reflect.deleteProperty(r,n);return u&&l&&trigger(r,"delete",n,void 0),u}function has$1(r,n){const l=Reflect.has(r,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(r,"has",n),l}function ownKeys(r){return track(r,"iterate",isArray(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(r,n){return!0},deleteProperty(r,n){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function get(r,n,l=!1,u=!1){r=r.__v_raw;const f=toRaw(r),v=toRaw(n);l||(n!==v&&track(f,"get",n),track(f,"get",v));const{has:x}=getProto(f),k=u?toShallow:l?toReadonly:toReactive;if(x.call(f,n))return k(r.get(n));if(x.call(f,v))return k(r.get(v));r!==f&&r.get(n)}function has(r,n=!1){const l=this.__v_raw,u=toRaw(l),f=toRaw(r);return n||(r!==f&&track(u,"has",r),track(u,"has",f)),r===f?l.has(r):l.has(r)||l.has(f)}function size(r,n=!1){return r=r.__v_raw,!n&&track(toRaw(r),"iterate",ITERATE_KEY),Reflect.get(r,"size",r)}function add(r){r=toRaw(r);const n=toRaw(this);return getProto(n).has.call(n,r)||(n.add(r),trigger(n,"add",r,r)),this}function set(r,n){n=toRaw(n);const l=toRaw(this),{has:u,get:f}=getProto(l);let v=u.call(l,r);v||(r=toRaw(r),v=u.call(l,r));const x=f.call(l,r);return l.set(r,n),v?hasChanged(n,x)&&trigger(l,"set",r,n):trigger(l,"add",r,n),this}function deleteEntry(r){const n=toRaw(this),{has:l,get:u}=getProto(n);let f=l.call(n,r);f||(r=toRaw(r),f=l.call(n,r)),u&&u.call(n,r);const v=n.delete(r);return f&&trigger(n,"delete",r,void 0),v}function clear(){const r=toRaw(this),n=r.size!==0,l=r.clear();return n&&trigger(r,"clear",void 0,void 0),l}function createForEach(r,n){return function(u,f){const v=this,x=v.__v_raw,k=toRaw(x),E=n?toShallow:r?toReadonly:toReactive;return!r&&track(k,"iterate",ITERATE_KEY),x.forEach((R,z)=>u.call(f,E(R),E(z),v))}}function createIterableMethod(r,n,l){return function(...u){const f=this.__v_raw,v=toRaw(f),x=isMap(v),k=r==="entries"||r===Symbol.iterator&&x,E=r==="keys"&&x,R=f[r](...u),z=l?toShallow:n?toReadonly:toReactive;return!n&&track(v,"iterate",E?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:F,done:Z}=R.next();return Z?{value:F,done:Z}:{value:k?[z(F[0]),z(F[1])]:z(F),done:Z}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...n){return r==="delete"?!1:this}}function createInstrumentations(){const r={get(v){return get(this,v)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},n={get(v){return get(this,v,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},l={get(v){return get(this,v,!0)},get size(){return size(this,!0)},has(v){return has.call(this,v,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},u={get(v){return get(this,v,!0,!0)},get size(){return size(this,!0)},has(v){return has.call(this,v,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(v=>{r[v]=createIterableMethod(v,!1,!1),l[v]=createIterableMethod(v,!0,!1),n[v]=createIterableMethod(v,!1,!0),u[v]=createIterableMethod(v,!0,!0)}),[r,l,n,u]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(r,n){const l=n?r?shallowReadonlyInstrumentations:shallowInstrumentations:r?readonlyInstrumentations:mutableInstrumentations;return(u,f,v)=>f==="__v_isReactive"?!r:f==="__v_isReadonly"?r:f==="__v_raw"?u:Reflect.get(hasOwn(l,f)&&f in u?l:u,f,v)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(r,n,l,u,f){if(!isObject(r)||r.__v_raw&&!(n&&r.__v_isReactive))return r;const v=f.get(r);if(v)return v;const x=getTargetType(r);if(x===0)return r;const k=new Proxy(r,x===2?u:l);return f.set(r,k),k}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return isReactive(r)||isReadonly(r)}function toRaw(r){const n=r&&r.__v_raw;return n?toRaw(n):r}function markRaw(r){return def(r,"__v_skip",!0),r}const toReactive=r=>isObject(r)?reactive(r):r,toReadonly=r=>isObject(r)?readonly(r):r;function trackRefValue(r){shouldTrack&&activeEffect&&(r=toRaw(r),trackEffects(r.dep||(r.dep=createDep())))}function triggerRefValue(r,n){r=toRaw(r);const l=r.dep;l&&triggerEffects(l)}function isRef(r){return!!(r&&r.__v_isRef===!0)}function ref(r){return createRef(r,!1)}function createRef(r,n){return isRef(r)?r:new RefImpl(r,n)}class RefImpl{constructor(n,l){this.__v_isShallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?n:toRaw(n),this._value=l?n:toReactive(n)}get value(){return trackRefValue(this),this._value}set value(n){const l=this.__v_isShallow||isShallow(n)||isReadonly(n);n=l?n:toRaw(n),hasChanged(n,this._rawValue)&&(this._rawValue=n,this._value=l?n:toReactive(n),triggerRefValue(this))}}function unref(r){return isRef(r)?r.value:r}const shallowUnwrapHandlers={get:(r,n,l)=>unref(Reflect.get(r,n,l)),set:(r,n,l,u)=>{const f=r[n];return isRef(f)&&!isRef(l)?(f.value=l,!0):Reflect.set(r,n,l,u)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(n,l,u,f){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(n,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!f,this.__v_isReadonly=u}get value(){const n=toRaw(this);return trackRefValue(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function computed$1(r,n,l=!1){let u,f;const v=isFunction(r);return v?(u=r,f=NOOP):(u=r.get,f=r.set),new ComputedRefImpl(u,f,v||!f,l)}function warn(r,...n){}function callWithErrorHandling(r,n,l,u){let f;try{f=u?r(...u):r()}catch(v){handleError(v,n,l)}return f}function callWithAsyncErrorHandling(r,n,l,u){if(isFunction(r)){const v=callWithErrorHandling(r,n,l,u);return v&&isPromise(v)&&v.catch(x=>{handleError(x,n,l)}),v}const f=[];for(let v=0;v<r.length;v++)f.push(callWithAsyncErrorHandling(r[v],n,l,u));return f}function handleError(r,n,l,u=!0){const f=n?n.vnode:null;if(n){let v=n.parent;const x=n.proxy,k=l;for(;v;){const R=v.ec;if(R){for(let z=0;z<R.length;z++)if(R[z](r,x,k)===!1)return}v=v.parent}const E=n.appContext.config.errorHandler;if(E){callWithErrorHandling(E,null,10,[r,x,k]);return}}logError(r,l,f,u)}function logError(r,n,l,u=!0){console.error(r)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const n=currentFlushPromise||resolvedPromise;return r?n.then(this?r.bind(this):r):n}function findInsertionIndex(r){let n=flushIndex+1,l=queue.length;for(;n<l;){const u=n+l>>>1;getId(queue[u])<r?n=u+1:l=u}return n}function queueJob(r){(!queue.length||!queue.includes(r,isFlushing&&r.allowRecurse?flushIndex+1:flushIndex))&&(r.id==null?queue.push(r):queue.splice(findInsertionIndex(r.id),0,r),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(r){const n=queue.indexOf(r);n>flushIndex&&queue.splice(n,1)}function queuePostFlushCb(r){isArray(r)?pendingPostFlushCbs.push(...r):(!activePostFlushCbs||!activePostFlushCbs.includes(r,r.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(r),queueFlush()}function flushPreFlushCbs(r,n=isFlushing?flushIndex+1:0){for(;n<queue.length;n++){const l=queue[n];l&&l.pre&&(queue.splice(n,1),n--,l())}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,activePostFlushCbs.sort((l,u)=>getId(l)-getId(u)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?1/0:r.id,comparator=(r,n)=>{const l=getId(r)-getId(n);if(l===0){if(r.pre&&!n.pre)return-1;if(n.pre&&!r.pre)return 1}return l};function flushJobs(r){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const n=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const l=queue[flushIndex];l&&l.active!==!1&&callWithErrorHandling(l,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(r,n,...l){if(r.isUnmounted)return;const u=r.vnode.props||EMPTY_OBJ;let f=l;const v=n.startsWith("update:"),x=v&&n.slice(7);if(x&&x in u){const z=`${x==="modelValue"?"model":x}Modifiers`,{number:F,trim:Z}=u[z]||EMPTY_OBJ;Z&&(f=l.map(j=>isString(j)?j.trim():j)),F&&(f=l.map(looseToNumber))}let k,E=u[k=toHandlerKey(n)]||u[k=toHandlerKey(camelize(n))];!E&&v&&(E=u[k=toHandlerKey(hyphenate(n))]),E&&callWithAsyncErrorHandling(E,r,6,f);const R=u[k+"Once"];if(R){if(!r.emitted)r.emitted={};else if(r.emitted[k])return;r.emitted[k]=!0,callWithAsyncErrorHandling(R,r,6,f)}}function normalizeEmitsOptions(r,n,l=!1){const u=n.emitsCache,f=u.get(r);if(f!==void 0)return f;const v=r.emits;let x={},k=!1;if(!isFunction(r)){const E=R=>{const z=normalizeEmitsOptions(R,n,!0);z&&(k=!0,extend(x,z))};!l&&n.mixins.length&&n.mixins.forEach(E),r.extends&&E(r.extends),r.mixins&&r.mixins.forEach(E)}return!v&&!k?(isObject(r)&&u.set(r,null),null):(isArray(v)?v.forEach(E=>x[E]=null):extend(x,v),isObject(r)&&u.set(r,x),x)}function isEmitListener(r,n){return!r||!isOn(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn(r,n[0].toLowerCase()+n.slice(1))||hasOwn(r,hyphenate(n))||hasOwn(r,n))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const n=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,n}function withCtx(r,n=currentRenderingInstance,l){if(!n||r._n)return r;const u=(...f)=>{u._d&&setBlockTracking(-1);const v=setCurrentRenderingInstance(n);let x;try{x=r(...f)}finally{setCurrentRenderingInstance(v),u._d&&setBlockTracking(1)}return x};return u._n=!0,u._c=!0,u._d=!0,u}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:n,vnode:l,proxy:u,withProxy:f,props:v,propsOptions:[x],slots:k,attrs:E,emit:R,render:z,renderCache:F,data:Z,setupState:j,ctx:fe,inheritAttrs:J}=r;let ge,xe;const re=setCurrentRenderingInstance(r);try{if(l.shapeFlag&4){const Ce=f||u;ge=normalizeVNode(z.call(Ce,Ce,F,v,j,Z,fe)),xe=E}else{const Ce=n;ge=normalizeVNode(Ce.length>1?Ce(v,{attrs:E,slots:k,emit:R}):Ce(v,null)),xe=n.props?E:getFunctionalFallthrough(E)}}catch(Ce){blockStack.length=0,handleError(Ce,r,1),ge=createVNode(Comment)}let Ae=ge;if(xe&&J!==!1){const Ce=Object.keys(xe),{shapeFlag:nt}=Ae;Ce.length&&nt&7&&(x&&Ce.some(isModelListener)&&(xe=filterModelListeners(xe,x)),Ae=cloneVNode(Ae,xe))}return l.dirs&&(Ae=cloneVNode(Ae),Ae.dirs=Ae.dirs?Ae.dirs.concat(l.dirs):l.dirs),l.transition&&(Ae.transition=l.transition),ge=Ae,setCurrentRenderingInstance(re),ge}const getFunctionalFallthrough=r=>{let n;for(const l in r)(l==="class"||l==="style"||isOn(l))&&((n||(n={}))[l]=r[l]);return n},filterModelListeners=(r,n)=>{const l={};for(const u in r)(!isModelListener(u)||!(u.slice(9)in n))&&(l[u]=r[u]);return l};function shouldUpdateComponent(r,n,l){const{props:u,children:f,component:v}=r,{props:x,children:k,patchFlag:E}=n,R=v.emitsOptions;if(n.dirs||n.transition)return!0;if(l&&E>=0){if(E&1024)return!0;if(E&16)return u?hasPropsChanged(u,x,R):!!x;if(E&8){const z=n.dynamicProps;for(let F=0;F<z.length;F++){const Z=z[F];if(x[Z]!==u[Z]&&!isEmitListener(R,Z))return!0}}}else return(f||k)&&(!k||!k.$stable)?!0:u===x?!1:u?x?hasPropsChanged(u,x,R):!0:!!x;return!1}function hasPropsChanged(r,n,l){const u=Object.keys(n);if(u.length!==Object.keys(r).length)return!0;for(let f=0;f<u.length;f++){const v=u[f];if(n[v]!==r[v]&&!isEmitListener(l,v))return!0}return!1}function updateHOCHostEl({vnode:r,parent:n},l){for(;n&&n.subTree===r;)(r=n.vnode).el=l,n=n.parent}const isSuspense=r=>r.__isSuspense;function queueEffectWithSuspense(r,n){n&&n.pendingBranch?isArray(r)?n.effects.push(...r):n.effects.push(r):queuePostFlushCb(r)}const INITIAL_WATCHER_VALUE={};function watch(r,n,l){return doWatch(r,n,l)}function doWatch(r,n,{immediate:l,deep:u,flush:f,onTrack:v,onTrigger:x}=EMPTY_OBJ){var k;const E=getCurrentScope()===((k=currentInstance)==null?void 0:k.scope)?currentInstance:null;let R,z=!1,F=!1;if(isRef(r)?(R=()=>r.value,z=isShallow(r)):isReactive(r)?(R=()=>r,u=!0):isArray(r)?(F=!0,z=r.some(Ce=>isReactive(Ce)||isShallow(Ce)),R=()=>r.map(Ce=>{if(isRef(Ce))return Ce.value;if(isReactive(Ce))return traverse(Ce);if(isFunction(Ce))return callWithErrorHandling(Ce,E,2)})):isFunction(r)?n?R=()=>callWithErrorHandling(r,E,2):R=()=>{if(!(E&&E.isUnmounted))return Z&&Z(),callWithAsyncErrorHandling(r,E,3,[j])}:R=NOOP,n&&u){const Ce=R;R=()=>traverse(Ce())}let Z,j=Ce=>{Z=re.onStop=()=>{callWithErrorHandling(Ce,E,4)}},fe;if(isInSSRComponentSetup)if(j=NOOP,n?l&&callWithAsyncErrorHandling(n,E,3,[R(),F?[]:void 0,j]):R(),f==="sync"){const Ce=useSSRContext();fe=Ce.__watcherHandles||(Ce.__watcherHandles=[])}else return NOOP;let J=F?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const ge=()=>{if(re.active)if(n){const Ce=re.run();(u||z||(F?Ce.some((nt,Xe)=>hasChanged(nt,J[Xe])):hasChanged(Ce,J)))&&(Z&&Z(),callWithAsyncErrorHandling(n,E,3,[Ce,J===INITIAL_WATCHER_VALUE?void 0:F&&J[0]===INITIAL_WATCHER_VALUE?[]:J,j]),J=Ce)}else re.run()};ge.allowRecurse=!!n;let xe;f==="sync"?xe=ge:f==="post"?xe=()=>queuePostRenderEffect(ge,E&&E.suspense):(ge.pre=!0,E&&(ge.id=E.uid),xe=()=>queueJob(ge));const re=new ReactiveEffect(R,xe);n?l?ge():J=re.run():f==="post"?queuePostRenderEffect(re.run.bind(re),E&&E.suspense):re.run();const Ae=()=>{re.stop(),E&&E.scope&&remove(E.scope.effects,re)};return fe&&fe.push(Ae),Ae}function instanceWatch(r,n,l){const u=this.proxy,f=isString(r)?r.includes(".")?createPathGetter(u,r):()=>u[r]:r.bind(u,u);let v;isFunction(n)?v=n:(v=n.handler,l=n);const x=currentInstance;setCurrentInstance(this);const k=doWatch(f,v.bind(u),l);return x?setCurrentInstance(x):unsetCurrentInstance(),k}function createPathGetter(r,n){const l=n.split(".");return()=>{let u=r;for(let f=0;f<l.length&&u;f++)u=u[l[f]];return u}}function traverse(r,n){if(!isObject(r)||r.__v_skip||(n=n||new Set,n.has(r)))return r;if(n.add(r),isRef(r))traverse(r.value,n);else if(isArray(r))for(let l=0;l<r.length;l++)traverse(r[l],n);else if(isSet(r)||isMap(r))r.forEach(l=>{traverse(l,n)});else if(isPlainObject(r))for(const l in r)traverse(r[l],n);return r}function invokeDirectiveHook(r,n,l,u){const f=r.dirs,v=n&&n.dirs;for(let x=0;x<f.length;x++){const k=f[x];v&&(k.oldValue=v[x].value);let E=k.dir[u];E&&(pauseTracking(),callWithAsyncErrorHandling(E,l,8,[r.el,k,r,n]),resetTracking())}}function defineComponent(r,n){return isFunction(r)?(()=>extend({name:r.name},n,{setup:r}))():r}const isAsyncWrapper=r=>!!r.type.__asyncLoader,isKeepAlive=r=>r.type.__isKeepAlive;function onActivated(r,n){registerKeepAliveHook(r,"a",n)}function onDeactivated(r,n){registerKeepAliveHook(r,"da",n)}function registerKeepAliveHook(r,n,l=currentInstance){const u=r.__wdc||(r.__wdc=()=>{let f=l;for(;f;){if(f.isDeactivated)return;f=f.parent}return r()});if(injectHook(n,u,l),l){let f=l.parent;for(;f&&f.parent;)isKeepAlive(f.parent.vnode)&&injectToKeepAliveRoot(u,n,l,f),f=f.parent}}function injectToKeepAliveRoot(r,n,l,u){const f=injectHook(n,r,u,!0);onUnmounted(()=>{remove(u[n],f)},l)}function injectHook(r,n,l=currentInstance,u=!1){if(l){const f=l[r]||(l[r]=[]),v=n.__weh||(n.__weh=(...x)=>{if(l.isUnmounted)return;pauseTracking(),setCurrentInstance(l);const k=callWithAsyncErrorHandling(n,l,r,x);return unsetCurrentInstance(),resetTracking(),k});return u?f.unshift(v):f.push(v),v}}const createHook=r=>(n,l=currentInstance)=>(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...u)=>n(...u),l),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,n=currentInstance){injectHook("ec",r,n)}const COMPONENTS="components";function resolveComponent(r,n){return resolveAsset(COMPONENTS,r,!0,n)||r}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(r){return isString(r)?resolveAsset(COMPONENTS,r,!1)||r:r||NULL_DYNAMIC_COMPONENT}function resolveAsset(r,n,l=!0,u=!1){const f=currentRenderingInstance||currentInstance;if(f){const v=f.type;if(r===COMPONENTS){const k=getComponentName(v,!1);if(k&&(k===n||k===camelize(n)||k===capitalize(camelize(n))))return v}const x=resolve(f[r]||v[r],n)||resolve(f.appContext[r],n);return!x&&u?v:x}}function resolve(r,n){return r&&(r[n]||r[camelize(n)]||r[capitalize(camelize(n))])}function renderList(r,n,l,u){let f;const v=l&&l[u];if(isArray(r)||isString(r)){f=new Array(r.length);for(let x=0,k=r.length;x<k;x++)f[x]=n(r[x],x,void 0,v&&v[x])}else if(typeof r=="number"){f=new Array(r);for(let x=0;x<r;x++)f[x]=n(x+1,x,void 0,v&&v[x])}else if(isObject(r))if(r[Symbol.iterator])f=Array.from(r,(x,k)=>n(x,k,void 0,v&&v[k]));else{const x=Object.keys(r);f=new Array(x.length);for(let k=0,E=x.length;k<E;k++){const R=x[k];f[k]=n(r[R],R,k,v&&v[k])}}else f=[];return l&&(l[u]=f),f}function toHandlers(r,n){const l={};for(const u in r)l[n&&/[A-Z]/.test(u)?`on:${u}`:toHandlerKey(u)]=r[u];return l}const getPublicInstance=r=>r?isStatefulComponent(r)?getExposeProxy(r)||r.proxy:getPublicInstance(r.parent):null,publicPropertiesMap=extend(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>queueJob(r.update)),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,n)=>r!==EMPTY_OBJ&&!r.__isScriptSetup&&hasOwn(r,n),PublicInstanceProxyHandlers={get({_:r},n){const{ctx:l,setupState:u,data:f,props:v,accessCache:x,type:k,appContext:E}=r;let R;if(n[0]!=="$"){const j=x[n];if(j!==void 0)switch(j){case 1:return u[n];case 2:return f[n];case 4:return l[n];case 3:return v[n]}else{if(hasSetupBinding(u,n))return x[n]=1,u[n];if(f!==EMPTY_OBJ&&hasOwn(f,n))return x[n]=2,f[n];if((R=r.propsOptions[0])&&hasOwn(R,n))return x[n]=3,v[n];if(l!==EMPTY_OBJ&&hasOwn(l,n))return x[n]=4,l[n];shouldCacheAccess&&(x[n]=0)}}const z=publicPropertiesMap[n];let F,Z;if(z)return n==="$attrs"&&track(r,"get",n),z(r);if((F=k.__cssModules)&&(F=F[n]))return F;if(l!==EMPTY_OBJ&&hasOwn(l,n))return x[n]=4,l[n];if(Z=E.config.globalProperties,hasOwn(Z,n))return Z[n]},set({_:r},n,l){const{data:u,setupState:f,ctx:v}=r;return hasSetupBinding(f,n)?(f[n]=l,!0):u!==EMPTY_OBJ&&hasOwn(u,n)?(u[n]=l,!0):hasOwn(r.props,n)||n[0]==="$"&&n.slice(1)in r?!1:(v[n]=l,!0)},has({_:{data:r,setupState:n,accessCache:l,ctx:u,appContext:f,propsOptions:v}},x){let k;return!!l[x]||r!==EMPTY_OBJ&&hasOwn(r,x)||hasSetupBinding(n,x)||(k=v[0])&&hasOwn(k,x)||hasOwn(u,x)||hasOwn(publicPropertiesMap,x)||hasOwn(f.config.globalProperties,x)},defineProperty(r,n,l){return l.get!=null?r._.accessCache[n]=0:hasOwn(l,"value")&&this.set(r,n,l.value,null),Reflect.defineProperty(r,n,l)}};function normalizePropsOrEmits(r){return isArray(r)?r.reduce((n,l)=>(n[l]=null,n),{}):r}let shouldCacheAccess=!0;function applyOptions(r){const n=resolveMergedOptions(r),l=r.proxy,u=r.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook(n.beforeCreate,r,"bc");const{data:f,computed:v,methods:x,watch:k,provide:E,inject:R,created:z,beforeMount:F,mounted:Z,beforeUpdate:j,updated:fe,activated:J,deactivated:ge,beforeDestroy:xe,beforeUnmount:re,destroyed:Ae,unmounted:Ce,render:nt,renderTracked:Xe,renderTriggered:mt,errorCaptured:yt,serverPrefetch:Ut,expose:Mt,inheritAttrs:wt,components:at,directives:_e,filters:Jt}=n;if(R&&resolveInjections(R,u,null),x)for(const Ke in x){const ot=x[Ke];isFunction(ot)&&(u[Ke]=ot.bind(l))}if(f){const Ke=f.call(l,l);isObject(Ke)&&(r.data=reactive(Ke))}if(shouldCacheAccess=!0,v)for(const Ke in v){const ot=v[Ke],jt=isFunction(ot)?ot.bind(l,l):isFunction(ot.get)?ot.get.bind(l,l):NOOP,Pt=!isFunction(ot)&&isFunction(ot.set)?ot.set.bind(l):NOOP,Ot=computed({get:jt,set:Pt});Object.defineProperty(u,Ke,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:vt=>Ot.value=vt})}if(k)for(const Ke in k)createWatcher(k[Ke],u,l,Ke);if(E){const Ke=isFunction(E)?E.call(l):E;Reflect.ownKeys(Ke).forEach(ot=>{provide(ot,Ke[ot])})}z&&callHook(z,r,"c");function Qe(Ke,ot){isArray(ot)?ot.forEach(jt=>Ke(jt.bind(l))):ot&&Ke(ot.bind(l))}if(Qe(onBeforeMount,F),Qe(onMounted,Z),Qe(onBeforeUpdate,j),Qe(onUpdated,fe),Qe(onActivated,J),Qe(onDeactivated,ge),Qe(onErrorCaptured,yt),Qe(onRenderTracked,Xe),Qe(onRenderTriggered,mt),Qe(onBeforeUnmount,re),Qe(onUnmounted,Ce),Qe(onServerPrefetch,Ut),isArray(Mt))if(Mt.length){const Ke=r.exposed||(r.exposed={});Mt.forEach(ot=>{Object.defineProperty(Ke,ot,{get:()=>l[ot],set:jt=>l[ot]=jt})})}else r.exposed||(r.exposed={});nt&&r.render===NOOP&&(r.render=nt),wt!=null&&(r.inheritAttrs=wt),at&&(r.components=at),_e&&(r.directives=_e)}function resolveInjections(r,n,l=NOOP){isArray(r)&&(r=normalizeInject(r));for(const u in r){const f=r[u];let v;isObject(f)?"default"in f?v=inject(f.from||u,f.default,!0):v=inject(f.from||u):v=inject(f),isRef(v)?Object.defineProperty(n,u,{enumerable:!0,configurable:!0,get:()=>v.value,set:x=>v.value=x}):n[u]=v}}function callHook(r,n,l){callWithAsyncErrorHandling(isArray(r)?r.map(u=>u.bind(n.proxy)):r.bind(n.proxy),n,l)}function createWatcher(r,n,l,u){const f=u.includes(".")?createPathGetter(l,u):()=>l[u];if(isString(r)){const v=n[r];isFunction(v)&&watch(f,v)}else if(isFunction(r))watch(f,r.bind(l));else if(isObject(r))if(isArray(r))r.forEach(v=>createWatcher(v,n,l,u));else{const v=isFunction(r.handler)?r.handler.bind(l):n[r.handler];isFunction(v)&&watch(f,v,r)}}function resolveMergedOptions(r){const n=r.type,{mixins:l,extends:u}=n,{mixins:f,optionsCache:v,config:{optionMergeStrategies:x}}=r.appContext,k=v.get(n);let E;return k?E=k:!f.length&&!l&&!u?E=n:(E={},f.length&&f.forEach(R=>mergeOptions(E,R,x,!0)),mergeOptions(E,n,x)),isObject(n)&&v.set(n,E),E}function mergeOptions(r,n,l,u=!1){const{mixins:f,extends:v}=n;v&&mergeOptions(r,v,l,!0),f&&f.forEach(x=>mergeOptions(r,x,l,!0));for(const x in n)if(!(u&&x==="expose")){const k=internalOptionMergeStrats[x]||l&&l[x];r[x]=k?k(r[x],n[x]):n[x]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,n){return n?r?function(){return extend(isFunction(r)?r.call(this,this):r,isFunction(n)?n.call(this,this):n)}:n:r}function mergeInject(r,n){return mergeObjectOptions(normalizeInject(r),normalizeInject(n))}function normalizeInject(r){if(isArray(r)){const n={};for(let l=0;l<r.length;l++)n[r[l]]=r[l];return n}return r}function mergeAsArray(r,n){return r?[...new Set([].concat(r,n))]:n}function mergeObjectOptions(r,n){return r?extend(Object.create(null),r,n):n}function mergeEmitsOrPropsOptions(r,n){return r?isArray(r)&&isArray(n)?[...new Set([...r,...n])]:extend(Object.create(null),normalizePropsOrEmits(r),normalizePropsOrEmits(n??{})):n}function mergeWatchOptions(r,n){if(!r)return n;if(!n)return r;const l=extend(Object.create(null),r);for(const u in n)l[u]=mergeAsArray(r[u],n[u]);return l}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,n){return function(u,f=null){isFunction(u)||(u=extend({},u)),f!=null&&!isObject(f)&&(f=null);const v=createAppContext(),x=new Set;let k=!1;const E=v.app={_uid:uid$1++,_component:u,_props:f,_container:null,_context:v,_instance:null,version,get config(){return v.config},set config(R){},use(R,...z){return x.has(R)||(R&&isFunction(R.install)?(x.add(R),R.install(E,...z)):isFunction(R)&&(x.add(R),R(E,...z))),E},mixin(R){return v.mixins.includes(R)||v.mixins.push(R),E},component(R,z){return z?(v.components[R]=z,E):v.components[R]},directive(R,z){return z?(v.directives[R]=z,E):v.directives[R]},mount(R,z,F){if(!k){const Z=createVNode(u,f);return Z.appContext=v,z&&n?n(Z,R):r(Z,R,F),k=!0,E._container=R,R.__vue_app__=E,getExposeProxy(Z.component)||Z.component.proxy}},unmount(){k&&(r(null,E._container),delete E._container.__vue_app__)},provide(R,z){return v.provides[R]=z,E},runWithContext(R){currentApp=E;try{return R()}finally{currentApp=null}}};return E}}let currentApp=null;function provide(r,n){if(currentInstance){let l=currentInstance.provides;const u=currentInstance.parent&&currentInstance.parent.provides;u===l&&(l=currentInstance.provides=Object.create(u)),l[r]=n}}function inject(r,n,l=!1){const u=currentInstance||currentRenderingInstance;if(u||currentApp){const f=u?u.parent==null?u.vnode.appContext&&u.vnode.appContext.provides:u.parent.provides:currentApp._context.provides;if(f&&r in f)return f[r];if(arguments.length>1)return l&&isFunction(n)?n.call(u&&u.proxy):n}}function initProps(r,n,l,u=!1){const f={},v={};def(v,InternalObjectKey,1),r.propsDefaults=Object.create(null),setFullProps(r,n,f,v);for(const x in r.propsOptions[0])x in f||(f[x]=void 0);l?r.props=u?f:shallowReactive(f):r.type.props?r.props=f:r.props=v,r.attrs=v}function updateProps(r,n,l,u){const{props:f,attrs:v,vnode:{patchFlag:x}}=r,k=toRaw(f),[E]=r.propsOptions;let R=!1;if((u||x>0)&&!(x&16)){if(x&8){const z=r.vnode.dynamicProps;for(let F=0;F<z.length;F++){let Z=z[F];if(isEmitListener(r.emitsOptions,Z))continue;const j=n[Z];if(E)if(hasOwn(v,Z))j!==v[Z]&&(v[Z]=j,R=!0);else{const fe=camelize(Z);f[fe]=resolvePropValue(E,k,fe,j,r,!1)}else j!==v[Z]&&(v[Z]=j,R=!0)}}}else{setFullProps(r,n,f,v)&&(R=!0);let z;for(const F in k)(!n||!hasOwn(n,F)&&((z=hyphenate(F))===F||!hasOwn(n,z)))&&(E?l&&(l[F]!==void 0||l[z]!==void 0)&&(f[F]=resolvePropValue(E,k,F,void 0,r,!0)):delete f[F]);if(v!==k)for(const F in v)(!n||!hasOwn(n,F))&&(delete v[F],R=!0)}R&&trigger(r,"set","$attrs")}function setFullProps(r,n,l,u){const[f,v]=r.propsOptions;let x=!1,k;if(n)for(let E in n){if(isReservedProp(E))continue;const R=n[E];let z;f&&hasOwn(f,z=camelize(E))?!v||!v.includes(z)?l[z]=R:(k||(k={}))[z]=R:isEmitListener(r.emitsOptions,E)||(!(E in u)||R!==u[E])&&(u[E]=R,x=!0)}if(v){const E=toRaw(l),R=k||EMPTY_OBJ;for(let z=0;z<v.length;z++){const F=v[z];l[F]=resolvePropValue(f,E,F,R[F],r,!hasOwn(R,F))}}return x}function resolvePropValue(r,n,l,u,f,v){const x=r[l];if(x!=null){const k=hasOwn(x,"default");if(k&&u===void 0){const E=x.default;if(x.type!==Function&&!x.skipFactory&&isFunction(E)){const{propsDefaults:R}=f;l in R?u=R[l]:(setCurrentInstance(f),u=R[l]=E.call(null,n),unsetCurrentInstance())}else u=E}x[0]&&(v&&!k?u=!1:x[1]&&(u===""||u===hyphenate(l))&&(u=!0))}return u}function normalizePropsOptions(r,n,l=!1){const u=n.propsCache,f=u.get(r);if(f)return f;const v=r.props,x={},k=[];let E=!1;if(!isFunction(r)){const z=F=>{E=!0;const[Z,j]=normalizePropsOptions(F,n,!0);extend(x,Z),j&&k.push(...j)};!l&&n.mixins.length&&n.mixins.forEach(z),r.extends&&z(r.extends),r.mixins&&r.mixins.forEach(z)}if(!v&&!E)return isObject(r)&&u.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray(v))for(let z=0;z<v.length;z++){const F=camelize(v[z]);validatePropName(F)&&(x[F]=EMPTY_OBJ)}else if(v)for(const z in v){const F=camelize(z);if(validatePropName(F)){const Z=v[z],j=x[F]=isArray(Z)||isFunction(Z)?{type:Z}:extend({},Z);if(j){const fe=getTypeIndex(Boolean,j.type),J=getTypeIndex(String,j.type);j[0]=fe>-1,j[1]=J<0||fe<J,(fe>-1||hasOwn(j,"default"))&&k.push(F)}}}const R=[x,k];return isObject(r)&&u.set(r,R),R}function validatePropName(r){return r[0]!=="$"}function getType(r){const n=r&&r.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:r===null?"null":""}function isSameType(r,n){return getType(r)===getType(n)}function getTypeIndex(r,n){return isArray(n)?n.findIndex(l=>isSameType(l,r)):isFunction(n)&&isSameType(n,r)?0:-1}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot=(r,n,l)=>{if(n._n)return n;const u=withCtx((...f)=>normalizeSlotValue(n(...f)),l);return u._c=!1,u},normalizeObjectSlots=(r,n,l)=>{const u=r._ctx;for(const f in r){if(isInternalKey(f))continue;const v=r[f];if(isFunction(v))n[f]=normalizeSlot(f,v,u);else if(v!=null){const x=normalizeSlotValue(v);n[f]=()=>x}}},normalizeVNodeSlots=(r,n)=>{const l=normalizeSlotValue(n);r.slots.default=()=>l},initSlots=(r,n)=>{if(r.vnode.shapeFlag&32){const l=n._;l?(r.slots=toRaw(n),def(n,"_",l)):normalizeObjectSlots(n,r.slots={})}else r.slots={},n&&normalizeVNodeSlots(r,n);def(r.slots,InternalObjectKey,1)},updateSlots=(r,n,l)=>{const{vnode:u,slots:f}=r;let v=!0,x=EMPTY_OBJ;if(u.shapeFlag&32){const k=n._;k?l&&k===1?v=!1:(extend(f,n),!l&&k===1&&delete f._):(v=!n.$stable,normalizeObjectSlots(n,f)),x=n}else n&&(normalizeVNodeSlots(r,n),x={default:1});if(v)for(const k in f)!isInternalKey(k)&&!(k in x)&&delete f[k]};function setRef(r,n,l,u,f=!1){if(isArray(r)){r.forEach((Z,j)=>setRef(Z,n&&(isArray(n)?n[j]:n),l,u,f));return}if(isAsyncWrapper(u)&&!f)return;const v=u.shapeFlag&4?getExposeProxy(u.component)||u.component.proxy:u.el,x=f?null:v,{i:k,r:E}=r,R=n&&n.r,z=k.refs===EMPTY_OBJ?k.refs={}:k.refs,F=k.setupState;if(R!=null&&R!==E&&(isString(R)?(z[R]=null,hasOwn(F,R)&&(F[R]=null)):isRef(R)&&(R.value=null)),isFunction(E))callWithErrorHandling(E,k,12,[x,z]);else{const Z=isString(E),j=isRef(E);if(Z||j){const fe=()=>{if(r.f){const J=Z?hasOwn(F,E)?F[E]:z[E]:E.value;f?isArray(J)&&remove(J,v):isArray(J)?J.includes(v)||J.push(v):Z?(z[E]=[v],hasOwn(F,E)&&(F[E]=z[E])):(E.value=[v],r.k&&(z[r.k]=E.value))}else Z?(z[E]=x,hasOwn(F,E)&&(F[E]=x)):j&&(E.value=x,r.k&&(z[r.k]=x))};x?(fe.id=-1,queuePostRenderEffect(fe,l)):fe()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function baseCreateRenderer(r,n){const l=getGlobalThis();l.__VUE__=!0;const{insert:u,remove:f,patchProp:v,createElement:x,createText:k,createComment:E,setText:R,setElementText:z,parentNode:F,nextSibling:Z,setScopeId:j=NOOP,insertStaticContent:fe}=r,J=(L,N,$,ie=null,ne=null,de=null,he=!1,ae=null,pe=!!N.dynamicChildren)=>{if(L===N)return;L&&!isSameVNodeType(L,N)&&(ie=Rt(L),vt(L,ne,de,!0),L=null),N.patchFlag===-2&&(pe=!1,N.dynamicChildren=null);const{type:le,ref:Ie,shapeFlag:Se}=N;switch(le){case Text:ge(L,N,$,ie);break;case Comment:xe(L,N,$,ie);break;case Static:L==null&&re(N,$,ie,he);break;case Fragment:at(L,N,$,ie,ne,de,he,ae,pe);break;default:Se&1?nt(L,N,$,ie,ne,de,he,ae,pe):Se&6?_e(L,N,$,ie,ne,de,he,ae,pe):(Se&64||Se&128)&&le.process(L,N,$,ie,ne,de,he,ae,pe,tr)}Ie!=null&&ne&&setRef(Ie,L&&L.ref,de,N||L,!N)},ge=(L,N,$,ie)=>{if(L==null)u(N.el=k(N.children),$,ie);else{const ne=N.el=L.el;N.children!==L.children&&R(ne,N.children)}},xe=(L,N,$,ie)=>{L==null?u(N.el=E(N.children||""),$,ie):N.el=L.el},re=(L,N,$,ie)=>{[L.el,L.anchor]=fe(L.children,N,$,ie,L.el,L.anchor)},Ae=({el:L,anchor:N},$,ie)=>{let ne;for(;L&&L!==N;)ne=Z(L),u(L,$,ie),L=ne;u(N,$,ie)},Ce=({el:L,anchor:N})=>{let $;for(;L&&L!==N;)$=Z(L),f(L),L=$;f(N)},nt=(L,N,$,ie,ne,de,he,ae,pe)=>{he=he||N.type==="svg",L==null?Xe(N,$,ie,ne,de,he,ae,pe):Ut(L,N,ne,de,he,ae,pe)},Xe=(L,N,$,ie,ne,de,he,ae)=>{let pe,le;const{type:Ie,props:Se,shapeFlag:Me,transition:De,dirs:Le}=L;if(pe=L.el=x(L.type,de,Se&&Se.is,Se),Me&8?z(pe,L.children):Me&16&&yt(L.children,pe,null,ie,ne,de&&Ie!=="foreignObject",he,ae),Le&&invokeDirectiveHook(L,null,ie,"created"),mt(pe,L,L.scopeId,he,ie),Se){for(const je in Se)je!=="value"&&!isReservedProp(je)&&v(pe,je,null,Se[je],de,L.children,ie,ne,Kt);"value"in Se&&v(pe,"value",null,Se.value),(le=Se.onVnodeBeforeMount)&&invokeVNodeHook(le,ie,L)}Le&&invokeDirectiveHook(L,null,ie,"beforeMount");const it=(!ne||ne&&!ne.pendingBranch)&&De&&!De.persisted;it&&De.beforeEnter(pe),u(pe,N,$),((le=Se&&Se.onVnodeMounted)||it||Le)&&queuePostRenderEffect(()=>{le&&invokeVNodeHook(le,ie,L),it&&De.enter(pe),Le&&invokeDirectiveHook(L,null,ie,"mounted")},ne)},mt=(L,N,$,ie,ne)=>{if($&&j(L,$),ie)for(let de=0;de<ie.length;de++)j(L,ie[de]);if(ne){let de=ne.subTree;if(N===de){const he=ne.vnode;mt(L,he,he.scopeId,he.slotScopeIds,ne.parent)}}},yt=(L,N,$,ie,ne,de,he,ae,pe=0)=>{for(let le=pe;le<L.length;le++){const Ie=L[le]=ae?cloneIfMounted(L[le]):normalizeVNode(L[le]);J(null,Ie,N,$,ie,ne,de,he,ae)}},Ut=(L,N,$,ie,ne,de,he)=>{const ae=N.el=L.el;let{patchFlag:pe,dynamicChildren:le,dirs:Ie}=N;pe|=L.patchFlag&16;const Se=L.props||EMPTY_OBJ,Me=N.props||EMPTY_OBJ;let De;$&&toggleRecurse($,!1),(De=Me.onVnodeBeforeUpdate)&&invokeVNodeHook(De,$,N,L),Ie&&invokeDirectiveHook(N,L,$,"beforeUpdate"),$&&toggleRecurse($,!0);const Le=ne&&N.type!=="foreignObject";if(le?Mt(L.dynamicChildren,le,ae,$,ie,Le,de):he||ot(L,N,ae,null,$,ie,Le,de,!1),pe>0){if(pe&16)wt(ae,N,Se,Me,$,ie,ne);else if(pe&2&&Se.class!==Me.class&&v(ae,"class",null,Me.class,ne),pe&4&&v(ae,"style",Se.style,Me.style,ne),pe&8){const it=N.dynamicProps;for(let je=0;je<it.length;je++){const _t=it[je],$t=Se[_t],mr=Me[_t];(mr!==$t||_t==="value")&&v(ae,_t,$t,mr,ne,L.children,$,ie,Kt)}}pe&1&&L.children!==N.children&&z(ae,N.children)}else!he&&le==null&&wt(ae,N,Se,Me,$,ie,ne);((De=Me.onVnodeUpdated)||Ie)&&queuePostRenderEffect(()=>{De&&invokeVNodeHook(De,$,N,L),Ie&&invokeDirectiveHook(N,L,$,"updated")},ie)},Mt=(L,N,$,ie,ne,de,he)=>{for(let ae=0;ae<N.length;ae++){const pe=L[ae],le=N[ae],Ie=pe.el&&(pe.type===Fragment||!isSameVNodeType(pe,le)||pe.shapeFlag&70)?F(pe.el):$;J(pe,le,Ie,null,ie,ne,de,he,!0)}},wt=(L,N,$,ie,ne,de,he)=>{if($!==ie){if($!==EMPTY_OBJ)for(const ae in $)!isReservedProp(ae)&&!(ae in ie)&&v(L,ae,$[ae],null,he,N.children,ne,de,Kt);for(const ae in ie){if(isReservedProp(ae))continue;const pe=ie[ae],le=$[ae];pe!==le&&ae!=="value"&&v(L,ae,le,pe,he,N.children,ne,de,Kt)}"value"in ie&&v(L,"value",$.value,ie.value)}},at=(L,N,$,ie,ne,de,he,ae,pe)=>{const le=N.el=L?L.el:k(""),Ie=N.anchor=L?L.anchor:k("");let{patchFlag:Se,dynamicChildren:Me,slotScopeIds:De}=N;De&&(ae=ae?ae.concat(De):De),L==null?(u(le,$,ie),u(Ie,$,ie),yt(N.children,$,Ie,ne,de,he,ae,pe)):Se>0&&Se&64&&Me&&L.dynamicChildren?(Mt(L.dynamicChildren,Me,$,ne,de,he,ae),(N.key!=null||ne&&N===ne.subTree)&&traverseStaticChildren(L,N,!0)):ot(L,N,$,Ie,ne,de,he,ae,pe)},_e=(L,N,$,ie,ne,de,he,ae,pe)=>{N.slotScopeIds=ae,L==null?N.shapeFlag&512?ne.ctx.activate(N,$,ie,he,pe):Jt(N,$,ie,ne,de,he,pe):It(L,N,pe)},Jt=(L,N,$,ie,ne,de,he)=>{const ae=L.component=createComponentInstance(L,ie,ne);if(isKeepAlive(L)&&(ae.ctx.renderer=tr),setupComponent(ae),ae.asyncDep){if(ne&&ne.registerDep(ae,Qe),!L.el){const pe=ae.subTree=createVNode(Comment);xe(null,pe,N,$)}return}Qe(ae,L,N,$,ne,de,he)},It=(L,N,$)=>{const ie=N.component=L.component;if(shouldUpdateComponent(L,N,$))if(ie.asyncDep&&!ie.asyncResolved){Ke(ie,N,$);return}else ie.next=N,invalidateJob(ie.update),ie.update();else N.el=L.el,ie.vnode=N},Qe=(L,N,$,ie,ne,de,he)=>{const ae=()=>{if(L.isMounted){let{next:Ie,bu:Se,u:Me,parent:De,vnode:Le}=L,it=Ie,je;toggleRecurse(L,!1),Ie?(Ie.el=Le.el,Ke(L,Ie,he)):Ie=Le,Se&&invokeArrayFns(Se),(je=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&invokeVNodeHook(je,De,Ie,Le),toggleRecurse(L,!0);const _t=renderComponentRoot(L),$t=L.subTree;L.subTree=_t,J($t,_t,F($t.el),Rt($t),L,ne,de),Ie.el=_t.el,it===null&&updateHOCHostEl(L,_t.el),Me&&queuePostRenderEffect(Me,ne),(je=Ie.props&&Ie.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(je,De,Ie,Le),ne)}else{let Ie;const{el:Se,props:Me}=N,{bm:De,m:Le,parent:it}=L,je=isAsyncWrapper(N);if(toggleRecurse(L,!1),De&&invokeArrayFns(De),!je&&(Ie=Me&&Me.onVnodeBeforeMount)&&invokeVNodeHook(Ie,it,N),toggleRecurse(L,!0),Se&&Mr){const _t=()=>{L.subTree=renderComponentRoot(L),Mr(Se,L.subTree,L,ne,null)};je?N.type.__asyncLoader().then(()=>!L.isUnmounted&&_t()):_t()}else{const _t=L.subTree=renderComponentRoot(L);J(null,_t,$,ie,L,ne,de),N.el=_t.el}if(Le&&queuePostRenderEffect(Le,ne),!je&&(Ie=Me&&Me.onVnodeMounted)){const _t=N;queuePostRenderEffect(()=>invokeVNodeHook(Ie,it,_t),ne)}(N.shapeFlag&256||it&&isAsyncWrapper(it.vnode)&&it.vnode.shapeFlag&256)&&L.a&&queuePostRenderEffect(L.a,ne),L.isMounted=!0,N=$=ie=null}},pe=L.effect=new ReactiveEffect(ae,()=>queueJob(le),L.scope),le=L.update=()=>pe.run();le.id=L.uid,toggleRecurse(L,!0),le()},Ke=(L,N,$)=>{N.component=L;const ie=L.vnode.props;L.vnode=N,L.next=null,updateProps(L,N.props,ie,$),updateSlots(L,N.children,$),pauseTracking(),flushPreFlushCbs(),resetTracking()},ot=(L,N,$,ie,ne,de,he,ae,pe=!1)=>{const le=L&&L.children,Ie=L?L.shapeFlag:0,Se=N.children,{patchFlag:Me,shapeFlag:De}=N;if(Me>0){if(Me&128){Pt(le,Se,$,ie,ne,de,he,ae,pe);return}else if(Me&256){jt(le,Se,$,ie,ne,de,he,ae,pe);return}}De&8?(Ie&16&&Kt(le,ne,de),Se!==le&&z($,Se)):Ie&16?De&16?Pt(le,Se,$,ie,ne,de,he,ae,pe):Kt(le,ne,de,!0):(Ie&8&&z($,""),De&16&&yt(Se,$,ie,ne,de,he,ae,pe))},jt=(L,N,$,ie,ne,de,he,ae,pe)=>{L=L||EMPTY_ARR,N=N||EMPTY_ARR;const le=L.length,Ie=N.length,Se=Math.min(le,Ie);let Me;for(Me=0;Me<Se;Me++){const De=N[Me]=pe?cloneIfMounted(N[Me]):normalizeVNode(N[Me]);J(L[Me],De,$,null,ne,de,he,ae,pe)}le>Ie?Kt(L,ne,de,!0,!1,Se):yt(N,$,ie,ne,de,he,ae,pe,Se)},Pt=(L,N,$,ie,ne,de,he,ae,pe)=>{let le=0;const Ie=N.length;let Se=L.length-1,Me=Ie-1;for(;le<=Se&&le<=Me;){const De=L[le],Le=N[le]=pe?cloneIfMounted(N[le]):normalizeVNode(N[le]);if(isSameVNodeType(De,Le))J(De,Le,$,null,ne,de,he,ae,pe);else break;le++}for(;le<=Se&&le<=Me;){const De=L[Se],Le=N[Me]=pe?cloneIfMounted(N[Me]):normalizeVNode(N[Me]);if(isSameVNodeType(De,Le))J(De,Le,$,null,ne,de,he,ae,pe);else break;Se--,Me--}if(le>Se){if(le<=Me){const De=Me+1,Le=De<Ie?N[De].el:ie;for(;le<=Me;)J(null,N[le]=pe?cloneIfMounted(N[le]):normalizeVNode(N[le]),$,Le,ne,de,he,ae,pe),le++}}else if(le>Me)for(;le<=Se;)vt(L[le],ne,de,!0),le++;else{const De=le,Le=le,it=new Map;for(le=Le;le<=Me;le++){const qe=N[le]=pe?cloneIfMounted(N[le]):normalizeVNode(N[le]);qe.key!=null&&it.set(qe.key,le)}let je,_t=0;const $t=Me-Le+1;let mr=!1,Nr=0;const st=new Array($t);for(le=0;le<$t;le++)st[le]=0;for(le=De;le<=Se;le++){const qe=L[le];if(_t>=$t){vt(qe,ne,de,!0);continue}let lt;if(qe.key!=null)lt=it.get(qe.key);else for(je=Le;je<=Me;je++)if(st[je-Le]===0&&isSameVNodeType(qe,N[je])){lt=je;break}lt===void 0?vt(qe,ne,de,!0):(st[lt-Le]=le+1,lt>=Nr?Nr=lt:mr=!0,J(qe,N[lt],$,null,ne,de,he,ae,pe),_t++)}const sr=mr?getSequence(st):EMPTY_ARR;for(je=sr.length-1,le=$t-1;le>=0;le--){const qe=Le+le,lt=N[qe],dr=qe+1<Ie?N[qe+1].el:ie;st[le]===0?J(null,lt,$,dr,ne,de,he,ae,pe):mr&&(je<0||le!==sr[je]?Ot(lt,$,dr,2):je--)}}},Ot=(L,N,$,ie,ne=null)=>{const{el:de,type:he,transition:ae,children:pe,shapeFlag:le}=L;if(le&6){Ot(L.component.subTree,N,$,ie);return}if(le&128){L.suspense.move(N,$,ie);return}if(le&64){he.move(L,N,$,tr);return}if(he===Fragment){u(de,N,$);for(let Se=0;Se<pe.length;Se++)Ot(pe[Se],N,$,ie);u(L.anchor,N,$);return}if(he===Static){Ae(L,N,$);return}if(ie!==2&&le&1&&ae)if(ie===0)ae.beforeEnter(de),u(de,N,$),queuePostRenderEffect(()=>ae.enter(de),ne);else{const{leave:Se,delayLeave:Me,afterLeave:De}=ae,Le=()=>u(de,N,$),it=()=>{Se(de,()=>{Le(),De&&De()})};Me?Me(de,Le,it):it()}else u(de,N,$)},vt=(L,N,$,ie=!1,ne=!1)=>{const{type:de,props:he,ref:ae,children:pe,dynamicChildren:le,shapeFlag:Ie,patchFlag:Se,dirs:Me}=L;if(ae!=null&&setRef(ae,null,$,L,!0),Ie&256){N.ctx.deactivate(L);return}const De=Ie&1&&Me,Le=!isAsyncWrapper(L);let it;if(Le&&(it=he&&he.onVnodeBeforeUnmount)&&invokeVNodeHook(it,N,L),Ie&6)Qr(L.component,$,ie);else{if(Ie&128){L.suspense.unmount($,ie);return}De&&invokeDirectiveHook(L,null,N,"beforeUnmount"),Ie&64?L.type.remove(L,N,$,ne,tr,ie):le&&(de!==Fragment||Se>0&&Se&64)?Kt(le,N,$,!1,!0):(de===Fragment&&Se&384||!ne&&Ie&16)&&Kt(pe,N,$),ie&&Ft(L)}(Le&&(it=he&&he.onVnodeUnmounted)||De)&&queuePostRenderEffect(()=>{it&&invokeVNodeHook(it,N,L),De&&invokeDirectiveHook(L,null,N,"unmounted")},$)},Ft=L=>{const{type:N,el:$,anchor:ie,transition:ne}=L;if(N===Fragment){Et($,ie);return}if(N===Static){Ce(L);return}const de=()=>{f($),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(L.shapeFlag&1&&ne&&!ne.persisted){const{leave:he,delayLeave:ae}=ne,pe=()=>he($,de);ae?ae(L.el,de,pe):pe()}else de()},Et=(L,N)=>{let $;for(;L!==N;)$=Z(L),f(L),L=$;f(N)},Qr=(L,N,$)=>{const{bum:ie,scope:ne,update:de,subTree:he,um:ae}=L;ie&&invokeArrayFns(ie),ne.stop(),de&&(de.active=!1,vt(he,L,N,$)),ae&&queuePostRenderEffect(ae,N),queuePostRenderEffect(()=>{L.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},Kt=(L,N,$,ie=!1,ne=!1,de=0)=>{for(let he=de;he<L.length;he++)vt(L[he],N,$,ie,ne)},Rt=L=>L.shapeFlag&6?Rt(L.component.subTree):L.shapeFlag&128?L.suspense.next():Z(L.anchor||L.el),ye=(L,N,$)=>{L==null?N._vnode&&vt(N._vnode,null,null,!0):J(N._vnode||null,L,N,null,null,null,$),flushPreFlushCbs(),flushPostFlushCbs(),N._vnode=L},tr={p:J,um:vt,m:Ot,r:Ft,mt:Jt,mc:yt,pc:ot,pbc:Mt,n:Rt,o:r};let fr,Mr;return n&&([fr,Mr]=n(tr)),{render:ye,hydrate:fr,createApp:createAppAPI(ye,fr)}}function toggleRecurse({effect:r,update:n},l){r.allowRecurse=n.allowRecurse=l}function traverseStaticChildren(r,n,l=!1){const u=r.children,f=n.children;if(isArray(u)&&isArray(f))for(let v=0;v<u.length;v++){const x=u[v];let k=f[v];k.shapeFlag&1&&!k.dynamicChildren&&((k.patchFlag<=0||k.patchFlag===32)&&(k=f[v]=cloneIfMounted(f[v]),k.el=x.el),l||traverseStaticChildren(x,k)),k.type===Text&&(k.el=x.el)}}function getSequence(r){const n=r.slice(),l=[0];let u,f,v,x,k;const E=r.length;for(u=0;u<E;u++){const R=r[u];if(R!==0){if(f=l[l.length-1],r[f]<R){n[u]=f,l.push(u);continue}for(v=0,x=l.length-1;v<x;)k=v+x>>1,r[l[k]]<R?v=k+1:x=k;R<r[l[v]]&&(v>0&&(n[u]=l[v-1]),l[v]=u)}}for(v=l.length,x=l[v-1];v-- >0;)l[v]=x,x=n[x];return l}const isTeleport=r=>r.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r){isBlockTreeEnabled+=r}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,n,l,u,f,v){return setupBlock(createBaseVNode(r,n,l,u,f,v,!0))}function createBlock(r,n,l,u,f){return setupBlock(createVNode(r,n,l,u,f,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,n){return r.type===n.type&&r.key===n.key}const InternalObjectKey="__vInternal",normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:n,ref_for:l})=>(typeof r=="number"&&(r=""+r),r!=null?isString(r)||isRef(r)||isFunction(r)?{i:currentRenderingInstance,r,k:n,f:!!l}:r:null);function createBaseVNode(r,n=null,l=null,u=0,f=null,v=r===Fragment?0:1,x=!1,k=!1){const E={__v_isVNode:!0,__v_skip:!0,type:r,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:v,patchFlag:u,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return k?(normalizeChildren(E,l),v&128&&r.normalize(E)):l&&(E.shapeFlag|=isString(l)?8:16),isBlockTreeEnabled>0&&!x&&currentBlock&&(E.patchFlag>0||v&6)&&E.patchFlag!==32&&currentBlock.push(E),E}const createVNode=_createVNode;function _createVNode(r,n=null,l=null,u=0,f=null,v=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const k=cloneVNode(r,n,!0);return l&&normalizeChildren(k,l),isBlockTreeEnabled>0&&!v&&currentBlock&&(k.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=k:currentBlock.push(k)),k.patchFlag|=-2,k}if(isClassComponent(r)&&(r=r.__vccOpts),n){n=guardReactiveProps(n);let{class:k,style:E}=n;k&&!isString(k)&&(n.class=normalizeClass(k)),isObject(E)&&(isProxy(E)&&!isArray(E)&&(E=extend({},E)),n.style=normalizeStyle(E))}const x=isString(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject(r)?4:isFunction(r)?2:0;return createBaseVNode(r,n,l,u,f,x,v,!0)}function guardReactiveProps(r){return r?isProxy(r)||InternalObjectKey in r?extend({},r):r:null}function cloneVNode(r,n,l=!1){const{props:u,ref:f,patchFlag:v,children:x}=r,k=n?mergeProps(u||{},n):u;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:k,key:k&&normalizeKey(k),ref:n&&n.ref?l&&f?isArray(f)?f.concat(normalizeRef(n)):[f,normalizeRef(n)]:normalizeRef(n):f,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:x,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:n&&r.type!==Fragment?v===-1?16:v|16:v,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function createTextVNode(r=" ",n=0){return createVNode(Text,null,r,n)}function createCommentVNode(r="",n=!1){return n?(openBlock(),createBlock(Comment,null,r)):createVNode(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray(r)?createVNode(Fragment,null,r.slice()):typeof r=="object"?cloneIfMounted(r):createVNode(Text,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,n){let l=0;const{shapeFlag:u}=r;if(n==null)n=null;else if(isArray(n))l=16;else if(typeof n=="object")if(u&65){const f=n.default;f&&(f._c&&(f._d=!1),normalizeChildren(r,f()),f._c&&(f._d=!0));return}else{l=32;const f=n._;!f&&!(InternalObjectKey in n)?n._ctx=currentRenderingInstance:f===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,r.patchFlag|=1024))}else isFunction(n)?(n={default:n,_ctx:currentRenderingInstance},l=32):(n=String(n),u&64?(l=16,n=[createTextVNode(n)]):l=8);r.children=n,r.shapeFlag|=l}function mergeProps(...r){const n={};for(let l=0;l<r.length;l++){const u=r[l];for(const f in u)if(f==="class")n.class!==u.class&&(n.class=normalizeClass([n.class,u.class]));else if(f==="style")n.style=normalizeStyle([n.style,u.style]);else if(isOn(f)){const v=n[f],x=u[f];x&&v!==x&&!(isArray(v)&&v.includes(x))&&(n[f]=v?[].concat(v,x):x)}else f!==""&&(n[f]=u[f])}return n}function invokeVNodeHook(r,n,l,u=null){callWithAsyncErrorHandling(r,n,7,[l,u])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(r,n,l){const u=r.type,f=(n?n.appContext:r.appContext)||emptyAppContext,v={uid:uid$2++,vnode:r,type:u,parent:n,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(f.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(u,f),emitsOptions:normalizeEmitsOptions(u,f),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:u.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return v.ctx={_:v},v.root=n?n.root:v,v.emit=emit.bind(null,v),r.ce&&r.ce(v),v}let currentInstance=null,internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(r=>currentInstance=r),internalSetCurrentInstance=r=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(n=>n(r)):globalCurrentInstanceSetters[0](r)};const setCurrentInstance=r=>{internalSetCurrentInstance(r),r.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,n=!1){isInSSRComponentSetup=n;const{props:l,children:u}=r.vnode,f=isStatefulComponent(r);initProps(r,l,f,n),initSlots(r,u);const v=f?setupStatefulComponent(r,n):void 0;return isInSSRComponentSetup=!1,v}function setupStatefulComponent(r,n){const l=r.type;r.accessCache=Object.create(null),r.proxy=markRaw(new Proxy(r.ctx,PublicInstanceProxyHandlers));const{setup:u}=l;if(u){const f=r.setupContext=u.length>1?createSetupContext(r):null;setCurrentInstance(r),pauseTracking();const v=callWithErrorHandling(u,r,0,[r.props,f]);if(resetTracking(),unsetCurrentInstance(),isPromise(v)){if(v.then(unsetCurrentInstance,unsetCurrentInstance),n)return v.then(x=>{handleSetupResult(r,x,n)}).catch(x=>{handleError(x,r,0)});r.asyncDep=v}else handleSetupResult(r,v,n)}else finishComponentSetup(r,n)}function handleSetupResult(r,n,l){isFunction(n)?r.type.__ssrInlineRender?r.ssrRender=n:r.render=n:isObject(n)&&(r.setupState=proxyRefs(n)),finishComponentSetup(r,l)}let compile;function finishComponentSetup(r,n,l){const u=r.type;if(!r.render){if(!n&&compile&&!u.render){const f=u.template||resolveMergedOptions(r).template;if(f){const{isCustomElement:v,compilerOptions:x}=r.appContext.config,{delimiters:k,compilerOptions:E}=u,R=extend(extend({isCustomElement:v,delimiters:k},x),E);u.render=compile(f,R)}}r.render=u.render||NOOP}setCurrentInstance(r),pauseTracking(),applyOptions(r),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(n,l){return track(r,"get","$attrs"),n[l]}}))}function createSetupContext(r){const n=l=>{r.exposed=l||{}};return{get attrs(){return getAttrsProxy(r)},slots:r.slots,emit:r.emit,expose:n}}function getExposeProxy(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(n,l){if(l in n)return n[l];if(l in publicPropertiesMap)return publicPropertiesMap[l](r)},has(n,l){return l in n||l in publicPropertiesMap}}))}function getComponentName(r,n=!0){return isFunction(r)?r.displayName||r.name:r.name||n&&r.__name}function isClassComponent(r){return isFunction(r)&&"__vccOpts"in r}const computed=(r,n)=>computed$1(r,n,isInSSRComponentSetup),ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,n,l)=>{n.insertBefore(r,l||null)},remove:r=>{const n=r.parentNode;n&&n.removeChild(r)},createElement:(r,n,l,u)=>{const f=n?doc.createElementNS(svgNS,r):doc.createElement(r,l?{is:l}:void 0);return r==="select"&&u&&u.multiple!=null&&f.setAttribute("multiple",u.multiple),f},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,n)=>{r.nodeValue=n},setElementText:(r,n)=>{r.textContent=n},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,n){r.setAttribute(n,"")},insertStaticContent(r,n,l,u,f,v){const x=l?l.previousSibling:n.lastChild;if(f&&(f===v||f.nextSibling))for(;n.insertBefore(f.cloneNode(!0),l),!(f===v||!(f=f.nextSibling)););else{templateContainer.innerHTML=u?`<svg>${r}</svg>`:r;const k=templateContainer.content;if(u){const E=k.firstChild;for(;E.firstChild;)k.appendChild(E.firstChild);k.removeChild(E)}n.insertBefore(k,l)}return[x?x.nextSibling:n.firstChild,l?l.previousSibling:n.lastChild]}};function patchClass(r,n,l){const u=r._vtc;u&&(n=(n?[n,...u]:[...u]).join(" ")),n==null?r.removeAttribute("class"):l?r.setAttribute("class",n):r.className=n}function patchStyle(r,n,l){const u=r.style,f=isString(l);if(l&&!f){if(n&&!isString(n))for(const v in n)l[v]==null&&setStyle(u,v,"");for(const v in l)setStyle(u,v,l[v])}else{const v=u.display;f?n!==l&&(u.cssText=l):n&&r.removeAttribute("style"),"_vod"in r&&(u.display=v)}}const importantRE=/\s*!important$/;function setStyle(r,n,l){if(isArray(l))l.forEach(u=>setStyle(r,n,u));else if(l==null&&(l=""),n.startsWith("--"))r.setProperty(n,l);else{const u=autoPrefix(r,n);importantRE.test(l)?r.setProperty(hyphenate(u),l.replace(importantRE,""),"important"):r[u]=l}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,n){const l=prefixCache[n];if(l)return l;let u=camelize(n);if(u!=="filter"&&u in r)return prefixCache[n]=u;u=capitalize(u);for(let f=0;f<prefixes.length;f++){const v=prefixes[f]+u;if(v in r)return prefixCache[n]=v}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,n,l,u,f){if(u&&n.startsWith("xlink:"))l==null?r.removeAttributeNS(xlinkNS,n.slice(6,n.length)):r.setAttributeNS(xlinkNS,n,l);else{const v=isSpecialBooleanAttr(n);l==null||v&&!includeBooleanAttr(l)?r.removeAttribute(n):r.setAttribute(n,v?"":l)}}function patchDOMProp(r,n,l,u,f,v,x){if(n==="innerHTML"||n==="textContent"){u&&x(u,f,v),r[n]=l??"";return}const k=r.tagName;if(n==="value"&&k!=="PROGRESS"&&!k.includes("-")){r._value=l;const R=k==="OPTION"?r.getAttribute("value"):r.value,z=l??"";R!==z&&(r.value=z),l==null&&r.removeAttribute(n);return}let E=!1;if(l===""||l==null){const R=typeof r[n];R==="boolean"?l=includeBooleanAttr(l):l==null&&R==="string"?(l="",E=!0):R==="number"&&(l=0,E=!0)}try{r[n]=l}catch{}E&&r.removeAttribute(n)}function addEventListener(r,n,l,u){r.addEventListener(n,l,u)}function removeEventListener(r,n,l,u){r.removeEventListener(n,l,u)}function patchEvent(r,n,l,u,f=null){const v=r._vei||(r._vei={}),x=v[n];if(u&&x)x.value=u;else{const[k,E]=parseName(n);if(u){const R=v[n]=createInvoker(u,f);addEventListener(r,k,R,E)}else x&&(removeEventListener(r,k,x,E),v[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let n;if(optionsModifierRE.test(r)){n={};let u;for(;u=r.match(optionsModifierRE);)r=r.slice(0,r.length-u[0].length),n[u[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),n]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,n){const l=u=>{if(!u._vts)u._vts=Date.now();else if(u._vts<=l.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(u,l.value),n,5,[u])};return l.value=r,l.attached=getNow(),l}function patchStopImmediatePropagation(r,n){if(isArray(n)){const l=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{l.call(r),r._stopped=!0},n.map(u=>f=>!f._stopped&&u&&u(f))}else return n}const nativeOnRE=/^on[a-z]/,patchProp=(r,n,l,u,f=!1,v,x,k,E)=>{n==="class"?patchClass(r,u,f):n==="style"?patchStyle(r,l,u):isOn(n)?isModelListener(n)||patchEvent(r,n,l,u,x):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(r,n,u,f))?patchDOMProp(r,n,u,v,x,k,E):(n==="true-value"?r._trueValue=u:n==="false-value"&&(r._falseValue=u),patchAttr(r,n,u,f))};function shouldSetAsProp(r,n,l,u){return u?!!(n==="innerHTML"||n==="textContent"||n in r&&nativeOnRE.test(n)&&isFunction(l)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&r.tagName==="INPUT"||n==="type"&&r.tagName==="TEXTAREA"||nativeOnRE.test(n)&&isString(l)?!1:n in r}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...r)=>{const n=ensureRenderer().createApp(...r),{mount:l}=n;return n.mount=u=>{const f=normalizeContainer(u);if(!f)return;const v=n._component;!isFunction(v)&&!v.render&&!v.template&&(v.template=f.innerHTML),f.innerHTML="";const x=l(f,!1,f instanceof SVGElement);return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),x},n};function normalizeContainer(r){return isString(r)?document.querySelector(r):r}class Cat{constructor(){ke(this,"Console",console.constructor());ke(this,"clones",{});ke(this,"logBackup",console.log);ke(this,"logMessages",[]);ke(this,"clear",console.clear);ke(this,"profile",console.profile);ke(this,"profileEnd",console.profileEnd);ke(this,"log",console.log);ke(this,"warn",console.warn);ke(this,"debug",console.debug);ke(this,"error",console.error);ke(this,"err",this.error);ke(this,"info",console.info);ke(this,"trace",console.trace);ke(this,"assert",console.assert);ke(this,"clr",console.clear);ke(this,"count",console.count);ke(this,"countReset",console.countReset);ke(this,"dir",console.dir);ke(this,"group",console.group);ke(this,"groupCollapsed",console.groupCollapsed);ke(this,"groupEnd",console.groupEnd);ke(this,"table",console.table);ke(this,"time",console.time);ke(this,"timeEnd",console.timeEnd);ke(this,"timeLog",console.timeLog);ke(this,"timeStamp",console.timeStamp);ke(this,"messages",[]);this.debug("9 | @ed::cat::log |   init cat"),Object.assign(console,this)}mergeConsole(n,l){var f,v;let u=(v=(f=console[n])==null?void 0:f.bind)==null?void 0:v.call(f,console,"%s");return Reflect.construct(console.constructor,l),u&&n!=="info"&&(l[n]=new Proxy(u,{apply:(x,k,E)=>{l.messages.push.apply(l.messages,[k,E]),Reflect.apply(x,k,E)}})),u}listLoggedMessages(){this.info(this.messages)}display(){}}const cat$1=new Cat;globalThis.cat=cat$1;var BlockTrait=(r=>(r[r.Children=1]="Children",r[r.Content=2]="Content",r[r.State=3]="State",r[r.Style=4]="Style",r[r.Attr=5]="Attr",r[r.Event=6]="Event",r[r.Workspace=7]="Workspace",r[r.Integration=8]="Integration",r))(BlockTrait||{});//! this is just so you wo
const tree={id:"paulroot",bid:"rude_layout",traits:[BlockTrait.Style,BlockTrait.Attr,BlockTrait.Children,BlockTrait.Event],style:{display:"flex"},event:{},children:[{id:"pad",name:"test bang",description:"pad",traits:[BlockTrait.State,BlockTrait.Style,BlockTrait.Attr,BlockTrait.Children,BlockTrait.Event],state:{value:""},style:{"--cmi-height":"500px","--cmi-width":"600px",display:"grid",gridTemplateRows:"25px 40px 1fr",griColumns:1,position:"absolute",height:"var(--cmi-height)",width:"var(--cmi-width)",zIndex:"15",top:"10%",left:"15%",backgroundColor:"rgba(26, 14, 10)"},event:{},children:[{id:"block_list",name:"blocklist",traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.Content],style:{color:"#fff",display:"grid",position:"absolute",alignItems:"center",gridAutoRows:"calc(4rem - 8px)",fontSize:"12px",padding:"4px",lineHeight:1,height:"100%",width:"4rem",top:0,left:"-4.3rem",backgroundColor:"#1e1b25"},children:[{id:"bb_item1",bid:"block_blueprint_item",traits:[BlockTrait.Style,BlockTrait.Event,BlockTrait.Content],content:"item1"}]},{id:"drag_hitbox",traits:[BlockTrait.Style,BlockTrait.Event,BlockTrait.Content],style:{color:"#fff",display:"flex",position:"relative",alignItems:"center",fontSize:"12px",padding:"0 10px",lineHeight:1,gridRow:1,gridColumn:1,height:"100%",width:"100%",borderBottom:"2px solid rgb(10,10,10,.6)",backgroundColor:"#1e1b25"},event:{pointerdown:["!ref:pad","style","!drag.{transform:translate3d($1,$2,0)"]},content:["!ref:pad","name"]},{id:"input_container",traits:[BlockTrait.Style,BlockTrait.Event,BlockTrait.Content,BlockTrait.Children],style:{display:"flex",color:"#fff",position:"relative",alignItems:"center",fontSize:"9px",padding:"0 10px",lineHeight:1,gridRow:2,gridColumn:1,gap:"12px",height:"100%",width:"100%",backgroundColor:"#1e1b25"},content:"name:",children:[{id:"nameinput",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Event,BlockTrait.State],state:{value:["!ref:pad","name","!sitter_parse"]},attr:{is:"input",value:["!ref:pad","name"]},style:{fontSize:"12px",padding:"2px 4px",width:"6rem"},event:{input:["!ref:pad",["!ref:block","runtime","el","!prop.{$input:value}"],"!set.{name:$input}"]}},{id:"target_block_id_input",name:"Set target",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Event,BlockTrait.State],state:{value:""},attr:{is:"input"},style:{fontSize:"12px",padding:"2px 4px",width:"6rem"},event:{input:["!ref","state",["!ref:block","runtime","el","!prop.{$input:value}"],"!set.{value:$input}"]}},{id:"load_blue",name:"load blue",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Event,BlockTrait.State,BlockTrait.Content],attr:{is:"button"},style:{fontSize:"12px",padding:"2px 4px",width:"6rem"},content:"load blue",event:{click:["!ref:sh","factory","blues",["!ref:target_block_id_input","state","value"],["!ref:cm2_code","!prop.{$runtime:runtime}"],"!load_blue"]}},{id:"save_block",name:"save block",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Event,BlockTrait.State,BlockTrait.Content],attr:{is:"button"},style:{fontSize:"12px",padding:"2px 4px",width:"6rem"},content:"save block",event:{click:["!ref:sh","refs",["!ref:target_block_id_input","state","value"],"!save_block"]}},{id:"savecanvas",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Event,BlockTrait.State,BlockTrait.Content],attr:{is:"button"},style:{fontSize:"12px",padding:"2px 4px",width:"6rem"},content:"save canvas",event:{click:["!ref:sh","workspaces","canvas","!save_canvas"]}},{id:"getmanifest",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Event,BlockTrait.State,BlockTrait.Content],attr:{is:"button"},style:{fontSize:"12px",padding:"2px 4px",width:"6rem"},content:"get manifest",event:{click:"!get_blocks"}}]},{id:"panel",name:"thing",traits:[BlockTrait.State,BlockTrait.Style,BlockTrait.Attr,BlockTrait.Children,BlockTrait.Event],state:{},style:{display:"grid",position:"relative",fontSize:"13px",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr",height:"100%",width:"100%",textAlign:"left",backgroundColor:"rgba(26, 4, 30)",overflow:"auto"},event:{},children:[{id:"cm2_code",name:"code block",description:"bang I use for tetstng",traits:[BlockTrait.State,BlockTrait.Style,BlockTrait.Attr,BlockTrait.Children,BlockTrait.Event],state:{cm_input:["!ref:pad","state","value"],codemirror:"!test"},style:{display:"block",position:"relative",fontSize:"13px",gridRow:1,gridColumn:1,minHeight:"100%",minWidth:"100%",maxHeight:"100%",maxWidth:"100%",textAlign:"left",backgroundColor:"rgba(26, 4, 30)"},event:{},children:[]},{id:"cm3_tree",name:"tree block",description:"bang I use for tetstng",traits:[BlockTrait.State,BlockTrait.Style,BlockTrait.Attr,BlockTrait.Children,BlockTrait.Event],state:{cm_input:["!ref:pad","state","value"],codemirror:"!test"},style:{display:"block",position:"relative",fontSize:"13px",gridRow:1,gridColumn:2,minHeight:"100%",minWidth:"100%",maxHeight:"100%",maxWidth:"100%",textAlign:"left",backgroundColor:"rgba(26, 4, 30)"},event:{},children:[]}]}]},{attr:{class:"svg-canvas-block"},id:"h9db1eSD",bid:"SVG_WRAPPER",traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.Attr],style:{"--canvas-height":"400px","--canvas-width":"400px",display:"block",position:"absolute",bottom:0,right:0,top:0,left:0,margin:"auto",textAlign:"center",height:"var(--canvas-height)",width:"var(--canvas-width)",padding:"7px",backgroundColor:"rgb(177, 203, 196)",zIndex:1},event:{pointerdown:["!ref","h9db1eSf","children","!start_draw_path"]},children:[{attr:{is:"svg",xmlns:"http://www.w3.org/2000/svg/",height:400,width:400},id:"h9db1eSf",bid:"SVG_PLANE",traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.Attr],style:{display:"block",position:"absolute",bottom:0,right:0,top:0,left:0,textAlign:"center",borderLeft:"2px solid grey",borderTop:"2px solid grey",zIndex:1},children:[{id:"svg_path_helpers1",state:{},attr:{is:"g"},style:{},traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.Attr,BlockTrait.State],children:[]}]}]},{attr:{},id:"PadContainer",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Children,BlockTrait.State,BlockTrait.Event,BlockTrait.Content],state:{},style:{alignItems:"start",outline:"none",padding:"7px",flexDirection:"column",textAlign:"left",fontSize:"14px",display:"flex",position:"absolute",top:"15px",left:"160px",height:"60%",width:"calc(80% - 100px)",borderRadius:"3px",backgroundColor:"rgb(27,27,27)"},children:[{id:"PadInput2",style:{stroke:"red","stroke-width":3,fill:"none",outline:"none",resize:"none",textAlign:"left",fontSize:"14px",height:"66px",width:"100%",borderRadius:"3px",backgroundColor:"blue",opacity:.2}},{bid:"rndm_clr_row"}]},{id:"h9db1e7d",bid:"cunter",traits:[BlockTrait.Style,BlockTrait.Content],style:{zIndex:1},event:{pointerdown:["!ref","style","!drag.{transform:translate3d($1,$2,0)"]}},{id:"h9db1e7r",bid:"cunter",traits:[BlockTrait.Style,BlockTrait.Content],state:{cunt:1},content:["!ref","state","cunt"],style:{top:"120px",backgroundColor:"green"},event:{pointerdown:["!ref","style","!drag.{transform:translate3d($1,$2,0)"]}},{id:"h9dkfd8r",bid:"paul_bo",traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.State,BlockTrait.Event,BlockTrait.Content],state:{idx:0,vec:[{idx:0}]},content:["!ref","state"],style:{backgroundColor:"#130f13",borderRadius:"4px"},event:{pointerdown:["!ref","state","!set_prop:vec"]},children:[{id:"h9db1e83",bid:"txtplus",traits:[BlockTrait.Style,BlockTrait.Content],style:{scale:1,top:"-80px",transition:"scale .24s ease"},event:{click:["!ref:h9db1e7r","!inc:content"],pointerenter:["!ref","style","!set_prop.{scale:1.5}"],pointerleave:["!ref","style","!set_prop.{scale:1}"]}}]}]},blueprints2={rude_layout:{bid:"rude_layout",name:"root wrapper",traits:[BlockTrait.Style,BlockTrait.Children],style:{display:"block",position:"absolute",textAlign:"center",height:"100%",width:"100%",backgroundColor:"#242424"},children:[]},rndm_clr_row:{bid:"rndm_clr_row",style:{display:"block",margin:"4px 0",height:"66px",width:"100%",borderRadius:"3px",backgroundColor:"rgb(0,0,0)"},content:"!rndm_clr"},paul_bo:{bid:"paul_bo",name:"walker",traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.State,BlockTrait.Event,BlockTrait.Content],state:{idx:0,vec:[]},content:"",event:{},style:{display:"flex",position:"absolute",textAlign:"center",bottom:"20px",left:"30px",height:"100px",width:"180px",backgroundColor:"green",id:"svg!!!"},children:[]},txtplus:{bid:"txtplus",name:"add",description:"",traits:[BlockTrait.Style,BlockTrait.Content],content:"+",style:{lineHeight:"64px",fontSize:"40px",color:"#fff",display:"block",position:"absolute",right:0,left:"25px",margin:"0 auto",height:"66px",width:"66px",backgroundColor:"#700",borderRadius:"10rem",cursor:"pointer",userSelect:"none"}},blue_cunter:{bid:"large_cunter",style:{backgroundColor:"blue"}},cunter:{extends:["large_cunter"],bid:"cunter",name:"cunting",description:"",traits:[BlockTrait.Style,BlockTrait.Content],content:0,event:{},style:{lineHeight:"64px",fontSize:"40px",color:"#fff",display:"block",position:"absolute",top:"20px",left:"20px",height:"66px",width:"66px",backgroundColor:"#f30",borderRadius:"3px",cursor:"pointer",userSelect:"none"}},2:{bid:"2",name:"walker step",description:"",traits:[BlockTrait.Style,BlockTrait.Content],content:0,style:{color:"#000",display:"block",position:"relative",height:"65px",width:"65px",backgroundColor:"#700"}}};//! we should adjust the pattern if need be
const blueprints={base:{id:"base",bid:"base",traits:[],name:"base_block"},container:{id:"container",bid:"container",traits:[BlockTrait.Children,BlockTrait.Style],name:"container block",style:{display:"block",position:"relative",height:"100%",width:"100%",backgroundColor:"#37363b"},children:[]},workspace:{id:"workspace",bid:"workspace",name:"workspace_root",traits:[BlockTrait.Attr,BlockTrait.Style,BlockTrait.Workspace],attr:{is:"section",name:"workspace"},viewport:{height:100,height_unit:"%",width:100,width_unit:"%",x:0,y:0},style:{display:"grid",position:"absolute",grid:"1fr/1fr",placeItems:"center",height:"100%",width:"100%",contain:"content"},root:null}},mergeBlues=(r,n)=>{Object.values(n).forEach(l=>{var u;l.extends||(r[l.bid]=l),Array.isArray(l.extends)&&((u=l.extends)==null||u.forEach(f=>{Object.entries(r[f]).forEach(([v,x])=>{v!=="bid"&&l[v]&&Object.assign(l[v],x)})})),r[l.bid]=l})};mergeBlues(blueprints,blueprints2);function deepClone(r,n){if(r===null||typeof r!="object")return r;if(n??(n=new WeakMap),n.has(r))return n.get(r);let l=Array.isArray(r)?[]:{};n.set(r,l);for(let u in r)Object.prototype.hasOwnProperty.call(r,u)&&(typeof r[u]=="object"&&r[u]!==null?l[u]=deepClone(r[u],n):l[u]=r[u]);return l}class BlockFactory{constructor(n){ke(this,"blues");this.blues=n}build(n){let l=this.blues[n.bid],u={bid:n.bid,traits:deepClone(l.traits)};return n.id&&(u.id=n.id),n.root&&(u.root=n.root),n.overrides,sh.hug(reactive(u))}make(n){return sh.hug(n)}TEMP_dotree(){return sh.hug(tree)}}const factory=new BlockFactory(blueprints);function parseOp(r,n,l){let u=n,f={};const v=(x,k,E=[])=>{var R,z;for(let F of x){if(typeof F=="string"){if(/^\!(ref|ctx)/.test(F)){let Z=F.split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2)[1];u=sh.bang["!ctx"](u,n,l,Z),k=u;continue}if(F[0]==="!"){let[Z,j]=F.split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)","g"),2);k=(z=(R=sh.bang)[Z])==null?void 0:z.call(R,k,{key:j,bang_name:Z,props:f,ctx:{current:u,cmp:l,block:n}});continue}}if(Array.isArray(F)){let Z=v(F,k);if(typeof k=="function"){k(Z,f);continue}k=k[Z]??k;continue}if(!k)break;(k==null?void 0:k[F])!==void 0&&(k=k[F])}return k};return v(r,u)}class DependancyChecker{constructor(n,l,u){ke(this,"map",new Map);l.forEach(f=>{})}add(n,l){return cat$1.debug("72 | @ed::Controller |   depc -","added",n,l),this.map.set(n,l)}remove(n,l){cat$1.debug("77 | @ed::Controller |   depc -","removed",n,l),this.map.delete(n)}}class SuperHugger{constructor({app_state:n,uid:l,editor_state:u,editorEvent:f,factory:v,bang:x,options:k,layers:E,workspaces:R}){ke(this,"ref",(n,l,u)=>parseOp(n,l,u));ke(this,"cat",cat$1);ke(this,"runtime",{op_refs:{}});ke(this,"components",{});ke(this,"refs",{});ke(this,"blues",{});ke(this,"app_state");ke(this,"uid");ke(this,"editor_state");ke(this,"editorEvent");ke(this,"factory");ke(this,"method",{});ke(this,"bang",{});ke(this,"layers");ke(this,"workspaces");ke(this,"hugger_options");ke(this,"assert",{isOpVec:n=>!!(Array.isArray(n)&&n[0][0]==="!")});ke(this,"dependencyChecker");this.app_state=n,this.uid=l,this.editor_state=u,this.editorEvent=f,this.factory=v,this.bang=x,this.workspaces=R,this.layers=E,this.hugger_options={root_context:this,...k??{}},this.dependencyChecker=new DependancyChecker({},[],this)}hug(n="",l=n){if(n.sqiid)return n.runtime.ctx=l,n;cat$1.debug("O()O -","!HUGGED: block",n,n.id,typeof n);const u=hugger(n,{sh:this,onDestruct:[()=>this.delete(u.sqiid)],ctx:l});return this.components[u.sqiid]=u,u.runtime.ctx=l,u.id&&!this.refs[u.id]&&(this.refs[u.id]=u),u.traits.has(BlockTrait.Children)&&(u.runtime.children=computed(()=>{var v;return(v=u.children)==null?void 0:v.reduce((x,k)=>{var R,z;if(Array.isArray(k)){if(cat$1.debug("[ 235 | @ed::Controller ]  ",k),/^\!(ref|ctx)/.test(k[0].toString())){let F=this.ref(k,l,u);return x.push(F),x}u.sqiid}if(/^\!/.test(k[0])&&this.ref(k,l,u),k[0]==="!"){let[F,Z]=k.split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2);return x.push((z=(R=this.bang)[F])==null?void 0:z.call(R,u,Z)),x}let E=this.hug(k,l);return x.push(E),x},[])})),u.traits.forEach(f=>{f===BlockTrait.Workspace&&u.root&&(u.root=this.hug(u.root))}),this.dependencyChecker.add(u.sqiid,u),u}delete(n){delete this.components[n]}}const hugger=(r,n)=>(Object.assign(r,reactive(r)),r.traits=new Set(r.traits),Object.defineProperties(r,{sh:{value:n.sh},sqiid:{value:n.sh.uid.sqiid()},runtime:{value:reactive({content:computed(()=>n.sh.assert.isOpVec(r.content)?n.sh.ref(r.content,r,n.ctx):r.content),el:void 0}),writable:!0},destruct:{value:()=>{const l=u=>{var f;return(f=u.children)==null?void 0:f.forEach(v=>(l(v),v.destruct&&v.destruct()))};l(r)}}}),r),timingUtilityOptionDefaults={timeout:0},UseDebounce=(function(r,n,l=timingUtilityOptionDefaults){let{timeout:u,onstop:f,name:v,where:x}=l,k,E=0,R=UseDefer(r,()=>E+=r,{timeout:u,name:v+"#db_df"});const z=(function(F){clearTimeout(k);//!! this can be better typed and looped without explicit conditions
return this.up&&(R.update(this.up),Object.keys(this.up).forEach(Z=>{let j=this.up[Z];if(j!==void 0)switch(Z){case"time":return r=j;case"callback":return n=j;case"callbackArgs":return n=fe=>n(fe,...j);case"onstop":return f=j;case"onstopArgs":return f&&(f=fe=>f(fe,...j));case"timeout":return u=j;default:return}}),delete this.up),F!==void 0||u&&E>=u?(R(!1),f&&f(),F!==!1&&n(),k):(R(),k=setTimeout(()=>{n()},r),k)}).bind(this);return z.update=(function(F){console.log("direct_update",this),this.up=F}).bind(this),z}).bind({}),UseDefer=(function(r,n,l=timingUtilityOptionDefaults){let{timeout:u,onstop:f,name:v,where:x}=l,k=!1,E,R=0;const z=(function(F){//!! this can be better typed and looped without explicit conditions
return this.up&&(Object.keys(this.up).forEach(Z=>{let j=this.up[Z];if(j===void 0)return;let fe;switch(Z){case"callbackArgs":return fe=J=>fe(J,...j);case"onstop":return j}switch(Z){case"time":return r=j;case"callback":return fe=j;case"onstop":return j;case"timeout":return u=j;default:return}}),delete this.up),F!==void 0||u&&R>=u?(R+=r,k=!1,clearTimeout(E),f&&f(),F!==!1&&n(),E):(k||(k=!0,E=setTimeout(()=>{k=!1,R+=r,n()},r)),E)}).bind(this);return z.update=(function(F){this.up=F}).bind(this),z}).bind({});class Emittable{constructor(){ke(this,"events",{});ke(this,"listeners",{});ke(this,"singleton_listeners",{});ke(this,"mod_listener_regexp",/(context:(?<ctxid>[\w\d]+))|(?<modtype>read|write|delete)/g)}register(n,l){this.events[n]||(this.listeners[n]?this.listeners[n].clear():this.listeners[n]=new Map),this.events[n]=l}add(n,l,u){var v,x;if((v=this.listeners[n])!=null&&v.has(l))return;let f={};if(u&&(f=u,u.debounce&&(f.debounce_timer=UseDebounce(u.debounce,l)),u.defer&&(f.defer_timer=UseDefer(u.defer,l)),u.context)){this.singleton_listeners[u.context]={fn:l,ready_options:f};return}(x=this.listeners[n])==null||x.set(l,f)}remove(n,l){var f;let u=this.mod_listener_regexp.exec(n);if((f=u==null?void 0:u.groups)!=null&&f.ctxid){delete this.singleton_listeners[u.groups.ctxid];return}this.listeners[n].has(l)&&this.listeners[n].delete(l)}emit(n,...l){var E,R,z;let[u,f]=n.split("["),v;if(f){let F=this.mod_listener_regexp.exec(f);if((E=F==null?void 0:F.groups)!=null&&E.modtype,(R=F==null?void 0:F.groups)!=null&&R.ctxid){let Z=this.singleton_listeners[F.groups.ctxid];if((z=F==null?void 0:F.groups)!=null&&z.modtype)return Z.fn(...l)}}let x=this.events[u];if(!x){console.warn(`Event ${String(u)} does not exist`);return}let k=this.listeners[u];cat$1.warn("Event"),v=x(...l),cat$1.warn(" 136 | {_} @ed::Event |  "),cat$1.debug("137 | @ed::Event |   yello"),k.forEach(({once:F,mute:Z,defer:j,defer_timer:fe,debounce:J,debounce_timer:ge},xe)=>{if(!Z){if(F)return xe(v),this.remove(u,xe);if(J&&ge)return ge.update({callbackArgs:v}),ge();if(j&&fe)return fe.update({callbackArgs:v}),fe();xe(v)}})}}class UsePointer{constructor(){ke(this,"start",{x:0,y:0});ke(this,"options",{keep:!1});ke(this,"target",null);ke(this,"subscribers",{down:[],move:[],up:[],keep_down:[],keep_move:[],keep_up:[]});ke(this,"handleDown",n=>{this.target=n.target,this.start={x:~~n.x,y:~~n.y},window.addEventListener("pointermove",this.handleMove),window.addEventListener("pointerup",this.handleStop,{once:!0}),window.addEventListener("pointercancel",this.handleStop,{once:!0})});ke(this,"handleMove",n=>{const l={x:~~n.x,y:~~n.y,start:this.start,target:this.target};l.offset={x:l.x-this.start.x,y:l.y-this.start.y},this.subscribers.move.forEach(u=>u(l,n))});ke(this,"handleStop",n=>{window.removeEventListener("pointermove",this.handleMove);const l={x:~~n.x,y:~~n.y,start:this.start,target:this.target};l.offset={x:l.x-this.start.x,y:l.y-this.start.y},this.subscribers.up.forEach(u=>u(l,n)),this.target=null,this.start={x:0,y:0},this.subscribers.down=[],this.subscribers.move=[],this.subscribers.up=[]});this.init()}init(){window.removeEventListener("pointerdown",this.handleDown),window.addEventListener("pointerdown",this.handleDown)}down(n,l){l!=null&&l.keep?this.subscribers.keep_down.push(n):this.subscribers.down.push(n)}move(n,l){l!=null&&l.keep?this.subscribers.keep_move.push(n):this.subscribers.move.push(n)}up(n,l){l!=null&&l.keep?this.subscribers.keep_up.push(n):this.subscribers.up.push(n)}}const json_replacers={arrayFromSet(r,n){return n&&n instanceof Set?Array.from(n):n}},text_replacers={regex(r,n,l=""){return n.replace(r,l)}};class Fido{constructor(n){ke(this,"base");ke(this,"defaultHeaders",{host:"","content-Type":"application/json",accept:'"/"',connection:"keep-alive"});ke(this,"json_replacers",json_replacers);ke(this,"text_replacers",text_replacers);ke(this,"tryParseAndBuildUrl");"canParse"in URL?this.tryParseAndBuildUrl=this.tryCanParseURL:"constructor"in URL?this.tryParseAndBuildUrl=this.tryParseURLWithCatch:this.tryParseAndBuildUrl=this.tryParseWithStringBuilder;let l=this.tryParseAndBuildUrl("/",void 0,n.base);if(!l)throw new Error("Invalid base URL passed to Fido during construction");this.defaultHeaders.host=typeof l=="string"?l:l.host,this.base=l}tryCanParseURL(n,l={},u=this.base){let f=URL.canParse(n,u.toString())?new URL(n,u):null;if(!f){cat.err(" 135 | @ed::Fido ]  tryCanParseURL  err :: aborting -- supplied args:",{endpoint:n,query:l,base:u});return}return this.buildQueryUrl(f,l)}tryParseURLWithCatch(n,l={},u=this.base){let f=null;try{f=new URL(n,u)}catch{cat.err(" 146 | @ed::Fido ]  tryParseURLWithCatch  err :: aborting -- supplied args:",{endpoint:n,query:l,base:u});return}return this.buildQueryUrl(f,l)}tryParseWithStringBuilder(n,l={},u=this.base){let f=`${u}${n}`+this.buildQuery(l);if(!f){cat.err(" 161 | @ed::Fido ]  tryParseWithStringBuilder  err :: aborting -- supplied args:",{endpoint:n,query:l,base:u});return}return f}buildQueryUrl(n,l){return Object.entries(l).forEach(([u,f])=>{n.searchParams.append(u,String(f))}),n}buildQuery(n={}){return Object.entries(n),Object.entries(n).reduce((l,[u,f],v,x)=>f?`${l}${v?"&":"?"}${u}=${encodeURIComponent(String(f))}`:l,"")}async get(n,l={},{base:u,payload_type:f,replacer:v}={}){let x=this.tryParseAndBuildUrl(n,l,u);return x?fetch(x,{method:"GET",headers:this.defaultHeaders}).then(async k=>await k.json()).catch(k=>k):`invalid url in api.POST request - ep: ${n}, base: ${this.base}, query: ${JSON.stringify(l)}`}async post(n,l,u={},{base:f,payload_type:v,replacer:x}={}){v??(v="json");let k=this.tryParseAndBuildUrl(n,u,f);return k?(x=typeof x=="string"?v==="json"?json_replacers[x]:text_replacers[x]:typeof x=="function"?x:void 0,fetch(k,{method:"POST",headers:this.defaultHeaders,body:v==="json"?JSON.stringify(l,x):typeof x=="function"?x(l):l}).then(async E=>await E.json()).catch(E=>E)):`invalid url in api.POST request - ep: ${n}, base: ${this.base}, query: ${JSON.stringify(u)}`}}var ko,nl,Mo,il,zi,Vi;class MakeUID{constructor(){Ui(this,ko);Ui(this,Mo);Ui(this,zi,0);Ui(this,Vi,1);_s(this,ko,nl).call(this)}hash(){return(Date.now()+ ++ys(this,zi)._*8).toString(32).slice(-8)}sqiid(){return++ys(this,Vi)._}uuid4(){return"GUID_NOT_IMPLEMENTED"}}ko=new WeakSet,nl=function(){_s(this,Mo,il).call(this)},Mo=new WeakSet,il=function(){So(this,Vi,0),So(this,zi,0)},zi=new WeakMap,Vi=new WeakMap;(function(r,n){typeof exports=="object"&&typeof module<"u"?module.exports=n():typeof define=="function"&&define.amd?define(n):(r=r||self).CodeMirror=n()})(globalThis,function(){var r=navigator.userAgent,n=navigator.platform,l=/gecko\/\d/i.test(r),u=/MSIE \d/.test(r),f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),v=/Edge\/(\d+)/.exec(r),x=u||f||v,k=x&&(u?document.documentMode||6:+(v||f)[1]),E=!v&&/WebKit\//.test(r),R=E&&/Qt\/\d+\.\d+/.test(r),z=!v&&/Chrome\//.test(r),F=/Opera\//.test(r),Z=/Apple Computer/.test(navigator.vendor),j=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),fe=/PhantomJS/.test(r),J=!v&&/AppleWebKit/.test(r)&&/Mobile\/\w+/.test(r),ge=/Android/.test(r),xe=J||ge||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),re=J||/Mac/.test(n),Ae=/\bCrOS\b/.test(r),Ce=/win/i.test(n),nt=F&&r.match(/Version\/(\d*\.\d*)/);(nt=nt&&Number(nt[1]))&&15<=nt&&(E=!(F=!1));var Xe=re&&(R||F&&(nt==null||nt<12.11)),mt=l||x&&9<=k;function yt(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Ut,Mt=function(e,t){var i=e.className,o=yt(t).exec(i);if(o){var a=i.slice(o.index+o[0].length);e.className=i.slice(0,o.index)+(a?o[1]+a:"")}};function wt(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function at(e,t){return wt(e).appendChild(t)}function _e(e,t,i,o){var a=document.createElement(e);if(i&&(a.className=i),o&&(a.style.cssText=o),typeof t=="string")a.appendChild(document.createTextNode(t));else if(t)for(var c=0;c<t.length;++c)a.appendChild(t[c]);return a}function Jt(e,t,i,o){var a=_e(e,t,i,o);return a.setAttribute("role","presentation"),a}function It(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function Qe(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function Ke(e,t){var i=e.className;yt(t).test(i)||(e.className+=(i?" ":"")+t)}function ot(e,t){for(var i=e.split(" "),o=0;o<i.length;o++)i[o]&&!yt(i[o]).test(t)&&(t+=" "+i[o]);return t}Ut=document.createRange?function(e,t,i,o){var a=document.createRange();return a.setEnd(o||e,i),a.setStart(e,t),a}:function(e,t,i){var o=document.body.createTextRange();try{o.moveToElementText(e.parentNode)}catch{return o}return o.collapse(!0),o.moveEnd("character",i),o.moveStart("character",t),o};var jt=function(e){e.select()};function Pt(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ot(e,t,i){for(var o in t=t||{},e)!e.hasOwnProperty(o)||i===!1&&t.hasOwnProperty(o)||(t[o]=e[o]);return t}function vt(e,t,i,o,a){t==null&&(t=e.search(/[^\s\u00a0]/))==-1&&(t=e.length);for(var c=o||0,g=a||0;;){var _=e.indexOf("	",c);if(_<0||t<=_)return g+(t-c);g+=_-c,g+=i-g%i,c=_+1}}J?jt=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:x&&(jt=function(e){try{e.select()}catch{}});var Ft=function(){this.id=null,this.f=null,this.time=0,this.handler=Pt(this.onTimeout,this)};function Et(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}Ft.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-new Date)},Ft.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};var Qr=30,Kt={toString:function(){return"CodeMirror.Pass"}},Rt={scroll:!1},ye={origin:"*mouse"},tr={origin:"+move"};function fr(e,t,i){for(var o=0,a=0;;){var c=e.indexOf("	",o);c==-1&&(c=e.length);var g=c-o;if(c==e.length||t<=a+g)return o+Math.min(g,t-a);if(a+=c-o,o=c+1,t<=(a+=i-a%i))return o}}var Mr=[""];function L(e){for(;Mr.length<=e;)Mr.push(N(Mr)+" ");return Mr[e]}function N(e){return e[e.length-1]}function $(e,t){for(var i=[],o=0;o<e.length;o++)i[o]=t(e[o],o);return i}function ie(){}function ne(e,t){var i;return i=Object.create?Object.create(e):(ie.prototype=e,new ie),t&&Ot(t,i),i}var de=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function he(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||de.test(e))}function ae(e,t){return t?!!(-1<t.source.indexOf("\\w")&&he(e))||t.test(e):he(e)}function pe(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return;return 1}var le=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ie(e){return 768<=e.charCodeAt(0)&&le.test(e)}function Se(e,t,i){for(;(i<0?0<t:t<e.length)&&Ie(e.charAt(t));)t+=i;return t}function Me(e,t,i){for(var o=i<t?-1:1;;){if(t==i)return t;var a=(t+i)/2,c=o<0?Math.ceil(a):Math.floor(a);if(c==t)return e(c)?t:i;e(c)?i=c:t=c+o}}var De=null;function Le(e,t,i){var o;De=null;for(var a=0;a<e.length;++a){var c=e[a];if(c.from<t&&c.to>t)return a;c.to==t&&(c.from!=c.to&&i=="before"?o=a:De=a),c.from==t&&(c.from!=c.to&&i!="before"?o=a:De=a)}return o??De}var it,je,_t,$t,mr,Nr,st,sr=(it="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",je="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",_t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,$t=/[stwN]/,mr=/[LRr]/,Nr=/[Lb1n]/,st=/[1n]/,function(e,t){var i=t=="ltr"?"L":"R";if(e.length==0||t=="ltr"&&!_t.test(e))return!1;for(var o,a=e.length,c=[],g=0;g<a;++g)c.push((o=e.charCodeAt(g))<=247?it.charAt(o):1424<=o&&o<=1524?"R":1536<=o&&o<=1785?je.charAt(o-1536):1774<=o&&o<=2220?"r":8192<=o&&o<=8203?"w":o==8204?"b":"L");for(var _=0,S=i;_<a;++_){var w=c[_];w=="m"?c[_]=S:S=w}for(var O=0,T=i;O<a;++O){var H=c[O];H=="1"&&T=="r"?c[O]="n":mr.test(H)&&(T=H)=="r"&&(c[O]="R")}for(var V=1,W=c[0];V<a-1;++V){var D=c[V];D=="+"&&W=="1"&&c[V+1]=="1"?c[V]="1":D!=","||W!=c[V+1]||W!="1"&&W!="n"||(c[V]=W),W=D}for(var P=0;P<a;++P){var G=c[P];if(G==",")c[P]="N";else if(G=="%"){var q=void 0;for(q=P+1;q<a&&c[q]=="%";++q);for(var X=P&&c[P-1]=="!"||q<a&&c[q]=="1"?"1":"N",ee=P;ee<q;++ee)c[ee]=X;P=q-1}}for(var Y=0,se=i;Y<a;++Y){var me=c[Y];se=="L"&&me=="1"?c[Y]="L":mr.test(me)&&(se=me)}for(var we=0;we<a;++we)if($t.test(c[we])){var ve=void 0;for(ve=we+1;ve<a&&$t.test(c[ve]);++ve);for(var Oe=(we?c[we-1]:i)=="L",Je=Oe==((ve<a?c[ve]:i)=="L")?Oe?"L":"R":i,tt=we;tt<ve;++tt)c[tt]=Je;we=ve-1}for(var Ne,He=[],Te=0;Te<a;)if(Nr.test(c[Te])){var ft=Te;for(++Te;Te<a&&Nr.test(c[Te]);++Te);He.push(new qe(0,ft,Te))}else{var $e=Te,Re=He.length,We=t=="rtl"?1:0;for(++Te;Te<a&&c[Te]!="L";++Te);for(var rt=$e;rt<Te;)if(st.test(c[rt])){$e<rt&&(He.splice(Re,0,new qe(1,$e,rt)),Re+=We);var Wt=rt;for(++rt;rt<Te&&st.test(c[rt]);++rt);He.splice(Re,0,new qe(2,Wt,rt)),Re+=We,$e=rt}else++rt;$e<Te&&He.splice(Re,0,new qe(1,$e,Te))}return t=="ltr"&&(He[0].level==1&&(Ne=e.match(/^\s+/))&&(He[0].from=Ne[0].length,He.unshift(new qe(0,0,Ne[0].length))),N(He).level==1&&(Ne=e.match(/\s+$/))&&(N(He).to-=Ne[0].length,He.push(new qe(0,a-Ne[0].length,a)))),t=="rtl"?He.reverse():He});function qe(e,t,i){this.level=e,this.from=t,this.to=i}function lt(e,t){var i=e.order;return i==null&&(i=e.order=sr(e.text,t)),i}var dr=[],Be=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var o=e._handlers||(e._handlers={});o[t]=(o[t]||dr).concat(i)}};function xt(e,t){return e._handlers&&e._handlers[t]||dr}function qt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var o=e._handlers,a=o&&o[t];if(a){var c=Et(a,i);-1<c&&(o[t]=a.slice(0,c).concat(a.slice(c+1)))}}}function Ct(e,t){var i=xt(e,t);if(i.length)for(var o=Array.prototype.slice.call(arguments,2),a=0;a<i.length;++a)i[a].apply(null,o)}function Tt(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ct(e,i||t.type,e,t),Gn(t)||t.codemirrorIgnore}function $n(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),o=0;o<t.length;++o)Et(i,t[o])==-1&&i.push(t[o])}function rr(e,t){return 0<xt(e,t).length}function Br(e){e.prototype.on=function(t,i){Be(this,t,i)},e.prototype.off=function(t,i){qt(this,t,i)}}function Gt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function qn(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Gn(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function vr(e){Gt(e),qn(e)}function en(e){return e.target||e.srcElement}function ji(e){var t=e.which;return t==null&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),re&&e.ctrlKey&&t==1&&(t=3),t}var ar,Zn,Eo=function(){if(x&&k<9)return!1;var e=_e("div");return"draggable"in e||"dragDrop"in e}();function yr(e){if(ar==null){var t=_e("span","");at(e,_e("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(ar=t.offsetWidth<=1&&2<t.offsetHeight&&!(x&&k<8))}var i=ar?_e("span",""):_e("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function pn(e){if(Zn!=null)return Zn;var t=at(e,document.createTextNode("AA")),i=Ut(t,0,1).getBoundingClientRect(),o=Ut(t,1,2).getBoundingClientRect();return wt(e),i&&i.left!=i.right&&(Zn=o.right-i.right<3)}var gn,mn=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],o=e.length;t<=o;){var a=e.indexOf(`
`,t);a==-1&&(a=e.length);var c=e.slice(t,e.charAt(a-1)=="\r"?a-1:a),g=c.indexOf("\r");g!=-1?(i.push(c.slice(0,g)),t+=g+1):(i.push(c),t=a+1)}return i}:function(e){return e.split(/\r\n?|\n/)},To=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!(!t||t.parentElement()!=e)&&t.compareEndPoints("StartToEnd",t)!=0},Ki="oncopy"in(gn=_e("div"))||(gn.setAttribute("oncopy","return;"),typeof gn.oncopy=="function"),Yn=null,Jn={},Hr={};function Dr(e){if(typeof e=="string"&&Hr.hasOwnProperty(e))e=Hr[e];else if(e&&typeof e.name=="string"&&Hr.hasOwnProperty(e.name)){var t=Hr[e.name];typeof t=="string"&&(t={name:t}),(e=ne(t,e)).name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Dr("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Dr("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function Xn(e,t){t=Dr(t);var i=Jn[t.name];if(!i)return Xn(e,"text/plain");var o=i(e,t);if(Xt.hasOwnProperty(t.name)){var a=Xt[t.name];for(var c in a)a.hasOwnProperty(c)&&(o.hasOwnProperty(c)&&(o["_"+c]=o[c]),o[c]=a[c])}if(o.name=t.name,t.helperType&&(o.helperType=t.helperType),t.modeProps)for(var g in t.modeProps)o[g]=t.modeProps[g];return o}var Xt={};function Ao(e,t){Ot(t,Xt.hasOwnProperty(e)?Xt[e]:Xt[e]={})}function Er(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var o in t){var a=t[o];a instanceof Array&&(a=a.concat([])),i[o]=a}return i}function Qn(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function $i(e,t,i){return!e.startState||e.startState(t,i)}var St=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};function Ee(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var o=0;;++o){var a=i.children[o],c=a.chunkSize();if(t<c){i=a;break}t-=c}return i.lines[t]}function Zt(e,t,i){var o=[],a=t.line;return e.iter(t.line,i.line+1,function(c){var g=c.text;a==i.line&&(g=g.slice(0,i.ch)),a==t.line&&(g=g.slice(t.ch)),o.push(g),++a}),o}function ei(e,t,i){var o=[];return e.iter(t,i,function(a){o.push(a.text)}),o}function _r(e,t){var i=t-e.height;if(i)for(var o=e;o;o=o.parent)o.height+=i}function ut(e){if(e.parent==null)return null;for(var t=e.parent,i=Et(t.lines,e),o=t.parent;o;o=(t=o).parent)for(var a=0;o.children[a]!=t;++a)i+=o.children[a].chunkSize();return i+t.first}function Tr(e,t){var i=e.first;e:do{for(var o=0;o<e.children.length;++o){var a=e.children[o],c=a.height;if(t<c){e=a;continue e}t-=c,i+=a.chunkSize()}return i}while(!e.lines);for(var g=0;g<e.lines.length;++g){var _=e.lines[g].height;if(t<_)break;t-=_}return i+g}function Wr(e,t){return t>=e.first&&t<e.first+e.size}function ti(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function oe(e,t,i){if(i===void 0&&(i=null),!(this instanceof oe))return new oe(e,t,i);this.line=e,this.ch=t,this.sticky=i}function ze(e,t){return e.line-t.line||e.ch-t.ch}function vn(e,t){return e.sticky==t.sticky&&ze(e,t)==0}function ri(e){return oe(e.line,e.ch)}function yn(e,t){return ze(e,t)<0?t:e}function dt(e,t){return ze(e,t)<0?e:t}function qi(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ve(e,t){if(t.line<e.first)return oe(e.first,0);var i,o,a,c=e.first+e.size-1;return t.line>c?oe(c,Ee(e,c).text.length):(o=Ee(e,(i=t).line).text.length,(a=i.ch)==null||o<a?oe(i.line,o):a<0?oe(i.line,0):i)}function tn(e,t){for(var i=[],o=0;o<t.length;o++)i[o]=Ve(e,t[o]);return i}St.prototype.eol=function(){return this.pos>=this.string.length},St.prototype.sol=function(){return this.pos==this.lineStart},St.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},St.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},St.prototype.eat=function(e){var t=this.string.charAt(this.pos);if(typeof e=="string"?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},St.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},St.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},St.prototype.skipToEnd=function(){this.pos=this.string.length},St.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},St.prototype.backUp=function(e){this.pos-=e},St.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=vt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?vt(this.string,this.lineStart,this.tabSize):0)},St.prototype.indentation=function(){return vt(this.string,null,this.tabSize)-(this.lineStart?vt(this.string,this.lineStart,this.tabSize):0)},St.prototype.match=function(e,t,i){if(typeof e!="string"){var o=this.string.slice(this.pos).match(e);return o&&0<o.index?null:(o&&t!==!1&&(this.pos+=o[0].length),o)}function a(c){return i?c.toLowerCase():c}if(a(this.string.substr(this.pos,e.length))==a(e))return t!==!1&&(this.pos+=e.length),!0},St.prototype.current=function(){return this.string.slice(this.start,this.pos)},St.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},St.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},St.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var _n=function(e,t){this.state=e,this.lookAhead=t},Qt=function(e,t,i,o){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};function Gi(e,t,i,o){var a=[e.state.modeGen],c={};ai(e,t.text,e.doc.mode,i,function(w,O){return a.push(w,O)},c,o);for(var g=i.state,_=function(w){i.baseTokens=a;var O=e.state.overlays[w],T=1,H=0;i.state=!0,ai(e,t.text,O.mode,i,function(V,W){for(var D=T;H<V;){var P=a[T];V<P&&a.splice(T,1,V,a[T+1],P),T+=2,H=Math.min(V,P)}if(W)if(O.opaque)a.splice(D,T-D,V,"overlay "+W),T=D+2;else for(;D<T;D+=2){var G=a[D+1];a[D+1]=(G?G+" ":"")+"overlay "+W}},c),i.state=g,i.baseTokens=null,i.baseTokenPos=1},S=0;S<e.state.overlays.length;++S)_(S);return{styles:a,classes:c.bgClass||c.textClass?c:null}}function ni(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var o=Ur(e,ut(t)),a=t.text.length>e.options.maxHighlightLength&&Er(e.doc.mode,o.state),c=Gi(e,t,o);a&&(o.state=a),t.stateAfter=o.save(!a),t.styles=c.styles,c.classes?t.styleClasses=c.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ur(e,t,i){var o=e.doc,a=e.display;if(!o.mode.startState)return new Qt(o,!0,t);var c=function(S,w,O){for(var T,H,V=S.doc,W=O?-1:w-(S.doc.mode.innerMode?1e3:100),D=w;W<D;--D){if(D<=V.first)return V.first;var P=Ee(V,D-1),G=P.stateAfter;if(G&&(!O||D+(G instanceof _n?G.lookAhead:0)<=V.modeFrontier))return D;var q=vt(P.text,null,S.options.tabSize);(H==null||q<T)&&(H=D-1,T=q)}return H}(e,t,i),g=c>o.first&&Ee(o,c-1).stateAfter,_=g?Qt.fromSaved(o,g,c):new Qt(o,$i(o.mode),c);return o.iter(c,t,function(S){bn(e,S.text,_);var w=_.line;S.stateAfter=w==t-1||w%5==0||w>=a.viewFrom&&w<a.viewTo?_.save():null,_.nextLine()}),i&&(o.modeFrontier=_.line),_}function bn(e,t,i,o){var a=e.doc.mode,c=new St(t,e.options.tabSize,i);for(c.start=c.pos=o||0,t==""&&wn(a,i.state);!c.eol();)ii(a,c,i.state),c.start=c.pos}function wn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=Qn(e,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function ii(e,t,i,o){for(var a=0;a<10;a++){o&&(o[0]=Qn(e,i).mode);var c=e.token(t,i);if(t.pos>t.start)return c}throw new Error("Mode "+e.name+" failed to advance stream.")}Qt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Qt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Qt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Qt.fromSaved=function(e,t,i){return t instanceof _n?new Qt(e,Er(e.mode,t.state),i,t.lookAhead):new Qt(e,Er(e.mode,t),i)},Qt.prototype.save=function(e){var t=e!==!1?Er(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new _n(t,this.maxLookAhead):t};var xn=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function oi(e,t,i,o){var a,c,g=e.doc,_=g.mode,S=Ee(g,(t=Ve(g,t)).line),w=Ur(e,t.line,i),O=new St(S.text,e.options.tabSize,w);for(o&&(c=[]);(o||O.pos<t.ch)&&!O.eol();)O.start=O.pos,a=ii(_,O,w.state),o&&c.push(new xn(O,a,Er(g.mode,w.state)));return o?c:new xn(O,a,w.state)}function si(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var o=i[1]?"bgClass":"textClass";t[o]==null?t[o]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[o])||(t[o]+=" "+i[2])}return e}function ai(e,t,i,o,a,c,g){var _=i.flattenSpans;_==null&&(_=e.options.flattenSpans);var S,w=0,O=null,T=new St(t,e.options.tabSize,o),H=e.options.addModeClass&&[null];for(t==""&&si(wn(i,o.state),c);!T.eol();){if(S=T.pos>e.options.maxHighlightLength?(_=!1,g&&bn(e,t,o,T.pos),T.pos=t.length,null):si(ii(i,T,o.state,H),c),H){var V=H[0].name;V&&(S="m-"+(S?V+" "+S:V))}if(!_||O!=S){for(;w<T.start;)a(w=Math.min(T.start,w+5e3),O);O=S}T.start=T.pos}for(;w<T.pos;){var W=Math.min(T.pos,w+5e3);a(W,O),w=W}}var li=!1,Nt=!1;function Cn(e,t,i){this.marker=e,this.from=t,this.to=i}function wr(e,t){if(e)for(var i=0;i<e.length;++i){var o=e[i];if(o.marker==t)return o}}function Zi(e,t){for(var i,o=0;o<e.length;++o)e[o]!=t&&(i=i||[]).push(e[o]);return i}function ui(e,t){if(t.full)return null;var i=Wr(e,t.from.line)&&Ee(e,t.from.line).markedSpans,o=Wr(e,t.to.line)&&Ee(e,t.to.line).markedSpans;if(!i&&!o)return null;var a=t.from.ch,c=t.to.ch,g=ze(t.from,t.to)==0,_=function(Y,se,me){var we;if(Y)for(var ve=0;ve<Y.length;++ve){var Oe=Y[ve],Je=Oe.marker;if(Oe.from==null||(Je.inclusiveLeft?Oe.from<=se:Oe.from<se)||Oe.from==se&&Je.type=="bookmark"&&(!me||!Oe.marker.insertLeft)){var tt=Oe.to==null||(Je.inclusiveRight?Oe.to>=se:Oe.to>se);(we=we||[]).push(new Cn(Je,Oe.from,tt?null:Oe.to))}}return we}(i,a,g),S=function(Y,se,me){var we;if(Y)for(var ve=0;ve<Y.length;++ve){var Oe=Y[ve],Je=Oe.marker;if(Oe.to==null||(Je.inclusiveRight?Oe.to>=se:Oe.to>se)||Oe.from==se&&Je.type=="bookmark"&&(!me||Oe.marker.insertLeft)){var tt=Oe.from==null||(Je.inclusiveLeft?Oe.from<=se:Oe.from<se);(we=we||[]).push(new Cn(Je,tt?null:Oe.from-se,Oe.to==null?null:Oe.to-se))}}return we}(o,c,g),w=t.text.length==1,O=N(t.text).length+(w?a:0);if(_)for(var T=0;T<_.length;++T){var H=_[T];if(H.to==null){var V=wr(S,H.marker);V?w&&(H.to=V.to==null?null:V.to+O):H.to=a}}if(S)for(var W=0;W<S.length;++W){var D=S[W];D.to!=null&&(D.to+=O),D.from==null?wr(_,D.marker)||(D.from=O,w&&(_=_||[]).push(D)):(D.from+=O,w&&(_=_||[]).push(D))}_=_&&Yi(_),S&&S!=_&&(S=Yi(S));var P=[_];if(!w){var G,q=t.text.length-2;if(0<q&&_)for(var X=0;X<_.length;++X)_[X].to==null&&(G=G||[]).push(new Cn(_[X].marker,null,null));for(var ee=0;ee<q;++ee)P.push(G);P.push(S)}return P}function Yi(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Ji(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Xi(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Sn(e){return e.inclusiveLeft?-1:0}function rn(e){return e.inclusiveRight?1:0}function kn(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var o=e.find(),a=t.find(),c=ze(o.from,a.from)||Sn(e)-Sn(t);if(c)return-c;var g=ze(o.to,a.to)||rn(e)-rn(t);return g||t.id-e.id}function ci(e,t){var i,o=Nt&&e.markedSpans;if(o)for(var a=void 0,c=0;c<o.length;++c)(a=o[c]).marker.collapsed&&(t?a.from:a.to)==null&&(!i||kn(i,a.marker)<0)&&(i=a.marker);return i}function fi(e){return ci(e,!0)}function Mn(e){return ci(e,!1)}function di(e,t){var i,o=Nt&&e.markedSpans;if(o)for(var a=0;a<o.length;++a){var c=o[a];c.marker.collapsed&&(c.from==null||c.from<t)&&(c.to==null||c.to>t)&&(!i||kn(i,c.marker)<0)&&(i=c.marker)}return i}function hi(e,t,i,o,a){var c=Ee(e,t),g=Nt&&c.markedSpans;if(g)for(var _=0;_<g.length;++_){var S=g[_];if(S.marker.collapsed){var w=S.marker.find(0),O=ze(w.from,i)||Sn(S.marker)-Sn(a),T=ze(w.to,o)||rn(S.marker)-rn(a);if(!(0<=O&&T<=0||O<=0&&0<=T)&&(O<=0&&(S.marker.inclusiveRight&&a.inclusiveLeft?0<=ze(w.to,i):0<ze(w.to,i))||0<=O&&(S.marker.inclusiveRight&&a.inclusiveLeft?ze(w.from,o)<=0:ze(w.from,o)<0)))return 1}}}function hr(e){for(var t;t=fi(e);)e=t.find(-1,!0).line;return e}function En(e,t){var i=Ee(e,t),o=hr(i);return i==o?t:ut(o)}function s(e,t){if(t>e.lastLine())return t;var i,o=Ee(e,t);if(!d(e,o))return t;for(;i=Mn(o);)o=i.find(1,!0).line;return ut(o)+1}function d(e,t){var i=Nt&&t.markedSpans;if(i){for(var o=void 0,a=0;a<i.length;++a)if((o=i[a]).marker.collapsed&&(o.from==null||!o.marker.widgetNode&&o.from==0&&o.marker.inclusiveLeft&&h(e,t,o)))return!0}}function h(e,t,i){if(i.to==null){var o=i.marker.find(1,!0);return h(e,o.line,wr(o.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var a=void 0,c=0;c<t.markedSpans.length;++c)if((a=t.markedSpans[c]).marker.collapsed&&!a.marker.widgetNode&&a.from==i.to&&(a.to==null||a.to!=i.from)&&(a.marker.inclusiveLeft||i.marker.inclusiveRight)&&h(e,t,a))return!0}function m(e){for(var t=0,i=(e=hr(e)).parent,o=0;o<i.lines.length;++o){var a=i.lines[o];if(a==e)break;t+=a.height}for(var c=i.parent;c;c=(i=c).parent)for(var g=0;g<c.children.length;++g){var _=c.children[g];if(_==i)break;t+=_.height}return t}function y(e){if(e.height==0)return 0;for(var t,i=e.text.length,o=e;t=fi(o);){var a=t.find(0,!0);o=a.from.line,i+=a.from.ch-a.to.ch}for(o=e;t=Mn(o);){var c=t.find(0,!0);i-=o.text.length-c.from.ch,i+=(o=c.to.line).text.length-c.to.ch}return i}function b(e){var t=e.display,i=e.doc;t.maxLine=Ee(i,i.first),t.maxLineLength=y(t.maxLine),t.maxLineChanged=!0,i.iter(function(o){var a=y(o);a>t.maxLineLength&&(t.maxLineLength=a,t.maxLine=o)})}var M=function(e,t,i){this.text=e,Xi(this,t),this.height=i?i(this):1};M.prototype.lineNo=function(){return ut(this)},Br(M);var I={},A={};function B(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?A:I;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function U(e,t){var i=Jt("span",null,null,E?"padding-right: .1px":null),o={pre:Jt("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var a=0;a<=(t.rest?t.rest.length:0);a++){var c=a?t.rest[a-1]:t.line,g=void 0;o.pos=0,o.addToken=te,pn(e.display.measure)&&(g=lt(c,e.doc.direction))&&(o.addToken=K(o.addToken,g)),o.map=[],be(c,o,ni(e,c,t!=e.display.externalMeasured&&ut(c))),c.styleClasses&&(c.styleClasses.bgClass&&(o.bgClass=ot(c.styleClasses.bgClass,o.bgClass||"")),c.styleClasses.textClass&&(o.textClass=ot(c.styleClasses.textClass,o.textClass||""))),o.map.length==0&&o.map.push(0,0,o.content.appendChild(yr(e.display.measure))),a==0?(t.measure.map=o.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(o.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(E){var _=o.content.lastChild;(/\bcm-tab\b/.test(_.className)||_.querySelector&&_.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return Ct(e,"renderLine",e,t.line,o.pre),o.pre.className&&(o.textClass=ot(o.pre.className,o.textClass||"")),o}function Q(e){var t=_e("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function te(e,t,i,o,a,c,g){if(t){var _,S=e.splitSpaces?function(Y,se){if(1<Y.length&&!/  /.test(Y))return Y;for(var me=se,we="",ve=0;ve<Y.length;ve++){var Oe=Y.charAt(ve);Oe!=" "||!me||ve!=Y.length-1&&Y.charCodeAt(ve+1)!=32||(Oe=" "),we+=Oe,me=Oe==" "}return we}(t,e.trailingSpace):t,w=e.cm.state.specialChars,O=!1;if(w.test(t)){_=document.createDocumentFragment();for(var T=0;;){w.lastIndex=T;var H=w.exec(t),V=H?H.index-T:t.length-T;if(V){var W=document.createTextNode(S.slice(T,T+V));x&&k<9?_.appendChild(_e("span",[W])):_.appendChild(W),e.map.push(e.pos,e.pos+V,W),e.col+=V,e.pos+=V}if(!H)break;T+=1+V;var D=void 0;if(H[0]=="	"){var P=e.cm.options.tabSize,G=P-e.col%P;(D=_.appendChild(_e("span",L(G),"cm-tab"))).setAttribute("role","presentation"),D.setAttribute("cm-text","	"),e.col+=G}else H[0]=="\r"||H[0]==`
`?(D=_.appendChild(_e("span",H[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",H[0]):((D=e.cm.options.specialCharPlaceholder(H[0])).setAttribute("cm-text",H[0]),x&&k<9?_.appendChild(_e("span",[D])):_.appendChild(D)),e.col+=1;e.map.push(e.pos,e.pos+1,D),e.pos++}}else e.col+=t.length,_=document.createTextNode(S),e.map.push(e.pos,e.pos+t.length,_),x&&k<9&&(O=!0),e.pos+=t.length;if(e.trailingSpace=S.charCodeAt(t.length-1)==32,i||o||a||O||c){var q=i||"";o&&(q+=o),a&&(q+=a);var X=_e("span",[_],q,c);if(g)for(var ee in g)g.hasOwnProperty(ee)&&ee!="style"&&ee!="class"&&X.setAttribute(ee,g[ee]);return e.content.appendChild(X)}e.content.appendChild(_)}}function K(e,t){return function(i,o,a,c,g,_,S){a=a?a+" cm-force-border":"cm-force-border";for(var w=i.pos,O=w+o.length;;){for(var T=void 0,H=0;H<t.length&&!((T=t[H]).to>w&&T.from<=w);H++);if(T.to>=O)return e(i,o,a,c,g,_,S);e(i,o.slice(0,T.to-w),a,c,null,_,S),c=null,o=o.slice(T.to-w),w=T.to}}}function ce(e,t,i,o){var a=!o&&i.widgetNode;a&&e.map.push(e.pos,e.pos+t,a),!o&&e.cm.display.input.needsContentAttribute&&(a=a||e.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",i.id),a&&(e.cm.display.input.setUneditable(a),e.content.appendChild(a)),e.pos+=t,e.trailingSpace=!1}function be(e,t,i){var o=e.markedSpans,a=e.text,c=0;if(o)for(var g,_,S,w,O,T,H,V=a.length,W=0,D=1,P="",G=0;;){if(G==W){S=w=O=_="",T=H=null,G=1/0;for(var q=[],X=void 0,ee=0;ee<o.length;++ee){var Y=o[ee],se=Y.marker;if(se.type=="bookmark"&&Y.from==W&&se.widgetNode)q.push(se);else if(Y.from<=W&&(Y.to==null||Y.to>W||se.collapsed&&Y.to==W&&Y.from==W)){if(Y.to!=null&&Y.to!=W&&G>Y.to&&(G=Y.to,w=""),se.className&&(S+=" "+se.className),se.css&&(_=(_?_+";":"")+se.css),se.startStyle&&Y.from==W&&(O+=" "+se.startStyle),se.endStyle&&Y.to==G&&(X=X||[]).push(se.endStyle,Y.to),se.title&&((H=H||{}).title=se.title),se.attributes)for(var me in se.attributes)(H=H||{})[me]=se.attributes[me];se.collapsed&&(!T||kn(T.marker,se)<0)&&(T=Y)}else Y.from>W&&G>Y.from&&(G=Y.from)}if(X)for(var we=0;we<X.length;we+=2)X[we+1]==G&&(w+=" "+X[we]);if(!T||T.from==W)for(var ve=0;ve<q.length;++ve)ce(t,0,q[ve]);if(T&&(T.from||0)==W){if(ce(t,(T.to==null?V+1:T.to)-W,T.marker,T.from==null),T.to==null)return;T.to==W&&(T=!1)}}if(V<=W)break;for(var Oe=Math.min(V,G);;){if(P){var Je=W+P.length;if(!T){var tt=Oe<Je?P.slice(0,Oe-W):P;t.addToken(t,tt,g?g+S:S,O,W+tt.length==G?w:"",_,H)}if(Oe<=Je){P=P.slice(Oe-W),W=Oe;break}W=Je,O=""}P=a.slice(c,c=i[D++]),g=B(i[D++],t.cm.options)}}else for(var Ne=1;Ne<i.length;Ne+=2)t.addToken(t,a.slice(c,c=i[Ne]),B(i[Ne+1],t.cm.options))}function ue(e,t,i){this.line=t,this.rest=function(o){for(var a,c;a=Mn(o);)o=a.find(1,!0).line,(c=c||[]).push(o);return c}(t),this.size=this.rest?ut(N(this.rest))-i+1:1,this.node=this.text=null,this.hidden=d(e,t)}function Pe(e,t,i){for(var o,a=[],c=t;c<i;c=o){var g=new ue(e.doc,Ee(e.doc,c),c);o=c+g.size,a.push(g)}return a}var Ue=null;function Ge(e,t){var i=e.ownsGroup;if(i)try{(function(o){var a=o.delayedCallbacks,c=0;do{for(;c<a.length;c++)a[c].call(null);for(var g=0;g<o.ops.length;g++){var _=o.ops[g];if(_.cursorActivityHandlers)for(;_.cursorActivityCalled<_.cursorActivityHandlers.length;)_.cursorActivityHandlers[_.cursorActivityCalled++].call(null,_.cm)}}while(c<a.length)})(i)}finally{Ue=null,t(i)}}var gt=null;function ht(e,t){var i=xt(e,t);if(i.length){var o,a=Array.prototype.slice.call(arguments,2);Ue?o=Ue.delayedCallbacks:gt?o=gt:(o=gt=[],setTimeout(kt,0));for(var c=function(_){o.push(function(){return i[_].apply(null,a)})},g=0;g<i.length;++g)c(g)}}function kt(){var e=gt;gt=null;for(var t=0;t<e.length;++t)e[t]()}function zt(e,t,i,o){for(var a=0;a<t.changes.length;a++){var c=t.changes[a];c=="text"?Bt(e,t):c=="gutter"?Lt(e,t,i,o):c=="class"?Vt(e,t):c=="widget"&&Lr(e,t,o)}t.changes=null}function et(e){return e.node==e.text&&(e.node=_e("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),x&&k<8&&(e.node.style.zIndex=2)),e.node}function Ye(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):U(e,t)}function Bt(e,t){var i=t.text.className,o=Ye(e,t);t.text==t.node&&(t.node=o.pre),t.text.parentNode.replaceChild(o.pre,t.text),t.text=o.pre,o.bgClass!=t.bgClass||o.textClass!=t.textClass?(t.bgClass=o.bgClass,t.textClass=o.textClass,Vt(e,t)):i&&(t.text.className=i)}function Vt(e,t){(function(o,a){var c=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),a.background)c?a.background.className=c:(a.background.parentNode.removeChild(a.background),a.background=null);else if(c){var g=et(a);a.background=g.insertBefore(_e("div",null,c),g.firstChild),o.display.input.setUneditable(a.background)}})(e,t),t.line.wrapClass?et(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function Lt(e,t,i,o){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var a=et(t);t.gutterBackground=_e("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),a.insertBefore(t.gutterBackground,t.text)}var c=t.line.gutterMarkers;if(e.options.lineNumbers||c){var g=et(t),_=t.gutter=_e("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(e.display.input.setUneditable(_),g.insertBefore(_,t.text),t.line.gutterClass&&(_.className+=" "+t.line.gutterClass),!e.options.lineNumbers||c&&c["CodeMirror-linenumbers"]||(t.lineNumber=_.appendChild(_e("div",ti(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(var S=0;S<e.display.gutterSpecs.length;++S){var w=e.display.gutterSpecs[S].className,O=c.hasOwnProperty(w)&&c[w];O&&_.appendChild(_e("div",[O],"CodeMirror-gutter-elt","left: "+o.gutterLeft[w]+"px; width: "+o.gutterWidth[w]+"px"))}}}function Lr(e,t,i){t.alignable&&(t.alignable=null);for(var o=yt("CodeMirror-linewidget"),a=t.node.firstChild,c=void 0;a;a=c)c=a.nextSibling,o.test(a.className)&&t.node.removeChild(a);zr(e,t,i)}function zr(e,t,i){if(Tn(e,t.line,t,i,!0),t.rest)for(var o=0;o<t.rest.length;o++)Tn(e,t.rest[o],t,i,!1)}function Tn(e,t,i,o,a){if(t.widgets)for(var c=et(i),g=0,_=t.widgets;g<_.length;++g){var S=_[g],w=_e("div",[S.node],"CodeMirror-linewidget"+(S.className?" "+S.className:""));S.handleMouseEvents||w.setAttribute("cm-ignore-events","true"),ol(S,w,i,o),e.display.input.setUneditable(w),a&&S.above?c.insertBefore(w,i.gutter||i.text):c.appendChild(w),ht(S,"redraw")}}function ol(e,t,i,o){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var a=o.wrapperWidth;t.style.left=o.fixedPos+"px",e.coverGutter||(a-=o.gutterTotalWidth,t.style.paddingLeft=o.gutterTotalWidth+"px"),t.style.width=a+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-o.gutterTotalWidth+"px"))}function pi(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!It(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),at(t.display.measure,_e("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Pr(e,t){for(var i=en(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return 1}function Qi(e){return e.lineSpace.offsetTop}function Io(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function bs(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=at(e.measure,_e("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(e.cachedPaddingH=o),o}function Ar(e){return Qr-e.display.nativeBarWidth}function nn(e){return e.display.scroller.clientWidth-Ar(e)-e.display.barWidth}function Oo(e){return e.display.scroller.clientHeight-Ar(e)-e.display.barHeight}function ws(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var o=0;o<e.rest.length;o++)if(e.rest[o]==t)return{map:e.measure.maps[o],cache:e.measure.caches[o]};for(var a=0;a<e.rest.length;a++)if(ut(e.rest[a])>i)return{map:e.measure.maps[a],cache:e.measure.caches[a],before:!0}}function xs(e,t,i,o){return Ir(e,An(e,t),i,o)}function Ro(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[an(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function An(e,t){var i=ut(t),o=Ro(e,i);o&&!o.text?o=null:o&&o.changes&&(zt(e,o,i,Ho(e)),e.curOp.forceUpdate=!0);var a=ws(o=o||function(c,g){var _=ut(g=hr(g)),S=c.display.externalMeasured=new ue(c.doc,g,_);S.lineN=_;var w=S.built=U(c,S);return S.text=w.pre,at(c.display.lineMeasure,w.pre),S}(e,t),t,i);return{line:t,view:o,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function Ir(e,t,i,o,a){t.before&&(i=-1);var c,g=i+(o||"");return t.cache.hasOwnProperty(g)?c=t.cache[g]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(_,S,w){var O=_.options.lineWrapping,T=O&&nn(_);if(!S.measure.heights||O&&S.measure.width!=T){var H=S.measure.heights=[];if(O){S.measure.width=T;for(var V=S.text.firstChild.getClientRects(),W=0;W<V.length-1;W++){var D=V[W],P=V[W+1];2<Math.abs(D.bottom-P.bottom)&&H.push((D.bottom+P.top)/2-w.top)}}H.push(w.bottom-w.top)}}(e,t.view,t.rect),t.hasHeights=!0),(c=function(_,S,w,O){var T,H=Ss(S.map,w,O),V=H.node,W=H.start,D=H.end,P=H.collapse;if(V.nodeType==3){for(var G=0;G<4;G++){for(;W&&Ie(S.line.text.charAt(H.coverStart+W));)--W;for(;H.coverStart+D<H.coverEnd&&Ie(S.line.text.charAt(H.coverStart+D));)++D;if((T=x&&k<9&&W==0&&D==H.coverEnd-H.coverStart?V.parentNode.getBoundingClientRect():sl(Ut(V,W,D).getClientRects(),O)).left||T.right||W==0)break;D=W,--W,P="right"}x&&k<11&&(T=function(tt,Ne){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function(ft){if(Yn!=null)return Yn;var $e=at(ft,_e("span","x")),Re=$e.getBoundingClientRect(),We=Ut($e,0,1).getBoundingClientRect();return Yn=1<Math.abs(Re.left-We.left)}(tt))return Ne;var He=screen.logicalXDPI/screen.deviceXDPI,Te=screen.logicalYDPI/screen.deviceYDPI;return{left:Ne.left*He,right:Ne.right*He,top:Ne.top*Te,bottom:Ne.bottom*Te}}(_.display.measure,T))}else{var q;0<W&&(P=O="right"),T=_.options.lineWrapping&&1<(q=V.getClientRects()).length?q[O=="right"?q.length-1:0]:V.getBoundingClientRect()}if(x&&k<9&&!W&&(!T||!T.left&&!T.right)){var X=V.parentNode.getClientRects()[0];T=X?{left:X.left,right:X.left+On(_.display),top:X.top,bottom:X.bottom}:Cs}for(var ee=T.top-S.rect.top,Y=T.bottom-S.rect.top,se=(ee+Y)/2,me=S.view.measure.heights,we=0;we<me.length-1&&!(se<me[we]);we++);var ve=we?me[we-1]:0,Oe=me[we],Je={left:(P=="right"?T.right:T.left)-S.rect.left,right:(P=="left"?T.left:T.right)-S.rect.left,top:ve,bottom:Oe};return T.left||T.right||(Je.bogus=!0),_.options.singleCursorHeightPerLine||(Je.rtop=ee,Je.rbottom=Y),Je}(e,t,i,o)).bogus||(t.cache[g]=c)),{left:c.left,right:c.right,top:a?c.rtop:c.top,bottom:a?c.rbottom:c.bottom}}var on,Cs={left:0,right:0,top:0,bottom:0};function Ss(e,t,i){for(var o,a,c,g,_,S,w=0;w<e.length;w+=3)if(_=e[w],S=e[w+1],t<_?(a=0,c=1,g="left"):t<S?c=(a=t-_)+1:(w==e.length-3||t==S&&e[w+3]>t)&&(a=(c=S-_)-1,S<=t&&(g="right")),a!=null){if(o=e[w+2],_==S&&i==(o.insertLeft?"left":"right")&&(g=i),i=="left"&&a==0)for(;w&&e[w-2]==e[w-3]&&e[w-1].insertLeft;)o=e[2+(w-=3)],g="left";if(i=="right"&&a==S-_)for(;w<e.length-3&&e[w+3]==e[w+4]&&!e[w+5].insertLeft;)o=e[(w+=3)+2],g="right";break}return{node:o,start:a,end:c,collapse:g,coverStart:_,coverEnd:S}}function sl(e,t){var i=Cs;if(t=="left")for(var o=0;o<e.length&&(i=e[o]).left==i.right;o++);else for(var a=e.length-1;0<=a&&(i=e[a]).left==i.right;a--);return i}function ks(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ms(e){e.display.externalMeasure=null,wt(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ks(e.display.view[t])}function gi(e){Ms(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Es(){return z&&ge?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ts(){return z&&ge?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function No(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=pi(e.widgets[i]));return t}function eo(e,t,i,o,a){if(!a){var c=No(t);i.top+=c,i.bottom+=c}if(o=="line")return i;o=o||"local";var g=m(t);if(o=="local"?g+=Qi(e.display):g-=e.display.viewOffset,o=="page"||o=="window"){var _=e.display.lineSpace.getBoundingClientRect();g+=_.top+(o=="window"?0:Ts());var S=_.left+(o=="window"?0:Es());i.left+=S,i.right+=S}return i.top+=g,i.bottom+=g,i}function As(e,t,i){if(i=="div")return t;var o=t.left,a=t.top;if(i=="page")o-=Es(),a-=Ts();else if(i=="local"||!i){var c=e.display.sizer.getBoundingClientRect();o+=c.left,a+=c.top}var g=e.display.lineSpace.getBoundingClientRect();return{left:o-g.left,top:a-g.top}}function Lo(e,t,i,o,a){return eo(e,o=o||Ee(e.doc,t.line),xs(e,o,t.ch,a),i)}function xr(e,t,i,o,a,c){function g(W,D){var P=Ir(e,a,W,D?"right":"left",c);return D?P.left=P.right:P.right=P.left,eo(e,o,P,i)}o=o||Ee(e.doc,t.line),a=a||An(e,o);var _=lt(o,e.doc.direction),S=t.ch,w=t.sticky;if(S>=o.text.length?(S=o.text.length,w="before"):S<=0&&(S=0,w="after"),!_)return g(w=="before"?S-1:S,w=="before");function O(W,D,P){return g(P?W-1:W,_[D].level==1!=P)}var T=Le(_,S,w),H=De,V=O(S,T,w=="before");return H!=null&&(V.other=O(S,H,w!="before")),V}function Is(e,t){var i=0;t=Ve(e.doc,t),e.options.lineWrapping||(i=On(e.display)*t.ch);var o=Ee(e.doc,t.line),a=m(o)+Qi(e.display);return{left:i,right:i,top:a,bottom:a+o.height}}function Po(e,t,i,o,a){var c=oe(e,t,i);return c.xRel=a,o&&(c.outside=o),c}function Fo(e,t,i){var o=e.doc;if((i+=e.display.viewOffset)<0)return Po(o.first,0,null,-1,-1);var a=Tr(o,i),c=o.first+o.size-1;if(c<a)return Po(o.first+o.size-1,Ee(o,c).text.length,null,1,1);t<0&&(t=0);for(var g=Ee(o,a);;){var _=al(e,g,a,t,i),S=di(g,_.ch+(0<_.xRel||0<_.outside?1:0));if(!S)return _;var w=S.find(1);if(w.line==a)return w;g=Ee(o,a=w.line)}}function Os(e,t,i,o){o-=No(t);var a=t.text.length,c=Me(function(g){return Ir(e,i,g-1).bottom<=o},a,0);return{begin:c,end:a=Me(function(g){return Ir(e,i,g).top>o},c,a)}}function Rs(e,t,i,o){return Os(e,t,i=i||An(e,t),eo(e,t,Ir(e,i,o),"line").top)}function Bo(e,t,i,o){return!(e.bottom<=i)&&(e.top>i||(o?e.left:e.right)>t)}function al(e,t,i,o,a){a-=m(t);var c=An(e,t),g=No(t),_=0,S=t.text.length,w=!0,O=lt(t,e.doc.direction);if(O){var T=(e.options.lineWrapping?function(Y,se,me,we,ve,Oe,Je){var tt=Os(Y,se,we,Je),Ne=tt.begin,He=tt.end;/\s/.test(se.text.charAt(He-1))&&He--;for(var Te=null,ft=null,$e=0;$e<ve.length;$e++){var Re=ve[$e];if(!(Re.from>=He||Re.to<=Ne)){var We=Re.level!=1,rt=Ir(Y,we,We?Math.min(He,Re.to)-1:Math.max(Ne,Re.from)).right,Wt=rt<Oe?Oe-rt+1e9:rt-Oe;(!Te||Wt<ft)&&(Te=Re,ft=Wt)}}return Te=Te||ve[ve.length-1],Te.from<Ne&&(Te={from:Ne,to:Te.to,level:Te.level}),Te.to>He&&(Te={from:Te.from,to:He,level:Te.level}),Te}:function(Y,se,me,we,ve,Oe,Je){var tt=Me(function(ft){var $e=ve[ft],Re=$e.level!=1;return Bo(xr(Y,oe(me,Re?$e.to:$e.from,Re?"before":"after"),"line",se,we),Oe,Je,!0)},0,ve.length-1),Ne=ve[tt];if(0<tt){var He=Ne.level!=1,Te=xr(Y,oe(me,He?Ne.from:Ne.to,He?"after":"before"),"line",se,we);Bo(Te,Oe,Je,!0)&&Te.top>Je&&(Ne=ve[tt-1])}return Ne})(e,t,i,c,O,o,a);_=(w=T.level!=1)?T.from:T.to-1,S=w?T.to:T.from-1}var H,V,W=null,D=null,P=Me(function(Y){var se=Ir(e,c,Y);return se.top+=g,se.bottom+=g,Bo(se,o,a,!1)&&(se.top<=a&&se.left<=o&&(W=Y,D=se),1)},_,S),G=!1;if(D){var q=o-D.left<D.right-o,X=q==w;P=W+(X?0:1),V=X?"after":"before",H=q?D.left:D.right}else{w||P!=S&&P!=_||P++,V=P==0?"after":P==t.text.length?"before":Ir(e,c,P-(w?1:0)).bottom+g<=a==w?"after":"before";var ee=xr(e,oe(i,P,V),"line",t,c);H=ee.left,G=a<ee.top?-1:a>=ee.bottom?1:0}return Po(i,P=Se(t.text,P,1),V,G,o-H)}function In(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(on==null){on=_e("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)on.appendChild(document.createTextNode("x")),on.appendChild(_e("br"));on.appendChild(document.createTextNode("x"))}at(e.measure,on);var i=on.offsetHeight/50;return 3<i&&(e.cachedTextHeight=i),wt(e.measure),i||1}function On(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=_e("span","xxxxxxxxxx"),i=_e("pre",[t],"CodeMirror-line-like");at(e.measure,i);var o=t.getBoundingClientRect(),a=(o.right-o.left)/10;return 2<a&&(e.cachedCharWidth=a),a||10}function Ho(e){for(var t=e.display,i={},o={},a=t.gutters.clientLeft,c=t.gutters.firstChild,g=0;c;c=c.nextSibling,++g){var _=e.display.gutterSpecs[g].className;i[_]=c.offsetLeft+c.clientLeft+a,o[_]=c.clientWidth}return{fixedPos:Do(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:o,wrapperWidth:t.wrapper.clientWidth}}function Do(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ns(e){var t=In(e.display),i=e.options.lineWrapping,o=i&&Math.max(5,e.display.scroller.clientWidth/On(e.display)-3);return function(a){if(d(e.doc,a))return 0;var c=0;if(a.widgets)for(var g=0;g<a.widgets.length;g++)a.widgets[g].height&&(c+=a.widgets[g].height);return i?c+(Math.ceil(a.text.length/o)||1)*t:c+t}}function Wo(e){var t=e.doc,i=Ns(e);t.iter(function(o){var a=i(o);a!=o.height&&_r(o,a)})}function sn(e,t,i,o){var a=e.display;if(!i&&en(t).getAttribute("cm-not-content")=="true")return null;var c,g,_=a.lineSpace.getBoundingClientRect();try{c=t.clientX-_.left,g=t.clientY-_.top}catch{return null}var S,w=Fo(e,c,g);if(o&&0<w.xRel&&(S=Ee(e.doc,w.line).text).length==w.ch){var O=vt(S,S.length,e.options.tabSize)-S.length;w=oe(w.line,Math.max(0,Math.round((c-bs(e.display).left)/On(e.display))-O))}return w}function an(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,o=0;o<i.length;o++)if((t-=i[o].size)<0)return o}function nr(e,t,i,o){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),o=o||0;var a=e.display;if(o&&i<a.viewTo&&(a.updateLineNumbers==null||a.updateLineNumbers>t)&&(a.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=a.viewTo)Nt&&En(e.doc,t)<a.viewTo&&jr(e);else if(i<=a.viewFrom)Nt&&s(e.doc,i+o)>a.viewFrom?jr(e):(a.viewFrom+=o,a.viewTo+=o);else if(t<=a.viewFrom&&i>=a.viewTo)jr(e);else if(t<=a.viewFrom){var c=to(e,i,i+o,1);c?(a.view=a.view.slice(c.index),a.viewFrom=c.lineN,a.viewTo+=o):jr(e)}else if(i>=a.viewTo){var g=to(e,t,t,-1);g?(a.view=a.view.slice(0,g.index),a.viewTo=g.lineN):jr(e)}else{var _=to(e,t,t,-1),S=to(e,i,i+o,1);_&&S?(a.view=a.view.slice(0,_.index).concat(Pe(e,_.lineN,S.lineN)).concat(a.view.slice(S.index)),a.viewTo+=o):jr(e)}var w=a.externalMeasured;w&&(i<w.lineN?w.lineN+=o:t<w.lineN+w.size&&(a.externalMeasured=null))}function Vr(e,t,i){e.curOp.viewChanged=!0;var o=e.display,a=e.display.externalMeasured;if(a&&t>=a.lineN&&t<a.lineN+a.size&&(o.externalMeasured=null),!(t<o.viewFrom||t>=o.viewTo)){var c=o.view[an(e,t)];if(c.node!=null){var g=c.changes||(c.changes=[]);Et(g,i)==-1&&g.push(i)}}}function jr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function to(e,t,i,o){var a,c=an(e,t),g=e.display.view;if(!Nt||i==e.doc.first+e.doc.size)return{index:c,lineN:i};for(var _=e.display.viewFrom,S=0;S<c;S++)_+=g[S].size;if(_!=t){if(0<o){if(c==g.length-1)return null;a=_+g[c].size-t,c++}else a=_-t;t+=a,i+=a}for(;En(e.doc,i)!=i;){if(c==(o<0?0:g.length-1))return null;i+=o*g[c-(o<0?1:0)].size,c+=o}return{index:c,lineN:i}}function Ls(e){for(var t=e.display.view,i=0,o=0;o<t.length;o++){var a=t[o];a.hidden||a.node&&!a.changes||++i}return i}function mi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ps(e,t){t===void 0&&(t=!0);for(var i=e.doc,o={},a=o.cursors=document.createDocumentFragment(),c=o.selection=document.createDocumentFragment(),g=0;g<i.sel.ranges.length;g++)if(t||g!=i.sel.primIndex){var _=i.sel.ranges[g];if(!(_.from().line>=e.display.viewTo||_.to().line<e.display.viewFrom)){var S=_.empty();(S||e.options.showCursorWhenSelecting)&&Fs(e,_.head,a),S||ll(e,_,c)}}return o}function Fs(e,t,i){var o=xr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),a=i.appendChild(_e("div"," ","CodeMirror-cursor"));if(a.style.left=o.left+"px",a.style.top=o.top+"px",a.style.height=Math.max(0,o.bottom-o.top)*e.options.cursorHeight+"px",o.other){var c=i.appendChild(_e("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));c.style.display="",c.style.left=o.other.left+"px",c.style.top=o.other.top+"px",c.style.height=.85*(o.other.bottom-o.other.top)+"px"}}function ro(e,t){return e.top-t.top||e.left-t.left}function ll(e,t,i){var o=e.display,a=e.doc,c=document.createDocumentFragment(),g=bs(e.display),_=g.left,S=Math.max(o.sizerWidth,nn(e)-o.sizer.offsetLeft)-g.right,w=a.direction=="ltr";function O(X,ee,Y,se){ee<0&&(ee=0),ee=Math.round(ee),se=Math.round(se),c.appendChild(_e("div",null,"CodeMirror-selected","position: absolute; left: "+X+`px;
                             top: `+ee+"px; width: "+(Y??S-X)+`px;
                             height: `+(se-ee)+"px"))}function T(X,ee,Y){var se,me,we=Ee(a,X),ve=we.text.length;function Oe(Ne,He){return Lo(e,oe(X,Ne),"div",we,He)}function Je(Ne,He,Te){var ft=Rs(e,we,null,Ne),$e=He=="ltr"==(Te=="after")?"left":"right";return Oe(Te=="after"?ft.begin:ft.end-(/\s/.test(we.text.charAt(ft.end-1))?2:1),$e)[$e]}var tt=lt(we,a.direction);return function(Ne,He,Te,ft){if(!Ne)return ft(He,Te,"ltr",0);for(var $e=!1,Re=0;Re<Ne.length;++Re){var We=Ne[Re];(We.from<Te&&We.to>He||He==Te&&We.to==He)&&(ft(Math.max(We.from,He),Math.min(We.to,Te),We.level==1?"rtl":"ltr",Re),$e=!0)}$e||ft(He,Te,"ltr")}(tt,ee||0,Y??ve,function(Ne,He,Te,ft){var $e=Te=="ltr",Re=Oe(Ne,$e?"left":"right"),We=Oe(He-1,$e?"right":"left"),rt=ee==null&&Ne==0,Wt=Y==null&&He==ve,or=ft==0,br=!tt||ft==tt.length-1;if(We.top-Re.top<=3){var Or=(w?Wt:rt)&&br,ur=(w?rt:Wt)&&or?_:($e?Re:We).left,Vn=Or?S:($e?We:Re).right;O(ur,Re.top,Vn-ur,Re.bottom)}else{var Rr,Yr,Jr,jn;jn=$e?(Rr=w&&rt&&or?_:Re.left,Yr=w?S:Je(Ne,Te,"before"),Jr=w?_:Je(He,Te,"after"),w&&Wt&&br?S:We.right):(Rr=w?Je(Ne,Te,"before"):_,Yr=!w&&rt&&or?S:Re.right,Jr=!w&&Wt&&br?_:We.left,w?Je(He,Te,"after"):S),O(Rr,Re.top,Yr-Rr,Re.bottom),Re.bottom<We.top&&O(_,Re.bottom,null,We.top),O(Jr,We.top,jn-Jr,We.bottom)}(!se||ro(Re,se)<0)&&(se=Re),ro(We,se)<0&&(se=We),(!me||ro(Re,me)<0)&&(me=Re),ro(We,me)<0&&(me=We)}),{start:se,end:me}}var H=t.from(),V=t.to();if(H.line==V.line)T(H.line,H.ch,V.ch);else{var W=Ee(a,H.line),D=Ee(a,V.line),P=hr(W)==hr(D),G=T(H.line,H.ch,P?W.text.length+1:null).end,q=T(V.line,P?0:null,V.ch).start;P&&(G.top<q.top-2?(O(G.right,G.top,null,G.bottom),O(_,q.top,q.left,q.bottom)):O(G.right,G.top,q.left-G.right,G.bottom)),G.bottom<q.top&&O(_,G.bottom,null,q.top)}i.appendChild(c)}function Uo(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Bs(e){e.state.focused||(e.display.input.focus(),zo(e))}function Hs(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,vi(e))},100)}function zo(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Ct(e,"focus",e,t),e.state.focused=!0,Ke(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),E&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Uo(e))}function vi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Ct(e,"blur",e,t),e.state.focused=!1,Mt(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function no(e){for(var t=e.display,i=t.lineDiv.offsetTop,o=0;o<t.view.length;o++){var a=t.view[o],c=e.options.lineWrapping,g=void 0,_=0;if(!a.hidden){if(x&&k<8){var S=a.node.offsetTop+a.node.offsetHeight;g=S-i,i=S}else{var w=a.node.getBoundingClientRect();g=w.bottom-w.top,!c&&a.text.firstChild&&(_=a.text.firstChild.getBoundingClientRect().right-w.left-1)}var O=a.line.height-g;if((.005<O||O<-.005)&&(_r(a.line,g),Ds(a.line),a.rest))for(var T=0;T<a.rest.length;T++)Ds(a.rest[T]);if(_>e.display.sizerWidth){var H=Math.ceil(_/On(e.display));H>e.display.maxLineLength&&(e.display.maxLineLength=H,e.display.maxLine=a.line,e.display.maxLineChanged=!0)}}}}function Ds(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],o=i.node.parentNode;o&&(i.height=o.offsetHeight)}}function io(e,t,i){var o=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;o=Math.floor(o-Qi(e));var a=i&&i.bottom!=null?i.bottom:o+e.wrapper.clientHeight,c=Tr(t,o),g=Tr(t,a);if(i&&i.ensure){var _=i.ensure.from.line,S=i.ensure.to.line;_<c?g=Tr(t,m(Ee(t,c=_))+e.wrapper.clientHeight):Math.min(S,t.lastLine())>=g&&(c=Tr(t,m(Ee(t,S))-e.wrapper.clientHeight),g=S)}return{from:c,to:Math.max(g,c+1)}}function Vo(e,t){var i=e.display,o=In(e.display);t.top<0&&(t.top=0);var a=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,c=Oo(e),g={};t.bottom-t.top>c&&(t.bottom=t.top+c);var _=e.doc.height+Io(i),S=t.top<o,w=t.bottom>_-o;if(t.top<a)g.scrollTop=S?0:t.top;else if(t.bottom>a+c){var O=Math.min(t.top,(w?_:t.bottom)-c);O!=a&&(g.scrollTop=O)}var T=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft,H=nn(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),V=t.right-t.left>H;return V&&(t.right=t.left+H),t.left<10?g.scrollLeft=0:t.left<T?g.scrollLeft=Math.max(0,t.left-(V?0:10)):t.right>H+T-3&&(g.scrollLeft=t.right+(V?0:10)-H),g}function jo(e,t){t!=null&&(oo(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Rn(e){oo(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function yi(e,t,i){t==null&&i==null||oo(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function oo(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ws(e,Is(e,t.from),Is(e,t.to),t.margin))}function Ws(e,t,i,o){var a=Vo(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-o,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+o});yi(e,a.scrollLeft,a.scrollTop)}function _i(e,t){Math.abs(e.doc.scrollTop-t)<2||(l||$o(e,{top:t}),Us(e,t,!0),l&&$o(e),xi(e,100))}function Us(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),e.display.scroller.scrollTop==t&&!i||(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function ln(e,t,i,o){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!o||(e.doc.scrollLeft=t,$s(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function bi(e){var t=e.display,i=t.gutters.offsetWidth,o=Math.round(e.doc.height+Io(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:o,scrollHeight:o+Ar(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function un(e,t,i){this.cm=i;var o=this.vert=_e("div",[_e("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),a=this.horiz=_e("div",[_e("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=a.tabIndex=-1,e(o),e(a),Be(o,"scroll",function(){o.clientHeight&&t(o.scrollTop,"vertical")}),Be(a,"scroll",function(){a.clientWidth&&t(a.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,x&&k<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}un.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?o+"px":"0";var a=e.viewHeight-(t?o:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+a)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?o+"px":"0",this.horiz.style.left=e.barLeft+"px";var c=e.viewWidth-e.barLeft-(i?o:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+c)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<e.clientHeight&&(o==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?o:0,bottom:t?o:0}},un.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},un.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},un.prototype.zeroWidthHack=function(){var e=re&&!j?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ft,this.disableVert=new Ft},un.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto",t.set(1e3,function o(){var a=e.getBoundingClientRect();(i=="vert"?document.elementFromPoint(a.right-1,(a.top+a.bottom)/2):document.elementFromPoint((a.right+a.left)/2,a.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,o)})},un.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};function wi(){}function Nn(e,t){t=t||bi(e);var i=e.display.barWidth,o=e.display.barHeight;zs(e,t);for(var a=0;a<4&&i!=e.display.barWidth||o!=e.display.barHeight;a++)i!=e.display.barWidth&&e.options.lineWrapping&&no(e),zs(e,bi(e)),i=e.display.barWidth,o=e.display.barHeight}function zs(e,t){var i=e.display,o=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=o.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=o.bottom)+"px",i.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=o.bottom+"px",i.scrollbarFiller.style.width=o.right+"px"):i.scrollbarFiller.style.display="",o.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=o.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}wi.prototype.update=function(){return{bottom:0,right:0}},wi.prototype.setScrollLeft=function(){},wi.prototype.setScrollTop=function(){},wi.prototype.clear=function(){};var Vs={native:un,null:wi};function js(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Mt(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Vs[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Be(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){(i=="horizontal"?ln:_i)(e,t)},e),e.display.scrollbars.addClass&&Ke(e.display.wrapper,e.display.scrollbars.addClass)}var ul=0;function cn(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ul},t=e.curOp,Ue?Ue.ops.push(t):t.ownsGroup=Ue={ops:[t],delayedCallbacks:[]}}function fn(e){var t=e.curOp;t&&Ge(t,function(i){for(var o=0;o<i.ops.length;o++)i.ops[o].cm.curOp=null;(function(a){for(var c=a.ops,g=0;g<c.length;g++)cl(c[g]);for(var _=0;_<c.length;_++)(S=c[_]).updatedDisplay=S.mustUpdate&&Ko(S.cm,S.update);for(var S,w=0;w<c.length;w++)fl(c[w]);for(var O=0;O<c.length;O++)dl(c[O]);for(var T=0;T<c.length;T++)hl(c[T])})(i)})}function cl(e){var t,i,o=e.cm,a=o.display;!(i=(t=o).display).scrollbarsClipped&&i.scroller.offsetWidth&&(i.nativeBarWidth=i.scroller.offsetWidth-i.scroller.clientWidth,i.heightForcer.style.height=Ar(t)+"px",i.sizer.style.marginBottom=-i.nativeBarWidth+"px",i.sizer.style.borderRightWidth=Ar(t)+"px",i.scrollbarsClipped=!0),e.updateMaxLine&&b(o),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<a.viewFrom||e.scrollToPos.to.line>=a.viewTo)||a.maxLineChanged&&o.options.lineWrapping,e.update=e.mustUpdate&&new so(o,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function fl(e){var t=e.cm,i=t.display;e.updatedDisplay&&no(t),e.barMeasure=bi(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=xs(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Ar(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-nn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function dl(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&ln(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==Qe();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),!e.updatedDisplay&&e.startHeight==t.doc.height||Nn(t,e.barMeasure),e.updatedDisplay&&Go(t,e.barMeasure),e.selectionChanged&&Uo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&Bs(e.cm)}function hl(e){var t=e.cm,i=t.display,o=t.doc;e.updatedDisplay&&Ks(t,e.update),i.wheelStartX==null||e.scrollTop==null&&e.scrollLeft==null&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&Us(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&ln(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(S,w){if(!Tt(S,"scrollCursorIntoView")){var O=S.display,T=O.sizer.getBoundingClientRect(),H=null;if(w.top+T.top<0?H=!0:w.bottom+T.top>(window.innerHeight||document.documentElement.clientHeight)&&(H=!1),H!=null&&!fe){var V=_e("div","",null,`position: absolute;
                         top: `+(w.top-O.viewOffset-Qi(S.display))+`px;
                         height: `+(w.bottom-w.top+Ar(S)+O.barHeight)+`px;
                         left: `+w.left+"px; width: "+Math.max(2,w.right-w.left)+"px;");S.display.lineSpace.appendChild(V),V.scrollIntoView(H),S.display.lineSpace.removeChild(V)}}}(t,function(S,w,O,T){var H;T==null&&(T=0),S.options.lineWrapping||w!=O||(O=(w=w.ch?oe(w.line,w.sticky=="before"?w.ch-1:w.ch,"after"):w).sticky=="before"?oe(w.line,w.ch+1,"before"):w);for(var V=0;V<5;V++){var W=!1,D=xr(S,w),P=O&&O!=w?xr(S,O):D,G=Vo(S,H={left:Math.min(D.left,P.left),top:Math.min(D.top,P.top)-T,right:Math.max(D.left,P.left),bottom:Math.max(D.bottom,P.bottom)+T}),q=S.doc.scrollTop,X=S.doc.scrollLeft;if(G.scrollTop!=null&&(_i(S,G.scrollTop),1<Math.abs(S.doc.scrollTop-q)&&(W=!0)),G.scrollLeft!=null&&(ln(S,G.scrollLeft),1<Math.abs(S.doc.scrollLeft-X)&&(W=!0)),!W)break}return H}(t,Ve(o,e.scrollToPos.from),Ve(o,e.scrollToPos.to),e.scrollToPos.margin));var a=e.maybeHiddenMarkers,c=e.maybeUnhiddenMarkers;if(a)for(var g=0;g<a.length;++g)a[g].lines.length||Ct(a[g],"hide");if(c)for(var _=0;_<c.length;++_)c[_].lines.length&&Ct(c[_],"unhide");i.wrapper.offsetHeight&&(o.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ct(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function lr(e,t){if(e.curOp)return t();cn(e);try{return t()}finally{fn(e)}}function Ht(e,t){return function(){if(e.curOp)return t.apply(e,arguments);cn(e);try{return t.apply(e,arguments)}finally{fn(e)}}}function er(e){return function(){if(this.curOp)return e.apply(this,arguments);cn(this);try{return e.apply(this,arguments)}finally{fn(this)}}}function Dt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);cn(t);try{return e.apply(this,arguments)}finally{fn(t)}}}function xi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,Pt(pl,e))}function pl(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,o=Ur(e,t.highlightFrontier),a=[];t.iter(o.line,Math.min(t.first+t.size,e.display.viewTo+500),function(c){if(o.line>=e.display.viewFrom){var g=c.styles,_=c.text.length>e.options.maxHighlightLength?Er(t.mode,o.state):null,S=Gi(e,c,o,!0);_&&(o.state=_),c.styles=S.styles;var w=c.styleClasses,O=S.classes;O?c.styleClasses=O:w&&(c.styleClasses=null);for(var T=!g||g.length!=c.styles.length||w!=O&&(!w||!O||w.bgClass!=O.bgClass||w.textClass!=O.textClass),H=0;!T&&H<g.length;++H)T=g[H]!=c.styles[H];T&&a.push(o.line),c.stateAfter=o.save(),o.nextLine()}else c.text.length<=e.options.maxHighlightLength&&bn(e,c.text,o),c.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>i)return xi(e,e.options.workDelay),!0}),t.highlightFrontier=o.line,t.modeFrontier=Math.max(t.modeFrontier,o.line),a.length&&lr(e,function(){for(var c=0;c<a.length;c++)Vr(e,a[c],"text")})}}var so=function(e,t,i){var o=e.display;this.viewport=t,this.visible=io(o,e.doc,t),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=nn(e),this.force=i,this.dims=Ho(e),this.events=[]};function Ko(e,t){var i=e.display,o=e.doc;if(t.editorIsHidden)return jr(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&Ls(e)==0)return!1;qs(e)&&(jr(e),t.dims=Ho(e));var a=o.first+o.size,c=Math.max(t.visible.from-e.options.viewportMargin,o.first),g=Math.min(a,t.visible.to+e.options.viewportMargin);i.viewFrom<c&&c-i.viewFrom<20&&(c=Math.max(o.first,i.viewFrom)),i.viewTo>g&&i.viewTo-g<20&&(g=Math.min(a,i.viewTo)),Nt&&(c=En(e.doc,c),g=s(e.doc,g));var _,S,w,O,T=c!=i.viewFrom||g!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;S=c,w=g,(O=(_=e).display).view.length==0||S>=O.viewTo||w<=O.viewFrom?(O.view=Pe(_,S,w),O.viewFrom=S):(O.viewFrom>S?O.view=Pe(_,S,O.viewFrom).concat(O.view):O.viewFrom<S&&(O.view=O.view.slice(an(_,S))),O.viewFrom=S,O.viewTo<w?O.view=O.view.concat(Pe(_,O.viewTo,w)):O.viewTo>w&&(O.view=O.view.slice(0,an(_,w)))),O.viewTo=w,i.viewOffset=m(Ee(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var H=Ls(e);if(!T&&H==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var V=function(W){if(W.hasFocus())return null;var D=Qe();if(!D||!It(W.display.lineDiv,D))return null;var P={activeElt:D};if(window.getSelection){var G=window.getSelection();G.anchorNode&&G.extend&&It(W.display.lineDiv,G.anchorNode)&&(P.anchorNode=G.anchorNode,P.anchorOffset=G.anchorOffset,P.focusNode=G.focusNode,P.focusOffset=G.focusOffset)}return P}(e);return 4<H&&(i.lineDiv.style.display="none"),function(W,D,P){var G=W.display,q=W.options.lineNumbers,X=G.lineDiv,ee=X.firstChild;function Y($e){var Re=$e.nextSibling;return E&&re&&W.display.currentWheelTarget==$e?$e.style.display="none":$e.parentNode.removeChild($e),Re}for(var se=G.view,me=G.viewFrom,we=0;we<se.length;we++){var ve=se[we];if(!ve.hidden)if(ve.node&&ve.node.parentNode==X){for(;ee!=ve.node;)ee=Y(ee);var Oe=q&&D!=null&&D<=me&&ve.lineNumber;ve.changes&&(-1<Et(ve.changes,"gutter")&&(Oe=!1),zt(W,ve,me,P)),Oe&&(wt(ve.lineNumber),ve.lineNumber.appendChild(document.createTextNode(ti(W.options,me)))),ee=ve.node.nextSibling}else{var Je=(He=me,Te=P,ft=Ye(tt=W,Ne=ve),Ne.text=Ne.node=ft.pre,ft.bgClass&&(Ne.bgClass=ft.bgClass),ft.textClass&&(Ne.textClass=ft.textClass),Vt(tt,Ne),Lt(tt,Ne,He,Te),zr(tt,Ne,Te),Ne.node);X.insertBefore(Je,ee)}me+=ve.size}for(var tt,Ne,He,Te,ft;ee;)ee=Y(ee)}(e,i.updateLineNumbers,t.dims),4<H&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(W){if(W&&W.activeElt&&W.activeElt!=Qe()&&(W.activeElt.focus(),W.anchorNode&&It(document.body,W.anchorNode)&&It(document.body,W.focusNode))){var D=window.getSelection(),P=document.createRange();P.setEnd(W.anchorNode,W.anchorOffset),P.collapse(!1),D.removeAllRanges(),D.addRange(P),D.extend(W.focusNode,W.focusOffset)}}(V),wt(i.cursorDiv),wt(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,T&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,xi(e,400)),!(i.updateLineNumbers=null)}function Ks(e,t){for(var i=t.viewport,o=!0;;o=!1){if(o&&e.options.lineWrapping&&t.oldDisplayWidth!=nn(e))o&&(t.visible=io(e.display,e.doc,i));else if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+Io(e.display)-Oo(e),i.top)}),t.visible=io(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Ko(e,t))break;no(e);var a=bi(e);mi(e),Nn(e,a),Go(e,a),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function $o(e,t){var i=new so(e,t);if(Ko(e,i)){no(e),Ks(e,i);var o=bi(e);mi(e),Nn(e,o),Go(e,o),i.finish()}}function qo(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function Go(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ar(e)+"px"}function $s(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var o=Do(t)-t.scroller.scrollLeft+e.doc.scrollLeft,a=t.gutters.offsetWidth,c=o+"px",g=0;g<i.length;g++)if(!i[g].hidden){e.options.fixedGutter&&(i[g].gutter&&(i[g].gutter.style.left=c),i[g].gutterBackground&&(i[g].gutterBackground.style.left=c));var _=i[g].alignable;if(_)for(var S=0;S<_.length;S++)_[S].style.left=c}e.options.fixedGutter&&(t.gutters.style.left=o+a+"px")}}function qs(e){if(e.options.lineNumbers){var t=e.doc,i=ti(e.options,t.first+t.size-1),o=e.display;if(i.length!=o.lineNumChars){var a=o.measure.appendChild(_e("div",[_e("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=a.firstChild.offsetWidth,g=a.offsetWidth-c;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(c,o.lineGutter.offsetWidth-g)+1,o.lineNumWidth=o.lineNumInnerWidth+g,o.lineNumChars=o.lineNumInnerWidth?i.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",qo(e.display),1}}}function Zo(e,t){for(var i=[],o=!1,a=0;a<e.length;a++){var c=e[a],g=null;if(typeof c!="string"&&(g=c.style,c=c.className),c=="CodeMirror-linenumbers"){if(!t)continue;o=!0}i.push({className:c,style:g})}return t&&!o&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function Gs(e){var t=e.gutters,i=e.gutterSpecs;wt(t),e.lineGutter=null;for(var o=0;o<i.length;++o){var a=i[o],c=a.className,g=a.style,_=t.appendChild(_e("div",null,"CodeMirror-gutter "+c));g&&(_.style.cssText=g),c=="CodeMirror-linenumbers"&&((e.lineGutter=_).style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",qo(e)}function Ci(e){Gs(e.display),nr(e),$s(e)}function gl(e,t,i,o){var a=this;this.input=i,a.scrollbarFiller=_e("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=_e("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=Jt("div",null,"CodeMirror-code"),a.selectionDiv=_e("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=_e("div",null,"CodeMirror-cursors"),a.measure=_e("div",null,"CodeMirror-measure"),a.lineMeasure=_e("div",null,"CodeMirror-measure"),a.lineSpace=Jt("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var c=Jt("div",[a.lineSpace],"CodeMirror-lines");a.mover=_e("div",[c],null,"position: relative"),a.sizer=_e("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=_e("div",null,null,"position: absolute; height: "+Qr+"px; width: 1px;"),a.gutters=_e("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=_e("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=_e("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),x&&k<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),E||l&&xe||(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=t.first,a.reportedViewFrom=a.reportedViewTo=t.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=Zo(o.gutters,o.lineNumbers),Gs(a),i.init(a)}so.prototype.signal=function(e,t){rr(e,t)&&this.events.push(arguments)},so.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Ct.apply(null,this.events[e])};var ao=0,pr=null;function Zs(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function ml(e){var t=Zs(e);return t.x*=pr,t.y*=pr,t}function Ys(e,t){var i=Zs(t),o=i.x,a=i.y,c=e.display,g=c.scroller,_=g.scrollWidth>g.clientWidth,S=g.scrollHeight>g.clientHeight;if(o&&_||a&&S){if(a&&re&&E){e:for(var w=t.target,O=c.view;w!=g;w=w.parentNode)for(var T=0;T<O.length;T++)if(O[T].node==w){e.display.currentWheelTarget=w;break e}}if(o&&!l&&!F&&pr!=null)return a&&S&&_i(e,Math.max(0,g.scrollTop+a*pr)),ln(e,Math.max(0,g.scrollLeft+o*pr)),(!a||a&&S)&&Gt(t),void(c.wheelStartX=null);if(a&&pr!=null){var H=a*pr,V=e.doc.scrollTop,W=V+c.wrapper.clientHeight;H<0?V=Math.max(0,V+H-50):W=Math.min(e.doc.height,W+H+50),$o(e,{top:V,bottom:W})}ao<20&&(c.wheelStartX==null?(c.wheelStartX=g.scrollLeft,c.wheelStartY=g.scrollTop,c.wheelDX=o,c.wheelDY=a,setTimeout(function(){if(c.wheelStartX!=null){var D=g.scrollLeft-c.wheelStartX,P=g.scrollTop-c.wheelStartY,G=P&&c.wheelDY&&P/c.wheelDY||D&&c.wheelDX&&D/c.wheelDX;c.wheelStartX=c.wheelStartY=null,G&&(pr=(pr*ao+G)/(ao+1),++ao)}},200)):(c.wheelDX+=o,c.wheelDY+=a))}}x?pr=-.53:l?pr=15:z?pr=-.7:Z&&(pr=-1/3);var gr=function(e,t){this.ranges=e,this.primIndex=t};gr.prototype.primary=function(){return this.ranges[this.primIndex]},gr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],o=e.ranges[t];if(!vn(i.anchor,o.anchor)||!vn(i.head,o.head))return!1}return!0},gr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ct(ri(this.ranges[t].anchor),ri(this.ranges[t].head));return new gr(e,this.primIndex)},gr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},gr.prototype.contains=function(e,t){t=t||e;for(var i=0;i<this.ranges.length;i++){var o=this.ranges[i];if(0<=ze(t,o.from())&&ze(e,o.to())<=0)return i}return-1};var ct=function(e,t){this.anchor=e,this.head=t};function Cr(e,t,i){var o=e&&e.options.selectionsMayTouch,a=t[i];t.sort(function(H,V){return ze(H.from(),V.from())}),i=Et(t,a);for(var c=1;c<t.length;c++){var g=t[c],_=t[c-1],S=ze(_.to(),g.from());if(o&&!g.empty()?0<S:0<=S){var w=dt(_.from(),g.from()),O=yn(_.to(),g.to()),T=_.empty()?g.from()==g.head:_.from()==_.head;c<=i&&--i,t.splice(--c,2,new ct(T?O:w,T?w:O))}}return new gr(t,i)}function Kr(e,t){return new gr([new ct(e,t||e)],0)}function $r(e){return e.text?oe(e.from.line+e.text.length-1,N(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Js(e,t){if(ze(e,t.from)<0)return e;if(ze(e,t.to)<=0)return $r(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,o=e.ch;return e.line==t.to.line&&(o+=$r(t).ch-t.to.ch),oe(i,o)}function Yo(e,t){for(var i=[],o=0;o<e.sel.ranges.length;o++){var a=e.sel.ranges[o];i.push(new ct(Js(a.anchor,t),Js(a.head,t)))}return Cr(e.cm,i,e.sel.primIndex)}function Xs(e,t,i){return e.line==t.line?oe(i.line,e.ch-t.ch+i.ch):oe(i.line+(e.line-t.line),e.ch)}function Jo(e){e.doc.mode=Xn(e.options,e.doc.modeOption),Si(e)}function Si(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,xi(e,100),e.state.modeGen++,e.curOp&&nr(e)}function Qs(e,t){return t.from.ch==0&&t.to.ch==0&&N(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Xo(e,t,i,o){function a(q){return i?i[q]:null}function c(q,X,ee){(function(Y,se,me,we){Y.text=se,Y.stateAfter&&(Y.stateAfter=null),Y.styles&&(Y.styles=null),Y.order!=null&&(Y.order=null),Ji(Y),Xi(Y,me);var ve=we?we(Y):1;ve!=Y.height&&_r(Y,ve)})(q,X,ee,o),ht(q,"change",q,t)}function g(q,X){for(var ee=[],Y=q;Y<X;++Y)ee.push(new M(w[Y],a(Y),o));return ee}var _=t.from,S=t.to,w=t.text,O=Ee(e,_.line),T=Ee(e,S.line),H=N(w),V=a(w.length-1),W=S.line-_.line;if(t.full)e.insert(0,g(0,w.length)),e.remove(w.length,e.size-w.length);else if(Qs(e,t)){var D=g(0,w.length-1);c(T,T.text,V),W&&e.remove(_.line,W),D.length&&e.insert(_.line,D)}else if(O==T)if(w.length==1)c(O,O.text.slice(0,_.ch)+H+O.text.slice(S.ch),V);else{var P=g(1,w.length-1);P.push(new M(H+O.text.slice(S.ch),V,o)),c(O,O.text.slice(0,_.ch)+w[0],a(0)),e.insert(_.line+1,P)}else if(w.length==1)c(O,O.text.slice(0,_.ch)+w[0]+T.text.slice(S.ch),a(0)),e.remove(_.line+1,W);else{c(O,O.text.slice(0,_.ch)+w[0],a(0)),c(T,H+T.text.slice(S.ch),V);var G=g(1,w.length-1);1<W&&e.remove(_.line+1,W-1),e.insert(_.line+1,G)}ht(e,"change",e,t)}function qr(e,t,i){(function o(a,c,g){if(a.linked)for(var _=0;_<a.linked.length;++_){var S=a.linked[_];if(S.doc!=c){var w=g&&S.sharedHist;i&&!w||(t(S.doc,w),o(S.doc,a,w))}}})(e,null,!0)}function ea(e,t){if(t.cm)throw new Error("This document is already in use.");Wo((e.doc=t).cm=e),Jo(e),ta(e),e.options.lineWrapping||b(e),e.options.mode=t.modeOption,nr(e)}function ta(e){(e.doc.direction=="rtl"?Ke:Mt)(e.display.lineDiv,"CodeMirror-rtl")}function lo(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Qo(e,t){var i={from:ri(t.from),to:$r(t),text:Zt(e,t.from,t.to)};return ia(e,i,t.from.line,t.to.line+1),qr(e,function(o){return ia(o,i,t.from.line,t.to.line+1)},!0),i}function ra(e){for(;e.length&&N(e).ranges;)e.pop()}function na(e,t,i,o){var a=e.history;a.undone.length=0;var c,g,_,S=+new Date;if((a.lastOp==o||a.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&a.lastModTime>S-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(c=(_=a).lastOp==o?(ra(_.done),N(_.done)):_.done.length&&!N(_.done).ranges?N(_.done):1<_.done.length&&!_.done[_.done.length-2].ranges?(_.done.pop(),N(_.done)):void 0))g=N(c.changes),ze(t.from,t.to)==0&&ze(t.from,g.to)==0?g.to=$r(t):c.changes.push(Qo(e,t));else{var w=N(a.done);for(w&&w.ranges||uo(e.sel,a.done),c={changes:[Qo(e,t)],generation:a.generation},a.done.push(c);a.done.length>a.undoDepth;)a.done.shift(),a.done[0].ranges||a.done.shift()}a.done.push(i),a.generation=++a.maxGeneration,a.lastModTime=a.lastSelTime=S,a.lastOp=a.lastSelOp=o,a.lastOrigin=a.lastSelOrigin=t.origin,g||Ct(e,"historyAdded")}function vl(e,t,i,o){var a,c,g,_,S,w=e.history,O=o&&o.origin;i==w.lastSelOp||O&&w.lastSelOrigin==O&&(w.lastModTime==w.lastSelTime&&w.lastOrigin==O||(a=e,c=O,g=N(w.done),_=t,(S=c.charAt(0))=="*"||S=="+"&&g.ranges.length==_.ranges.length&&g.somethingSelected()==_.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)))?w.done[w.done.length-1]=t:uo(t,w.done),w.lastSelTime=+new Date,w.lastSelOrigin=O,w.lastSelOp=i,o&&o.clearRedo!==!1&&ra(w.undone)}function uo(e,t){var i=N(t);i&&i.ranges&&i.equals(e)||t.push(e)}function ia(e,t,i,o){var a=t["spans_"+e.id],c=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,o),function(g){g.markedSpans&&((a=a||(t["spans_"+e.id]={}))[c]=g.markedSpans),++c})}function yl(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t=t||e.slice(0,i):t&&t.push(e[i]);return t?t.length?t:null:e}function oa(e,t){var i=function(O,T){var H=T["spans_"+O.id];if(!H)return null;for(var V=[],W=0;W<T.text.length;++W)V.push(yl(H[W]));return V}(e,t),o=ui(e,t);if(!i)return o;if(!o)return i;for(var a=0;a<i.length;++a){var c=i[a],g=o[a];if(c&&g)e:for(var _=0;_<g.length;++_){for(var S=g[_],w=0;w<c.length;++w)if(c[w].marker==S.marker)continue e;c.push(S)}else g&&(i[a]=g)}return i}function Ln(e,t,i){for(var o=[],a=0;a<e.length;++a){var c=e[a];if(c.ranges)o.push(i?gr.prototype.deepCopy.call(c):c);else{var g=c.changes,_=[];o.push({changes:_});for(var S=0;S<g.length;++S){var w=g[S],O=void 0;if(_.push({from:w.from,to:w.to,text:w.text}),t)for(var T in w)(O=T.match(/^spans_(\d+)$/))&&-1<Et(t,Number(O[1]))&&(N(_)[T]=w[T],delete w[T])}}}return o}function es(e,t,i,o){if(o){var a=e.anchor;if(i){var c=ze(t,a)<0;c!=ze(i,a)<0?(a=t,t=i):c!=ze(t,i)<0&&(t=i)}return new ct(a,t)}return new ct(i||t,t)}function co(e,t,i,o,a){a==null&&(a=e.cm&&(e.cm.display.shift||e.extend)),Yt(e,new gr([es(e.sel.primary(),t,i,a)],0),o)}function sa(e,t,i){for(var o=[],a=e.cm&&(e.cm.display.shift||e.extend),c=0;c<e.sel.ranges.length;c++)o[c]=es(e.sel.ranges[c],t[c],null,a);Yt(e,Cr(e.cm,o,e.sel.primIndex),i)}function ts(e,t,i,o){var a=e.sel.ranges.slice(0);a[t]=i,Yt(e,Cr(e.cm,a,e.sel.primIndex),o)}function aa(e,t,i,o){Yt(e,Kr(t,i),o)}function la(e,t,i){var o=e.history.done,a=N(o);a&&a.ranges?fo(e,o[o.length-1]=t,i):Yt(e,t,i)}function Yt(e,t,i){fo(e,t,i),vl(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function fo(e,t,i){var o,a,c,g;(rr(e,"beforeSelectionChange")||e.cm&&rr(e.cm,"beforeSelectionChange"))&&(o=e,c=i,g={ranges:(a=t).ranges,update:function(S){this.ranges=[];for(var w=0;w<S.length;w++)this.ranges[w]=new ct(Ve(o,S[w].anchor),Ve(o,S[w].head))},origin:c&&c.origin},Ct(o,"beforeSelectionChange",o,g),o.cm&&Ct(o.cm,"beforeSelectionChange",o.cm,g),t=g.ranges!=a.ranges?Cr(o.cm,g.ranges,g.ranges.length-1):a);var _=i&&i.bias||(ze(t.primary().head,e.sel.primary().head)<0?-1:1);ua(e,fa(e,t,_,!0)),i&&i.scroll===!1||!e.cm||Rn(e.cm)}function ua(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,$n(e.cm)),ht(e,"cursorActivity",e))}function ca(e){ua(e,fa(e,e.sel,null,!1))}function fa(e,t,i,o){for(var a,c=0;c<t.ranges.length;c++){var g=t.ranges[c],_=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[c],S=ho(e,g.anchor,_&&_.anchor,i,o),w=ho(e,g.head,_&&_.head,i,o);!a&&S==g.anchor&&w==g.head||((a=a||t.ranges.slice(0,c))[c]=new ct(S,w))}return a?Cr(e.cm,a,t.primIndex):t}function Pn(e,t,i,o,a){var c=Ee(e,t.line);if(c.markedSpans)for(var g=0;g<c.markedSpans.length;++g){var _=c.markedSpans[g],S=_.marker,w="selectLeft"in S?!S.selectLeft:S.inclusiveLeft,O="selectRight"in S?!S.selectRight:S.inclusiveRight;if((_.from==null||(w?_.from<=t.ch:_.from<t.ch))&&(_.to==null||(O?_.to>=t.ch:_.to>t.ch))){if(a&&(Ct(S,"beforeCursorEnter"),S.explicitlyCleared)){if(c.markedSpans){--g;continue}break}if(!S.atomic)continue;if(i){var T=S.find(o<0?1:-1),H=void 0;if((o<0?O:w)&&(T=da(e,T,-o,T&&T.line==t.line?c:null)),T&&T.line==t.line&&(H=ze(T,i))&&(o<0?H<0:0<H))return Pn(e,T,t,o,a)}var V=S.find(o<0?-1:1);return(o<0?w:O)&&(V=da(e,V,o,V.line==t.line?c:null)),V?Pn(e,V,t,o,a):null}}return t}function ho(e,t,i,o,a){var c=o||1,g=Pn(e,t,i,c,a)||!a&&Pn(e,t,i,c,!0)||Pn(e,t,i,-c,a)||!a&&Pn(e,t,i,-c,!0);return g||(e.cantEdit=!0,oe(e.first,0))}function da(e,t,i,o){return i<0&&t.ch==0?t.line>e.first?Ve(e,oe(t.line-1)):null:0<i&&t.ch==(o||Ee(e,t.line)).text.length?t.line<e.first+e.size-1?oe(t.line+1,0):null:new oe(t.line,t.ch+i)}function ha(e){e.setSelection(oe(e.firstLine(),0),oe(e.lastLine()),Rt)}function pa(e,t,i){var o={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return o.canceled=!0}};return i&&(o.update=function(a,c,g,_){a&&(o.from=Ve(e,a)),c&&(o.to=Ve(e,c)),g&&(o.text=g),_!==void 0&&(o.origin=_)}),Ct(e,"beforeChange",e,o),e.cm&&Ct(e.cm,"beforeChange",e.cm,o),o.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Fn(e,t,i){if(e.cm){if(!e.cm.curOp)return Ht(e.cm,Fn)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(rr(e,"beforeChange")||e.cm&&rr(e.cm,"beforeChange"))||(t=pa(e,t,!0))){var o=li&&!i&&function(c,g,_){var S=null;if(c.iter(g.line,_.line+1,function(q){if(q.markedSpans)for(var X=0;X<q.markedSpans.length;++X){var ee=q.markedSpans[X].marker;!ee.readOnly||S&&Et(S,ee)!=-1||(S=S||[]).push(ee)}}),!S)return null;for(var w=[{from:g,to:_}],O=0;O<S.length;++O)for(var T=S[O],H=T.find(0),V=0;V<w.length;++V){var W=w[V];if(!(ze(W.to,H.from)<0||0<ze(W.from,H.to))){var D=[V,1],P=ze(W.from,H.from),G=ze(W.to,H.to);(P<0||!T.inclusiveLeft&&!P)&&D.push({from:W.from,to:H.from}),(0<G||!T.inclusiveRight&&!G)&&D.push({from:H.to,to:W.to}),w.splice.apply(w,D),V+=D.length-3}}return w}(e,t.from,t.to);if(o)for(var a=o.length-1;0<=a;--a)ga(e,{from:o[a].from,to:o[a].to,text:a?[""]:t.text,origin:t.origin});else ga(e,t)}}function ga(e,t){if(t.text.length!=1||t.text[0]!=""||ze(t.from,t.to)!=0){var i=Yo(e,t);na(e,t,i,e.cm?e.cm.curOp.id:NaN),ki(e,t,i,ui(e,t));var o=[];qr(e,function(a,c){c||Et(o,a.history)!=-1||(_a(a.history,t),o.push(a.history)),ki(a,t,null,ui(a,t))})}}function po(e,t,i){var o=e.cm&&e.cm.state.suppressEdits;if(!o||i){for(var a,c=e.history,g=e.sel,_=t=="undo"?c.done:c.undone,S=t=="undo"?c.undone:c.done,w=0;w<_.length&&(a=_[w],i?!a.ranges||a.equals(e.sel):a.ranges);w++);if(w!=_.length){for(c.lastOrigin=c.lastSelOrigin=null;;){if(!(a=_.pop()).ranges){if(o)return void _.push(a);break}if(uo(a,S),i&&!a.equals(e.sel))return void Yt(e,a,{clearRedo:!1});g=a}var O=[];uo(g,S),S.push({changes:O,generation:c.generation}),c.generation=a.generation||++c.maxGeneration;for(var T=rr(e,"beforeChange")||e.cm&&rr(e.cm,"beforeChange"),H=function(D){var P=a.changes[D];if(P.origin=t,T&&!pa(e,P,!1))return _.length=0,{};O.push(Qo(e,P));var G=D?Yo(e,P):N(_);ki(e,P,G,oa(e,P)),!D&&e.cm&&e.cm.scrollIntoView({from:P.from,to:$r(P)});var q=[];qr(e,function(X,ee){ee||Et(q,X.history)!=-1||(_a(X.history,P),q.push(X.history)),ki(X,P,null,oa(X,P))})},V=a.changes.length-1;0<=V;--V){var W=H(V);if(W)return W.v}}}}function ma(e,t){if(t!=0&&(e.first+=t,e.sel=new gr($(e.sel.ranges,function(a){return new ct(oe(a.anchor.line+t,a.anchor.ch),oe(a.head.line+t,a.head.ch))}),e.sel.primIndex),e.cm)){nr(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,o=i.viewFrom;o<i.viewTo;o++)Vr(e.cm,o,"gutter")}}function ki(e,t,i,o){if(e.cm&&!e.cm.curOp)return Ht(e.cm,ki)(e,t,i,o);if(t.to.line<e.first)ma(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var a=t.text.length-1-(e.first-t.from.line);ma(e,a),t={from:oe(e.first,0),to:oe(t.to.line+a,t.to.ch),text:[N(t.text)],origin:t.origin}}var c=e.lastLine();t.to.line>c&&(t={from:t.from,to:oe(c,Ee(e,c).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Zt(e,t.from,t.to),i=i||Yo(e,t),e.cm?function(g,_,S){var w=g.doc,O=g.display,T=_.from,H=_.to,V=!1,W=T.line;g.options.lineWrapping||(W=ut(hr(Ee(w,T.line))),w.iter(W,H.line+1,function(X){if(X==O.maxLine)return V=!0})),-1<w.sel.contains(_.from,_.to)&&$n(g),Xo(w,_,S,Ns(g)),g.options.lineWrapping||(w.iter(W,T.line+_.text.length,function(X){var ee=y(X);ee>O.maxLineLength&&(O.maxLine=X,O.maxLineLength=ee,O.maxLineChanged=!0,V=!1)}),V&&(g.curOp.updateMaxLine=!0)),function(X,ee){if(X.modeFrontier=Math.min(X.modeFrontier,ee),!(X.highlightFrontier<ee-10)){for(var Y=X.first,se=ee-1;Y<se;se--){var me=Ee(X,se).stateAfter;if(me&&(!(me instanceof _n)||se+me.lookAhead<ee)){Y=se+1;break}}X.highlightFrontier=Math.min(X.highlightFrontier,Y)}}(w,T.line),xi(g,400);var D=_.text.length-(H.line-T.line)-1;_.full?nr(g):T.line!=H.line||_.text.length!=1||Qs(g.doc,_)?nr(g,T.line,H.line+1,D):Vr(g,T.line,"text");var P=rr(g,"changes"),G=rr(g,"change");if(G||P){var q={from:T,to:H,text:_.text,removed:_.removed,origin:_.origin};G&&ht(g,"change",g,q),P&&(g.curOp.changeObjs||(g.curOp.changeObjs=[])).push(q)}g.display.selForContextMenu=null}(e.cm,t,o):Xo(e,t,o),fo(e,i,Rt),e.cantEdit&&ho(e,oe(e.firstLine(),0))&&(e.cantEdit=!1)}}function Bn(e,t,i,o,a){var c;ze(o=o||i,i)<0&&(i=(c=[o,i])[0],o=c[1]),typeof t=="string"&&(t=e.splitLines(t)),Fn(e,{from:i,to:o,text:t,origin:a})}function va(e,t,i,o){i<e.line?e.line+=o:t<e.line&&(e.line=t,e.ch=0)}function ya(e,t,i,o){for(var a=0;a<e.length;++a){var c=e[a],g=!0;if(c.ranges){c.copied||((c=e[a]=c.deepCopy()).copied=!0);for(var _=0;_<c.ranges.length;_++)va(c.ranges[_].anchor,t,i,o),va(c.ranges[_].head,t,i,o)}else{for(var S=0;S<c.changes.length;++S){var w=c.changes[S];if(i<w.from.line)w.from=oe(w.from.line+o,w.from.ch),w.to=oe(w.to.line+o,w.to.ch);else if(t<=w.to.line){g=!1;break}}g||(e.splice(0,a+1),a=0)}}}function _a(e,t){var i=t.from.line,o=t.to.line,a=t.text.length-(o-i)-1;ya(e.done,i,o,a),ya(e.undone,i,o,a)}function Mi(e,t,i,o){var a=t,c=t;return typeof t=="number"?c=Ee(e,qi(e,t)):a=ut(t),a==null?null:(o(c,a)&&e.cm&&Vr(e.cm,a,i),c)}function Ei(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function Ti(e){this.children=e;for(var t=0,i=0,o=0;o<e.length;++o){var a=e[o];t+=a.chunkSize(),i+=a.height,a.parent=this}this.size=t,this.height=i,this.parent=null}ct.prototype.from=function(){return dt(this.anchor,this.head)},ct.prototype.to=function(){return yn(this.anchor,this.head)},ct.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ei.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,o=e+t;i<o;++i){var a=this.lines[i];this.height-=a.height,(c=a).parent=null,Ji(c),ht(a,"delete")}var c;this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var o=0;o<t.length;++o)t[o].parent=this},iterN:function(e,t,i){for(var o=e+t;e<o;++e)if(i(this.lines[e]))return!0}},Ti.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var o=this.children[i],a=o.chunkSize();if(e<a){var c=Math.min(t,a-e),g=o.height;if(o.removeInner(e,c),this.height-=g-o.height,a==c&&(this.children.splice(i--,1),o.parent=null),(t-=c)==0)break;e=0}else e-=a}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof Ei))){var _=[];this.collapse(_),this.children=[new Ei(_)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var o=0;o<this.children.length;++o){var a=this.children[o],c=a.chunkSize();if(e<=c){if(a.insertInner(e,t,i),a.lines&&50<a.lines.length){for(var g=a.lines.length%25+25,_=g;_<a.lines.length;){var S=new Ei(a.lines.slice(_,_+=25));a.height-=S.height,this.children.splice(++o,0,S),S.parent=this}a.lines=a.lines.slice(0,g),this.maybeSpill()}break}e-=c}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Ti(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var i=Et(e.parent.children,e);e.parent.children.splice(i+1,0,t)}else{var o=new Ti(e.children);(o.parent=e).children=[o,t],e=o}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var o=0;o<this.children.length;++o){var a=this.children[o],c=a.chunkSize();if(e<c){var g=Math.min(t,c-e);if(a.iterN(e,g,i))return!0;if((t-=g)==0)break;e=0}else e-=c}}};function Ai(e,t,i){if(i)for(var o in i)i.hasOwnProperty(o)&&(this[o]=i[o]);this.doc=e,this.node=t}function ba(e,t,i){m(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&jo(e,i)}Ai.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,o=ut(i);if(o!=null&&t){for(var a=0;a<t.length;++a)t[a]==this&&t.splice(a--,1);t.length||(i.widgets=null);var c=pi(this);_r(i,Math.max(0,i.height-c)),e&&(lr(e,function(){ba(e,i,-c),Vr(e,o,"widget")}),ht(e,"lineWidgetCleared",e,this,o))}},Ai.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,o=this.line;this.height=null;var a=pi(this)-t;a&&(d(this.doc,o)||_r(o,o.height+a),i&&lr(i,function(){i.curOp.forceUpdate=!0,ba(i,o,a),ht(i,"lineWidgetChanged",i,e,ut(o))}))},Br(Ai);var wa=0,Gr=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++wa};function Hn(e,t,i,o,a){if(o&&o.shared)return function(T,H,V,W,D){(W=Ot(W)).shared=!1;var P=[Hn(T,H,V,W,D)],G=P[0],q=W.widgetNode;return qr(T,function(X){q&&(W.widgetNode=q.cloneNode(!0)),P.push(Hn(X,Ve(X,H),Ve(X,V),W,D));for(var ee=0;ee<X.linked.length;++ee)if(X.linked[ee].isParent)return;G=N(P)}),new Ii(P,G)}(e,t,i,o,a);if(e.cm&&!e.cm.curOp)return Ht(e.cm,Hn)(e,t,i,o,a);var c=new Gr(e,a),g=ze(t,i);if(o&&Ot(o,c,!1),0<g||g==0&&c.clearWhenEmpty!==!1)return c;if(c.replacedWith&&(c.collapsed=!0,c.widgetNode=Jt("span",[c.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||c.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(c.widgetNode.insertLeft=!0)),c.collapsed){if(hi(e,t.line,t,i,c)||t.line!=i.line&&hi(e,i.line,t,i,c))throw new Error("Inserting collapsed marker partially overlapping an existing one");Nt=!0}c.addToHistory&&na(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var _,S=t.line,w=e.cm;if(e.iter(S,i.line+1,function(T){var H,V;w&&c.collapsed&&!w.options.lineWrapping&&hr(T)==w.display.maxLine&&(_=!0),c.collapsed&&S!=t.line&&_r(T,0),H=T,V=new Cn(c,S==t.line?t.ch:null,S==i.line?i.ch:null),H.markedSpans=H.markedSpans?H.markedSpans.concat([V]):[V],V.marker.attachLine(H),++S}),c.collapsed&&e.iter(t.line,i.line+1,function(T){d(e,T)&&_r(T,0)}),c.clearOnEnter&&Be(c,"beforeCursorEnter",function(){return c.clear()}),c.readOnly&&(li=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),c.collapsed&&(c.id=++wa,c.atomic=!0),w){if(_&&(w.curOp.updateMaxLine=!0),c.collapsed)nr(w,t.line,i.line+1);else if(c.className||c.startStyle||c.endStyle||c.css||c.attributes||c.title)for(var O=t.line;O<=i.line;O++)Vr(w,O,"text");c.atomic&&ca(w.doc),ht(w,"markerAdded",w,c)}return c}Gr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&cn(e),rr(this,"clear")){var i=this.find();i&&ht(this,"clear",i.from,i.to)}for(var o=null,a=null,c=0;c<this.lines.length;++c){var g=this.lines[c],_=wr(g.markedSpans,this);e&&!this.collapsed?Vr(e,ut(g),"text"):e&&(_.to!=null&&(a=ut(g)),_.from!=null&&(o=ut(g))),g.markedSpans=Zi(g.markedSpans,_),_.from==null&&this.collapsed&&!d(this.doc,g)&&e&&_r(g,In(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var S=0;S<this.lines.length;++S){var w=hr(this.lines[S]),O=y(w);O>e.display.maxLineLength&&(e.display.maxLine=w,e.display.maxLineLength=O,e.display.maxLineChanged=!0)}o!=null&&e&&this.collapsed&&nr(e,o,a+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ca(e.doc)),e&&ht(e,"markerCleared",e,this,o,a),t&&fn(e),this.parent&&this.parent.clear()}},Gr.prototype.find=function(e,t){var i,o;e==null&&this.type=="bookmark"&&(e=1);for(var a=0;a<this.lines.length;++a){var c=this.lines[a],g=wr(c.markedSpans,this);if(g.from!=null&&(i=oe(t?c:ut(c),g.from),e==-1))return i;if(g.to!=null&&(o=oe(t?c:ut(c),g.to),e==1))return o}return i&&{from:i,to:o}},Gr.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,o=this.doc.cm;t&&o&&lr(o,function(){var a=t.line,c=ut(t.line),g=Ro(o,c);if(g&&(ks(g),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!d(i.doc,a)&&i.height!=null){var _=i.height;i.height=null;var S=pi(i)-_;S&&_r(a,a.height+S)}ht(o,"markerChanged",o,e)})},Gr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&Et(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Gr.prototype.detachLine=function(e){if(this.lines.splice(Et(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Br(Gr);var Ii=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function xa(e){return e.findMarks(oe(e.first,0),e.clipPos(oe(e.lastLine())),function(t){return t.parent})}function _l(e){for(var t=function(o){var a=e[o],c=[a.primary.doc];qr(a.primary.doc,function(S){return c.push(S)});for(var g=0;g<a.markers.length;g++){var _=a.markers[g];Et(c,_.doc)==-1&&(_.parent=null,a.markers.splice(g--,1))}},i=0;i<e.length;i++)t(i)}Ii.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ht(this,"clear")}},Ii.prototype.find=function(e,t){return this.primary.find(e,t)},Br(Ii);var bl=0,ir=function(e,t,i,o,a){if(!(this instanceof ir))return new ir(e,t,i,o,a);i==null&&(i=0),Ti.call(this,[new Ei([new M("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var c=oe(i,0);this.sel=Kr(c),this.history=new lo(null),this.id=++bl,this.modeOption=t,this.lineSep=o,this.direction=a=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Xo(this,{from:c,to:c,text:e}),Yt(this,Kr(c),Rt)};ir.prototype=ne(Ti.prototype,{constructor:ir,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,o=0;o<t.length;++o)i+=t[o].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ei(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Dt(function(e){var t=oe(this.first,0),i=this.first+this.size-1;Fn(this,{from:t,to:oe(i,Ee(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&yi(this.cm,0,0),Yt(this,Kr(t),Rt)}),replaceRange:function(e,t,i,o){Bn(this,e,t=Ve(this,t),i=i?Ve(this,i):t,o)},getRange:function(e,t,i){var o=Zt(this,Ve(this,e),Ve(this,t));return i===!1?o:o.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Wr(this,e))return Ee(this,e)},getLineNumber:function(e){return ut(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Ee(this,e)),hr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ve(this,e)},getCursor:function(e){var t=this.sel.primary();return e==null||e=="head"?t.head:e=="anchor"?t.anchor:e=="end"||e=="to"||e===!1?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Dt(function(e,t,i){aa(this,Ve(this,typeof e=="number"?oe(e,t||0):e),null,i)}),setSelection:Dt(function(e,t,i){aa(this,Ve(this,e),Ve(this,t||e),i)}),extendSelection:Dt(function(e,t,i){co(this,Ve(this,e),t&&Ve(this,t),i)}),extendSelections:Dt(function(e,t){sa(this,tn(this,e),t)}),extendSelectionsBy:Dt(function(e,t){sa(this,tn(this,$(this.sel.ranges,e)),t)}),setSelections:Dt(function(e,t,i){if(e.length){for(var o=[],a=0;a<e.length;a++)o[a]=new ct(Ve(this,e[a].anchor),Ve(this,e[a].head));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Yt(this,Cr(this.cm,o,t),i)}}),addSelection:Dt(function(e,t,i){var o=this.sel.ranges.slice(0);o.push(new ct(Ve(this,e),Ve(this,t||e))),Yt(this,Cr(this.cm,o,o.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,o=0;o<i.length;o++){var a=Zt(this,i[o].from(),i[o].to());t=t?t.concat(a):a}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,o=0;o<i.length;o++){var a=Zt(this,i[o].from(),i[o].to());e!==!1&&(a=a.join(e||this.lineSeparator())),t[o]=a}return t},replaceSelection:function(e,t,i){for(var o=[],a=0;a<this.sel.ranges.length;a++)o[a]=e;this.replaceSelections(o,t,i||"+input")},replaceSelections:Dt(function(e,t,i){for(var o=[],a=this.sel,c=0;c<a.ranges.length;c++){var g=a.ranges[c];o[c]={from:g.from(),to:g.to(),text:this.splitLines(e[c]),origin:i}}for(var _=t&&t!="end"&&function(w,O,T){for(var H=[],V=oe(w.first,0),W=V,D=0;D<O.length;D++){var P=O[D],G=Xs(P.from,V,W),q=Xs($r(P),V,W);if(V=P.to,W=q,T=="around"){var X=w.sel.ranges[D],ee=ze(X.head,X.anchor)<0;H[D]=new ct(ee?q:G,ee?G:q)}else H[D]=new ct(G,G)}return new gr(H,w.sel.primIndex)}(this,o,t),S=o.length-1;0<=S;S--)Fn(this,o[S]);_?la(this,_):this.cm&&Rn(this.cm)}),undo:Dt(function(){po(this,"undo")}),redo:Dt(function(){po(this,"redo")}),undoSelection:Dt(function(){po(this,"undo",!0)}),redoSelection:Dt(function(){po(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,o=0;o<e.done.length;o++)e.done[o].ranges||++t;for(var a=0;a<e.undone.length;a++)e.undone[a].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new lo(this.history.maxGeneration),qr(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ln(this.history.done),undone:Ln(this.history.undone)}},setHistory:function(e){var t=this.history=new lo(this.history.maxGeneration);t.done=Ln(e.done.slice(0),null,!0),t.undone=Ln(e.undone.slice(0),null,!0)},setGutterMarker:Dt(function(e,t,i){return Mi(this,e,"gutter",function(o){var a=o.gutterMarkers||(o.gutterMarkers={});return!(a[t]=i)&&pe(a)&&(o.gutterMarkers=null),1})}),clearGutter:Dt(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&Mi(t,i,"gutter",function(){return i.gutterMarkers[e]=null,pe(i.gutterMarkers)&&(i.gutterMarkers=null),1})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!Wr(this,e)||!(e=Ee(this,t=e)))return null}else if((t=ut(e))==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Dt(function(e,t,i){return Mi(this,e,t=="gutter"?"gutter":"class",function(o){var a=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(o[a]){if(yt(i).test(o[a]))return;o[a]+=" "+i}else o[a]=i;return 1})}),removeLineClass:Dt(function(e,t,i){return Mi(this,e,t=="gutter"?"gutter":"class",function(o){var a=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",c=o[a];if(c){if(i==null)o[a]=null;else{var g=c.match(yt(i));if(!g)return;var _=g.index+g[0].length;o[a]=c.slice(0,g.index)+(g.index&&_!=c.length?" ":"")+c.slice(_)||null}return 1}})}),addLineWidget:Dt(function(e,t,i){return a=e,c=new Ai(o=this,t,i),(g=o.cm)&&c.noHScroll&&(g.display.alignWidgets=!0),Mi(o,a,"widget",function(_){var S=_.widgets||(_.widgets=[]);if(c.insertAt==null?S.push(c):S.splice(Math.min(S.length-1,Math.max(0,c.insertAt)),0,c),c.line=_,g&&!d(o,_)){var w=m(_)<o.scrollTop;_r(_,_.height+pi(c)),w&&jo(g,c.height),g.curOp.forceUpdate=!0}return 1}),g&&ht(g,"lineWidgetAdded",g,c,typeof a=="number"?a:ut(a)),c;var o,a,c,g}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Hn(this,Ve(this,e),Ve(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Hn(this,e=Ve(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=Ee(this,(e=Ve(this,e)).line).markedSpans;if(i)for(var o=0;o<i.length;++o){var a=i[o];(a.from==null||a.from<=e.ch)&&(a.to==null||a.to>=e.ch)&&t.push(a.marker.parent||a.marker)}return t},findMarks:function(e,t,i){e=Ve(this,e),t=Ve(this,t);var o=[],a=e.line;return this.iter(e.line,t.line+1,function(c){var g=c.markedSpans;if(g)for(var _=0;_<g.length;_++){var S=g[_];S.to!=null&&a==e.line&&e.ch>=S.to||S.from==null&&a!=e.line||S.from!=null&&a==t.line&&S.from>=t.ch||i&&!i(S.marker)||o.push(S.marker.parent||S.marker)}++a}),o},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var o=0;o<i.length;++o)i[o].from!=null&&e.push(i[o].marker)}),e},posFromIndex:function(e){var t,i=this.first,o=this.lineSeparator().length;return this.iter(function(a){var c=a.text.length+o;if(e<c)return t=e,!0;e-=c,++i}),Ve(this,oe(i,t))},indexFromPos:function(e){var t=(e=Ve(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(o){t+=o.text.length+i}),t},copy:function(e){var t=new ir(ei(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e=e||{};var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var o=new ir(ei(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:e.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(a,c){for(var g=0;g<c.length;g++){var _=c[g],S=_.find(),w=a.clipPos(S.from),O=a.clipPos(S.to);if(ze(w,O)){var T=Hn(a,w,O,_.primary,_.primary.type);_.markers.push(T),T.parent=_}}}(o,xa(this)),o},unlinkDoc:function(e){if(e instanceof bt&&(e=e.doc),this.linked){for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),_l(xa(this));break}}if(e.history==this.history){var i=[e.id];qr(e,function(o){return i.push(o.id)},!0),e.history=new lo(null),e.history.done=Ln(this.history.done,i),e.history.undone=Ln(this.history.undone,i)}},iterLinkedDocs:function(e){qr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):mn(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Dt(function(e){var t;e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(i){return i.order=null}),this.cm&&lr(t=this.cm,function(){ta(t),nr(t)}))})}),ir.prototype.eachLine=ir.prototype.iter;var Ca=0;function wl(e){var t=this;if(Sa(t),!Tt(t,e)&&!Pr(t.display,e)){Gt(e),x&&(Ca=+new Date);var i=sn(t,e,!0),o=e.dataTransfer.files;if(i&&!t.isReadOnly())if(o&&o.length&&window.FileReader&&window.File)for(var a=o.length,c=Array(a),g=0,_=function(){++g==a&&Ht(t,function(){var V={from:i=Ve(t.doc,i),to:i,text:t.doc.splitLines(c.filter(function(W){return W!=null}).join(t.doc.lineSeparator())),origin:"paste"};Fn(t.doc,V),la(t.doc,Kr(Ve(t.doc,i),Ve(t.doc,$r(V))))})()},S=function(V,W){if(t.options.allowDropFileTypes&&Et(t.options.allowDropFileTypes,V.type)==-1)_();else{var D=new FileReader;D.onerror=function(){return _()},D.onload=function(){var P=D.result;/[\x00-\x08\x0e-\x1f]{2}/.test(P)||(c[W]=P),_()},D.readAsText(V)}},w=0;w<o.length;w++)S(o[w],w);else{if(t.state.draggingText&&-1<t.doc.sel.contains(i))return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var O=e.dataTransfer.getData("Text");if(O){var T;if(t.state.draggingText&&!t.state.draggingText.copy&&(T=t.listSelections()),fo(t.doc,Kr(i,i)),T)for(var H=0;H<T.length;++H)Bn(t.doc,"",T[H].anchor,T[H].head,"drag");t.replaceSelection(O,"around","paste"),t.display.input.focus()}}catch{}}}}function Sa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ka(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],o=0;o<t.length;o++){var a=t[o].CodeMirror;a&&i.push(a)}i.length&&i[0].operation(function(){for(var c=0;c<i.length;c++)e(i[c])})}}var Ma=!1;function xl(){var e;Ma||(Be(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,ka(Cl)},100))}),Be(window,"blur",function(){return ka(vi)}),Ma=!0)}function Cl(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Zr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Oi=0;Oi<10;Oi++)Zr[Oi+48]=Zr[Oi+96]=String(Oi);for(var go=65;go<=90;go++)Zr[go]=String.fromCharCode(go);for(var Ri=1;Ri<=12;Ri++)Zr[Ri+111]=Zr[Ri+63235]="F"+Ri;var Fr={};function Sl(e){var t,i,o,a,c=e.split(/-(?!$)/);e=c[c.length-1];for(var g=0;g<c.length-1;g++){var _=c[g];if(/^(cmd|meta|m)$/i.test(_))a=!0;else if(/^a(lt)?$/i.test(_))t=!0;else if(/^(c|ctrl|control)$/i.test(_))i=!0;else{if(!/^s(hift)?$/i.test(_))throw new Error("Unrecognized modifier name: "+_);o=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),o&&(e="Shift-"+e),e}function kl(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(o=="..."){delete e[i];continue}for(var a=$(i.split(" "),Sl),c=0;c<a.length;c++){var g=void 0,_=void 0;g=c==a.length-1?(_=a.join(" "),o):(_=a.slice(0,c+1).join(" "),"...");var S=t[_];if(S){if(S!=g)throw new Error("Inconsistent bindings for "+_)}else t[_]=g}delete e[i]}for(var w in t)e[w]=t[w];return e}function Dn(e,t,i,o){var a=(t=mo(t)).call?t.call(e,o):t[e];if(a===!1)return"nothing";if(a==="...")return"multi";if(a!=null&&i(a))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Dn(e,t.fallthrough,i,o);for(var c=0;c<t.fallthrough.length;c++){var g=Dn(e,t.fallthrough[c],i,o);if(g)return g}}}function Ea(e){var t=typeof e=="string"?e:Zr[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Ta(e,t,i){var o=e;return t.altKey&&o!="Alt"&&(e="Alt-"+e),(Xe?t.metaKey:t.ctrlKey)&&o!="Ctrl"&&(e="Ctrl-"+e),(Xe?t.ctrlKey:t.metaKey)&&o!="Cmd"&&(e="Cmd-"+e),!i&&t.shiftKey&&o!="Shift"&&(e="Shift-"+e),e}function Aa(e,t){if(F&&e.keyCode==34&&e.char)return!1;var i=Zr[e.keyCode];return i!=null&&!e.altGraphKey&&(e.keyCode==3&&e.code&&(i=e.code),Ta(i,e,t))}function mo(e){return typeof e=="string"?Fr[e]:e}function Wn(e,t){for(var i=e.doc.sel.ranges,o=[],a=0;a<i.length;a++){for(var c=t(i[a]);o.length&&ze(c.from,N(o).to)<=0;){var g=o.pop();if(ze(g.from,c.from)<0){c.from=g.from;break}}o.push(c)}lr(e,function(){for(var _=o.length-1;0<=_;_--)Bn(e.doc,"",o[_].from,o[_].to,"+delete");Rn(e)})}function rs(e,t,i){var o=Se(e.text,t+i,i);return o<0||o>e.text.length?null:o}function ns(e,t,i){var o=rs(e,t.ch,i);return o==null?null:new oe(t.line,o,i<0?"after":"before")}function is(e,t,i,o,a){if(e){t.doc.direction=="rtl"&&(a=-a);var c=lt(i,t.doc.direction);if(c){var g,_=a<0?N(c):c[0],S=a<0==(_.level==1)?"after":"before";if(0<_.level||t.doc.direction=="rtl"){var w=An(t,i);g=a<0?i.text.length-1:0;var O=Ir(t,w,g).top;g=Me(function(T){return Ir(t,w,T).top==O},a<0==(_.level==1)?_.from:_.to-1,g),S=="before"&&(g=rs(i,g,1))}else g=a<0?_.to:_.from;return new oe(o,g,S)}}return new oe(o,a<0?i.text.length:0,a<0?"before":"after")}function Ml(e,t,i,o){var a=lt(t,e.doc.direction);if(!a)return ns(t,i,o);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var c=Le(a,i.ch,i.sticky),g=a[c];if(e.doc.direction=="ltr"&&g.level%2==0&&(0<o?g.to>i.ch:g.from<i.ch))return ns(t,i,o);function _(G,q){return rs(t,G instanceof oe?G.ch:G,q)}function S(G){return e.options.lineWrapping?(w=w||An(e,t),Rs(e,t,w,G)):{begin:0,end:t.text.length}}var w,O=S(i.sticky=="before"?_(i,-1):i.ch);if(e.doc.direction=="rtl"||g.level==1){var T=g.level==1==o<0,H=_(i,T?1:-1);if(H!=null&&(T?H<=g.to&&H<=O.end:H>=g.from&&H>=O.begin)){var V=T?"before":"after";return new oe(i.line,H,V)}}function W(G,q,X){for(var ee=function(we,ve){return ve?new oe(i.line,_(we,1),"before"):new oe(i.line,we,"after")};0<=G&&G<a.length;G+=q){var Y=a[G],se=0<q==(Y.level!=1),me=se?X.begin:_(X.end,-1);if(Y.from<=me&&me<Y.to||(me=se?Y.from:_(Y.to,-1),X.begin<=me&&me<X.end))return ee(me,se)}}var D=W(c+o,o,O);if(D)return D;var P=0<o?O.end:_(O.begin,-1);return P==null||0<o&&P==t.text.length||!(D=W(0<o?0:a.length-1,o,S(P)))?null:D}Fr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Fr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Fr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Fr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Fr.default=re?Fr.macDefault:Fr.pcDefault;var Ni={selectAll:ha,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Rt)},killLine:function(e){return Wn(e,function(t){if(t.empty()){var i=Ee(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:oe(t.head.line+1,0)}:{from:t.head,to:oe(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Wn(e,function(t){return{from:oe(t.from().line,0),to:Ve(e.doc,oe(t.to().line+1,0))}})},delLineLeft:function(e){return Wn(e,function(t){return{from:oe(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Wn(e,function(t){var i=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:i},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Wn(e,function(t){var i=e.charCoords(t.head,"div").top+5,o=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:o}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(oe(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(oe(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Ia(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Oa(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(i,o){var a=Ee(i.doc,o),c=function(g){for(var _;_=Mn(g);)g=_.find(1,!0).line;return g}(a);return c!=a&&(o=ut(c)),is(!0,i,a,o,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},tr)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},tr)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,o=e.coordsChar({left:0,top:i},"div");return o.ch<e.getLine(o.line).search(/\S/)?Oa(e,t.head):o},tr)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),o=e.options.tabSize,a=0;a<i.length;a++){var c=i[a].from(),g=vt(e.getLine(c.line),c.ch,o);t.push(L(o-g%o))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return lr(e,function(){for(var t=e.listSelections(),i=[],o=0;o<t.length;o++)if(t[o].empty()){var a=t[o].head,c=Ee(e.doc,a.line).text;if(c){if(a.ch==c.length&&(a=new oe(a.line,a.ch-1)),0<a.ch)a=new oe(a.line,a.ch+1),e.replaceRange(c.charAt(a.ch-1)+c.charAt(a.ch-2),oe(a.line,a.ch-2),a,"+transpose");else if(a.line>e.doc.first){var g=Ee(e.doc,a.line-1).text;g&&(a=new oe(a.line,1),e.replaceRange(c.charAt(0)+e.doc.lineSeparator()+g.charAt(g.length-1),oe(a.line-1,g.length-1),a,"+transpose"))}}i.push(new ct(a,a))}e.setSelections(i)})},newlineAndIndent:function(e){return lr(e,function(){for(var t=e.listSelections(),i=t.length-1;0<=i;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var o=0;o<t.length;o++)e.indentLine(t[o].from().line,null,!0);Rn(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ia(e,t){var i=Ee(e.doc,t),o=hr(i);return o!=i&&(t=ut(o)),is(!0,e,o,t,1)}function Oa(e,t){var i=Ia(e,t.line),o=Ee(e.doc,i.line),a=lt(o,e.doc.direction);if(a&&a[0].level!=0)return i;var c=Math.max(i.ch,o.text.search(/\S/)),g=t.line==i.line&&t.ch<=c&&t.ch;return oe(i.line,g?0:c,i.sticky)}function vo(e,t,i){if(typeof t=="string"&&!(t=Ni[t]))return!1;e.display.input.ensurePolled();var o=e.display.shift,a=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),a=t(e)!=Kt}finally{e.display.shift=o,e.state.suppressEdits=!1}return a}var El=new Ft;function Li(e,t,i,o){var a=e.state.keySeq;if(a){if(Ea(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:El.set(50,function(){e.state.keySeq==a&&(e.state.keySeq=null,e.display.input.reset())}),Ra(e,a+" "+t,i,o))return!0}return Ra(e,t,i,o)}function Ra(e,t,i,o){var a=function(c,g,_){for(var S=0;S<c.state.keyMaps.length;S++){var w=Dn(g,c.state.keyMaps[S],_,c);if(w)return w}return c.options.extraKeys&&Dn(g,c.options.extraKeys,_,c)||Dn(g,c.options.keyMap,_,c)}(e,t,o);return a=="multi"&&(e.state.keySeq=t),a=="handled"&&ht(e,"keyHandled",e,t,i),a!="handled"&&a!="multi"||(Gt(i),Uo(e)),!!a}function Na(e,t){var i=Aa(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?Li(e,"Shift-"+i,t,function(o){return vo(e,o,!0)})||Li(e,i,t,function(o){if(typeof o=="string"?/^go[A-Z]/.test(o):o.motion)return vo(e,o)}):Li(e,i,t,function(o){return vo(e,o)}))}var os=null;function La(e){var t=this;if(t.curOp.focus=Qe(),!Tt(t,e)){x&&k<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var o,a=Na(t,e);F&&(os=a?i:null,!a&&i==88&&!Ki&&(re?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),l&&!re&&!a&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i!=18||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||(Ke(o=t.display.lineDiv,"CodeMirror-crosshair"),Be(document,"keyup",c),Be(document,"mouseover",c))}function c(g){g.keyCode!=18&&g.altKey||(Mt(o,"CodeMirror-crosshair"),qt(document,"keyup",c),qt(document,"mouseover",c))}}function Pa(e){e.keyCode==16&&(this.doc.sel.shift=!1),Tt(this,e)}function Fa(e){var t=this;if(!(Pr(t.display,e)||Tt(t,e)||e.ctrlKey&&!e.altKey||re&&e.metaKey)){var i=e.keyCode,o=e.charCode;if(F&&i==os)return os=null,void Gt(e);if(!F||e.which&&!(e.which<10)||!Na(t,e)){var a,c=String.fromCharCode(o??i);c!="\b"&&(Li(a=t,"'"+c+"'",e,function(g){return vo(a,g,!0)})||t.display.input.onKeyPress(e))}}}var Pi,Fi,ss=function(e,t,i){this.time=e,this.pos=t,this.button=i};function Ba(e){var t=this,i=t.display;if(!(Tt(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,Pr(i,e))E||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));else if(!as(t,e)){var o,a,c,g=sn(t,e),_=ji(e),S=g?(o=g,a=_,c=+new Date,Fi&&Fi.compare(c,o,a)?(Pi=Fi=null,"triple"):Pi&&Pi.compare(c,o,a)?(Fi=new ss(c,o,a),Pi=null,"double"):(Pi=new ss(c,o,a),Fi=null,"single")):"single";window.focus(),_==1&&t.state.selectingText&&t.state.selectingText(e),g&&function(w,O,T,H,V){var W="Click";return H=="double"?W="Double"+W:H=="triple"&&(W="Triple"+W),Li(w,Ta(W=(O==1?"Left":O==2?"Middle":"Right")+W,V),V,function(D){if(typeof D=="string"&&(D=Ni[D]),!D)return!1;var P=!1;try{w.isReadOnly()&&(w.state.suppressEdits=!0),P=D(w,T)!=Kt}finally{w.state.suppressEdits=!1}return P})}(t,_,g,S,e)||(_==1?g?function(w,O,T,H){x?setTimeout(Pt(Bs,w),0):w.curOp.focus=Qe();var V,W=function(P,G,q){var X=P.getOption("configureMouse"),ee=X?X(P,G,q):{};if(ee.unit==null){var Y=Ae?q.shiftKey&&q.metaKey:q.altKey;ee.unit=Y?"rectangle":G=="single"?"char":G=="double"?"word":"line"}return ee.extend!=null&&!P.doc.extend||(ee.extend=P.doc.extend||q.shiftKey),ee.addNew==null&&(ee.addNew=re?q.metaKey:q.ctrlKey),ee.moveOnDrag==null&&(ee.moveOnDrag=!(re?q.altKey:q.ctrlKey)),ee}(w,T,H),D=w.doc.sel;(w.options.dragDrop&&Eo&&!w.isReadOnly()&&T=="single"&&-1<(V=D.contains(O))&&(ze((V=D.ranges[V]).from(),O)<0||0<O.xRel)&&(0<ze(V.to(),O)||O.xRel<0)?function(P,G,q,X){var ee=P.display,Y=!1,se=Ht(P,function(ve){E&&(ee.scroller.draggable=!1),P.state.draggingText=!1,qt(ee.wrapper.ownerDocument,"mouseup",se),qt(ee.wrapper.ownerDocument,"mousemove",me),qt(ee.scroller,"dragstart",we),qt(ee.scroller,"drop",se),Y||(Gt(ve),X.addNew||co(P.doc,q,null,null,X.extend),E||x&&k==9?setTimeout(function(){ee.wrapper.ownerDocument.body.focus(),ee.input.focus()},20):ee.input.focus())}),me=function(ve){Y=Y||10<=Math.abs(G.clientX-ve.clientX)+Math.abs(G.clientY-ve.clientY)},we=function(){return Y=!0};E&&(ee.scroller.draggable=!0),(P.state.draggingText=se).copy=!X.moveOnDrag,ee.scroller.dragDrop&&ee.scroller.dragDrop(),Be(ee.wrapper.ownerDocument,"mouseup",se),Be(ee.wrapper.ownerDocument,"mousemove",me),Be(ee.scroller,"dragstart",we),Be(ee.scroller,"drop",se),Hs(P),setTimeout(function(){return ee.input.focus()},20)}:function(P,G,q,X){var ee=P.display,Y=P.doc;Gt(G);var se,me,we=Y.sel,ve=we.ranges;if(X.addNew&&!X.extend?(me=Y.sel.contains(q),se=-1<me?ve[me]:new ct(q,q)):(se=Y.sel.primary(),me=Y.sel.primIndex),X.unit=="rectangle")X.addNew||(se=new ct(q,q)),q=sn(P,G,!0,!0),me=-1;else{var Oe=Ha(P,q,X.unit);se=X.extend?es(se,Oe.anchor,Oe.head,X.extend):Oe}X.addNew?me==-1?(me=ve.length,Yt(Y,Cr(P,ve.concat([se]),me),{scroll:!1,origin:"*mouse"})):1<ve.length&&ve[me].empty()&&X.unit=="char"&&!X.extend?(Yt(Y,Cr(P,ve.slice(0,me).concat(ve.slice(me+1)),0),{scroll:!1,origin:"*mouse"}),we=Y.sel):ts(Y,me,se,ye):(Yt(Y,new gr([se],me=0),ye),we=Y.sel);var Je=q;function tt(Re){if(ze(Je,Re)!=0)if(Je=Re,X.unit=="rectangle"){for(var We=[],rt=P.options.tabSize,Wt=vt(Ee(Y,q.line).text,q.ch,rt),or=vt(Ee(Y,Re.line).text,Re.ch,rt),br=Math.min(Wt,or),Or=Math.max(Wt,or),ur=Math.min(q.line,Re.line),Vn=Math.min(P.lastLine(),Math.max(q.line,Re.line));ur<=Vn;ur++){var Rr=Ee(Y,ur).text,Yr=fr(Rr,br,rt);br==Or?We.push(new ct(oe(ur,Yr),oe(ur,Yr))):Rr.length>Yr&&We.push(new ct(oe(ur,Yr),oe(ur,fr(Rr,Or,rt))))}We.length||We.push(new ct(q,q)),Yt(Y,Cr(P,we.ranges.slice(0,me).concat(We),me),{origin:"*mouse",scroll:!1}),P.scrollIntoView(Re)}else{var Jr,jn=se,Hi=Ha(P,Re,X.unit),hs=jn.anchor;hs=0<ze(Hi.anchor,hs)?(Jr=Hi.head,dt(jn.from(),Hi.anchor)):(Jr=Hi.anchor,yn(jn.to(),Hi.head));var Ja=we.ranges.slice(0);Ja[me]=function(Xa,hn){var cr=hn.anchor,Xr=hn.head,Rl=Ee(Xa.doc,cr.line);if(ze(cr,Xr)==0&&cr.sticky==Xr.sticky)return hn;var Kn=lt(Rl);if(!Kn)return hn;var ps=Le(Kn,cr.ch,cr.sticky),Di=Kn[ps];if(Di.from!=cr.ch&&Di.to!=cr.ch)return hn;var Co,Wi=ps+(Di.from==cr.ch==(Di.level!=1)?0:1);if(Wi==0||Wi==Kn.length)return hn;if(Xr.line!=cr.line)Co=0<(Xr.line-cr.line)*(Xa.doc.direction=="ltr"?1:-1);else{var gs=Le(Kn,Xr.ch,Xr.sticky),Qa=gs-ps||(Xr.ch-cr.ch)*(Di.level==1?-1:1);Co=gs==Wi-1||gs==Wi?Qa<0:0<Qa}var ms=Kn[Wi+(Co?-1:0)],el=Co==(ms.level==1),tl=el?ms.from:ms.to,rl=el?"after":"before";return cr.ch==tl&&cr.sticky==rl?hn:new ct(new oe(cr.line,tl,rl),Xr)}(P,new ct(Ve(Y,hs),Jr)),Yt(Y,Cr(P,Ja,me),ye)}}var Ne=ee.wrapper.getBoundingClientRect(),He=0;function Te(Re){P.state.selectingText=!1,He=1/0,Re&&(Gt(Re),ee.input.focus()),qt(ee.wrapper.ownerDocument,"mousemove",ft),qt(ee.wrapper.ownerDocument,"mouseup",$e),Y.history.lastSelOrigin=null}var ft=Ht(P,function(Re){(Re.buttons!==0&&ji(Re)?function We(rt){var Wt=++He,or=sn(P,rt,!0,X.unit=="rectangle");if(or)if(ze(or,Je)!=0){P.curOp.focus=Qe(),tt(or);var br=io(ee,Y);(or.line>=br.to||or.line<br.from)&&setTimeout(Ht(P,function(){He==Wt&&We(rt)}),150)}else{var Or=rt.clientY<Ne.top?-20:rt.clientY>Ne.bottom?20:0;Or&&setTimeout(Ht(P,function(){He==Wt&&(ee.scroller.scrollTop+=Or,We(rt))}),50)}}:Te)(Re)}),$e=Ht(P,Te);P.state.selectingText=$e,Be(ee.wrapper.ownerDocument,"mousemove",ft),Be(ee.wrapper.ownerDocument,"mouseup",$e)})(w,H,O,W)}(t,g,S,e):en(e)==i.scroller&&Gt(e):_==2?(g&&co(t.doc,g),setTimeout(function(){return i.input.focus()},20)):_==3&&(mt?t.display.input.onContextMenu(e):Hs(t)))}}}function Ha(e,t,i){if(i=="char")return new ct(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new ct(oe(t.line,0),Ve(e.doc,oe(t.line+1,0)));var o=i(e,t);return new ct(o.from,o.to)}function Da(e,t,i,o){var a,c;if(t.touches)a=t.touches[0].clientX,c=t.touches[0].clientY;else try{a=t.clientX,c=t.clientY}catch{return!1}if(a>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;o&&Gt(t);var g=e.display,_=g.lineDiv.getBoundingClientRect();if(c>_.bottom||!rr(e,i))return Gn(t);c-=_.top-g.viewOffset;for(var S=0;S<e.display.gutterSpecs.length;++S){var w=g.gutters.childNodes[S];if(w&&w.getBoundingClientRect().right>=a)return Ct(e,i,e,Tr(e.doc,c),e.display.gutterSpecs[S].className,t),Gn(t)}}function as(e,t){return Da(e,t,"gutterClick",!0)}function Wa(e,t){var i,o;Pr(e.display,t)||(o=t,rr(i=e,"gutterContextMenu")&&Da(i,o,"gutterContextMenu",!1))||Tt(e,t,"contextmenu")||mt||e.display.input.onContextMenu(t)}function Ua(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),gi(e)}ss.prototype.compare=function(e,t,i){return this.time+400>e&&ze(t,this.pos)==0&&i==this.button};var Un={toString:function(){return"CodeMirror.Init"}},za={},yo={};function Tl(e,t,i){if(!t!=!(i&&i!=Un)){var o=e.display.dragFunctions,a=t?Be:qt;a(e.display.scroller,"dragstart",o.start),a(e.display.scroller,"dragenter",o.enter),a(e.display.scroller,"dragover",o.over),a(e.display.scroller,"dragleave",o.leave),a(e.display.scroller,"drop",o.drop)}}function Al(e){e.options.lineWrapping?(Ke(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Mt(e.display.wrapper,"CodeMirror-wrap"),b(e)),Wo(e),nr(e),gi(e),setTimeout(function(){return Nn(e)},100)}function bt(e,t){var i=this;if(!(this instanceof bt))return new bt(e,t);this.options=t=t?Ot(t):{},Ot(za,t,!1);var o=t.value;typeof o=="string"?o=new ir(o,t.mode,null,t.lineSeparator,t.direction):t.mode&&(o.modeOption=t.mode),this.doc=o;var a=new bt.inputStyles[t.inputStyle](this),c=this.display=new gl(e,o,a,t);for(var g in Ua(c.wrapper.CodeMirror=this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),js(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ft,keySeq:null,specialChars:null},t.autofocus&&!xe&&c.input.focus(),x&&k<11&&setTimeout(function(){return i.display.input.reset(!0)},20),function(S){var w=S.display;Be(w.scroller,"mousedown",Ht(S,Ba)),Be(w.scroller,"dblclick",x&&k<11?Ht(S,function(D){if(!Tt(S,D)){var P=sn(S,D);if(P&&!as(S,D)&&!Pr(S.display,D)){Gt(D);var G=S.findWordAt(P);co(S.doc,G.anchor,G.head)}}}):function(D){return Tt(S,D)||Gt(D)}),Be(w.scroller,"contextmenu",function(D){return Wa(S,D)}),Be(w.input.getField(),"contextmenu",function(D){w.scroller.contains(D.target)||Wa(S,D)});var O,T={end:0};function H(){w.activeTouch&&(O=setTimeout(function(){return w.activeTouch=null},1e3),(T=w.activeTouch).end=+new Date)}function V(D,P){if(P.left==null)return 1;var G=P.left-D.left,q=P.top-D.top;return 400<G*G+q*q}Be(w.scroller,"touchstart",function(D){if(!Tt(S,D)&&!function(G){if(G.touches.length==1){var q=G.touches[0];return q.radiusX<=1&&q.radiusY<=1}}(D)&&!as(S,D)){w.input.ensurePolled(),clearTimeout(O);var P=+new Date;w.activeTouch={start:P,moved:!1,prev:P-T.end<=300?T:null},D.touches.length==1&&(w.activeTouch.left=D.touches[0].pageX,w.activeTouch.top=D.touches[0].pageY)}}),Be(w.scroller,"touchmove",function(){w.activeTouch&&(w.activeTouch.moved=!0)}),Be(w.scroller,"touchend",function(D){var P=w.activeTouch;if(P&&!Pr(w,D)&&P.left!=null&&!P.moved&&new Date-P.start<300){var G,q=S.coordsChar(w.activeTouch,"page");G=!P.prev||V(P,P.prev)?new ct(q,q):!P.prev.prev||V(P,P.prev.prev)?S.findWordAt(q):new ct(oe(q.line,0),Ve(S.doc,oe(q.line+1,0))),S.setSelection(G.anchor,G.head),S.focus(),Gt(D)}H()}),Be(w.scroller,"touchcancel",H),Be(w.scroller,"scroll",function(){w.scroller.clientHeight&&(_i(S,w.scroller.scrollTop),ln(S,w.scroller.scrollLeft,!0),Ct(S,"scroll",S))}),Be(w.scroller,"mousewheel",function(D){return Ys(S,D)}),Be(w.scroller,"DOMMouseScroll",function(D){return Ys(S,D)}),Be(w.wrapper,"scroll",function(){return w.wrapper.scrollTop=w.wrapper.scrollLeft=0}),w.dragFunctions={enter:function(D){Tt(S,D)||vr(D)},over:function(D){Tt(S,D)||(function(P,G){var q=sn(P,G);if(q){var X=document.createDocumentFragment();Fs(P,q,X),P.display.dragCursor||(P.display.dragCursor=_e("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),P.display.lineSpace.insertBefore(P.display.dragCursor,P.display.cursorDiv)),at(P.display.dragCursor,X)}}(S,D),vr(D))},start:function(D){return function(P,G){if(x&&(!P.state.draggingText||new Date-Ca<100))vr(G);else if(!Tt(P,G)&&!Pr(P.display,G)&&(G.dataTransfer.setData("Text",P.getSelection()),G.dataTransfer.effectAllowed="copyMove",G.dataTransfer.setDragImage&&!Z)){var q=_e("img",null,null,"position: fixed; left: 0; top: 0;");q.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",F&&(q.width=q.height=1,P.display.wrapper.appendChild(q),q._top=q.offsetTop),G.dataTransfer.setDragImage(q,0,0),F&&q.parentNode.removeChild(q)}}(S,D)},drop:Ht(S,wl),leave:function(D){Tt(S,D)||Sa(S)}};var W=w.input.getField();Be(W,"keyup",function(D){return Pa.call(S,D)}),Be(W,"keydown",Ht(S,La)),Be(W,"keypress",Ht(S,Fa)),Be(W,"focus",function(D){return zo(S,D)}),Be(W,"blur",function(D){return vi(S,D)})}(this),xl(),cn(this),this.curOp.forceUpdate=!0,ea(this,o),t.autofocus&&!xe||this.hasFocus()?setTimeout(Pt(zo,this),20):vi(this),yo)yo.hasOwnProperty(g)&&yo[g](this,t[g],Un);qs(this),t.finishInit&&t.finishInit(this);for(var _=0;_<ls.length;++_)ls[_](this);fn(this),E&&t.lineWrapping&&getComputedStyle(c.lineDiv).textRendering=="optimizelegibility"&&(c.lineDiv.style.textRendering="auto")}bt.defaults=za,bt.optionHandlers=yo;var ls=[];function Bi(e,t,i,o){var a,c=e.doc;i==null&&(i="add"),i=="smart"&&(c.mode.indent?a=Ur(e,t).state:i="prev");var g=e.options.tabSize,_=Ee(c,t),S=vt(_.text,null,g);_.stateAfter&&(_.stateAfter=null);var w,O=_.text.match(/^\s*/)[0];if(o||/\S/.test(_.text)){if(i=="smart"&&((w=c.mode.indent(a,_.text.slice(O.length),_.text))==Kt||150<w)){if(!o)return;i="prev"}}else w=0,i="not";i=="prev"?w=t>c.first?vt(Ee(c,t-1).text,null,g):0:i=="add"?w=S+e.options.indentUnit:i=="subtract"?w=S-e.options.indentUnit:typeof i=="number"&&(w=S+i),w=Math.max(0,w);var T="",H=0;if(e.options.indentWithTabs)for(var V=Math.floor(w/g);V;--V)H+=g,T+="	";if(H<w&&(T+=L(w-H)),T!=O)return Bn(c,T,oe(t,0),oe(t,O.length),"+input"),!(_.stateAfter=null);for(var W=0;W<c.sel.ranges.length;W++){var D=c.sel.ranges[W];if(D.head.line==t&&D.head.ch<O.length){var P=oe(t,O.length);ts(c,W,new ct(P,P));break}}}bt.defineInitHook=function(e){return ls.push(e)};var Sr=null;function _o(e){Sr=e}function us(e,t,i,o,a){var c=e.doc;e.display.shift=!1,o=o||c.sel;var g=new Date-200,_=a=="paste"||e.state.pasteIncoming>g,S=mn(t),w=null;if(_&&1<o.ranges.length)if(Sr&&Sr.text.join(`
`)==t){if(o.ranges.length%Sr.text.length==0){w=[];for(var O=0;O<Sr.text.length;O++)w.push(c.splitLines(Sr.text[O]))}}else S.length==o.ranges.length&&e.options.pasteLinesPerSelection&&(w=$(S,function(G){return[G]}));for(var T=e.curOp.updateInput,H=o.ranges.length-1;0<=H;H--){var V=o.ranges[H],W=V.from(),D=V.to();V.empty()&&(i&&0<i?W=oe(W.line,W.ch-i):e.state.overwrite&&!_?D=oe(D.line,Math.min(Ee(c,D.line).text.length,D.ch+N(S).length)):_&&Sr&&Sr.lineWise&&Sr.text.join(`
`)==t&&(W=D=oe(W.line,0)));var P={from:W,to:D,text:w?w[H%w.length]:S,origin:a||(_?"paste":e.state.cutIncoming>g?"cut":"+input")};Fn(e.doc,P),ht(e,"inputRead",e,P)}t&&!_&&ja(e,t),Rn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=T),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Va(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");return i&&(e.preventDefault(),t.isReadOnly()||t.options.disableInput||lr(t,function(){return us(t,i,0,null,"paste")}),1)}function ja(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,o=i.ranges.length-1;0<=o;o--){var a=i.ranges[o];if(!(100<a.head.ch||o&&i.ranges[o-1].head.line==a.head.line)){var c=e.getModeAt(a.head),g=!1;if(c.electricChars){for(var _=0;_<c.electricChars.length;_++)if(-1<t.indexOf(c.electricChars.charAt(_))){g=Bi(e,a.head.line,"smart");break}}else c.electricInput&&c.electricInput.test(Ee(e.doc,a.head.line).text.slice(0,a.head.ch))&&(g=Bi(e,a.head.line,"smart"));g&&ht(e,"electricInput",e,a.head.line)}}}function Ka(e){for(var t=[],i=[],o=0;o<e.doc.sel.ranges.length;o++){var a=e.doc.sel.ranges[o].head.line,c={anchor:oe(a,0),head:oe(a+1,0)};i.push(c),t.push(e.getRange(c.anchor,c.head))}return{text:t,ranges:i}}function $a(e,t,i,o){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",o?"":"off"),e.setAttribute("spellcheck",!!t)}function qa(){var e=_e("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=_e("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return E?e.style.width="1000px":e.setAttribute("wrap","off"),J&&(e.style.border="1px solid black"),$a(e),t}function cs(e,t,i,o,a){var c=t,g=i,_=Ee(e,t.line),S=a&&e.direction=="rtl"?-i:i;function w(G){var q,X;if((q=a?Ml(e.cm,_,t,i):ns(_,t,i))==null){if(G||(X=t.line+S)<e.first||X>=e.first+e.size||(t=new oe(X,t.ch,t.sticky),!(_=Ee(e,X))))return;t=is(a,e.cm,_,t.line,S)}else t=q;return 1}if(o=="char")w();else if(o=="column")w(!0);else if(o=="word"||o=="group")for(var O=null,T=o=="group",H=e.cm&&e.cm.getHelper(t,"wordChars"),V=!0;!(i<0)||w(!V);V=!1){var W=_.text.charAt(t.ch)||`
`,D=ae(W,H)?"w":T&&W==`
`?"n":!T||/\s/.test(W)?null:"p";if(!T||V||D||(D="s"),O&&O!=D){i<0&&(i=1,w(),t.sticky="after");break}if(D&&(O=D),0<i&&!w(!V))break}var P=ho(e,t,c,g,!0);return vn(c,P)&&(P.hitSide=!0),P}function Ga(e,t,i,o){var a,c,g=e.doc,_=t.left;if(o=="page"){var S=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),w=Math.max(S-.5*In(e.display),3);a=(0<i?t.bottom:t.top)+i*w}else o=="line"&&(a=0<i?t.bottom+3:t.top-3);for(;(c=Fo(e,_,a)).outside;){if(i<0?a<=0:a>=g.height){c.hitSide=!0;break}a+=5*i}return c}function pt(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ft,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}function Za(e,t){var i=Ro(e,t.line);if(!i||i.hidden)return null;var o=Ee(e.doc,t.line),a=ws(i,o,t.line),c=lt(o,e.doc.direction),g="left";c&&(g=Le(c,t.ch)%2?"right":"left");var _=Ss(a.map,t.ch,g);return _.offset=_.collapse=="right"?_.end:_.start,_}function zn(e,t){return t&&(e.bad=!0),e}function bo(e,t,i){var o;if(t==e.display.lineDiv){if(!(o=e.display.lineDiv.childNodes[i]))return zn(e.clipPos(oe(e.display.viewTo-1)),!0);t=null,i=0}else for(o=t;;o=o.parentNode){if(!o||o==e.display.lineDiv)return null;if(o.parentNode&&o.parentNode==e.display.lineDiv)break}for(var a=0;a<e.display.view.length;a++){var c=e.display.view[a];if(c.node==o)return Il(c,t,i)}}function Il(e,t,i){var o=e.text.firstChild,a=!1;if(!t||!It(o,t))return zn(oe(ut(e.line),0),!0);if(t==o&&(a=!0,t=o.childNodes[i],i=0,!t)){var c=e.rest?N(e.rest):e.line;return zn(oe(ut(c),c.text.length),a)}var g=t.nodeType==3?t:null,_=t;for(g||t.childNodes.length!=1||t.firstChild.nodeType!=3||(g=t.firstChild,i=i&&g.nodeValue.length);_.parentNode!=o;)_=_.parentNode;var S=e.measure,w=S.maps;function O(P,G,q){for(var X=-1;X<(w?w.length:0);X++)for(var ee=X<0?S.map:w[X],Y=0;Y<ee.length;Y+=3){var se=ee[Y+2];if(se==P||se==G){var me=ut(X<0?e.line:e.rest[X]),we=ee[Y]+q;return(q<0||se!=P)&&(we=ee[Y+(q?1:0)]),oe(me,we)}}}var T=O(g,_,i);if(T)return zn(T,a);for(var H=_.nextSibling,V=g?g.nodeValue.length-i:0;H;H=H.nextSibling){if(T=O(H,H.firstChild,0))return zn(oe(T.line,T.ch-V),a);V+=H.textContent.length}for(var W=_.previousSibling,D=i;W;W=W.previousSibling){if(T=O(W,W.firstChild,-1))return zn(oe(T.line,T.ch+D),a);D+=W.textContent.length}}pt.prototype.init=function(e){var t=this,i=this,o=i.cm,a=i.div=e.lineDiv;function c(g){if(!Tt(o,g)){if(o.somethingSelected())_o({lineWise:!1,text:o.getSelections()}),g.type=="cut"&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var _=Ka(o);_o({lineWise:!0,text:_.text}),g.type=="cut"&&o.operation(function(){o.setSelections(_.ranges,0,Rt),o.replaceSelection("",null,"cut")})}if(g.clipboardData){g.clipboardData.clearData();var S=Sr.text.join(`
`);if(g.clipboardData.setData("Text",S),g.clipboardData.getData("Text")==S)return void g.preventDefault()}var w=qa(),O=w.firstChild;o.display.lineSpace.insertBefore(w,o.display.lineSpace.firstChild),O.value=Sr.text.join(`
`);var T=document.activeElement;jt(O),setTimeout(function(){o.display.lineSpace.removeChild(w),T.focus(),T==a&&i.showPrimarySelection()},50)}}$a(a,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize),Be(a,"paste",function(g){Tt(o,g)||Va(g,o)||k<=11&&setTimeout(Ht(o,function(){return t.updateFromDOM()}),20)}),Be(a,"compositionstart",function(g){t.composing={data:g.data,done:!1}}),Be(a,"compositionupdate",function(g){t.composing||(t.composing={data:g.data,done:!1})}),Be(a,"compositionend",function(g){t.composing&&(g.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Be(a,"touchstart",function(){return i.forceCompositionEnd()}),Be(a,"input",function(){t.composing||t.readFromDOMSoon()}),Be(a,"copy",c),Be(a,"cut",c)},pt.prototype.prepareSelection=function(){var e=Ps(this.cm,!1);return e.focus=document.activeElement==this.div,e},pt.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},pt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},pt.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),o=i.from(),a=i.to();if(t.display.viewTo==t.display.viewFrom||o.line>=t.display.viewTo||a.line<t.display.viewFrom)e.removeAllRanges();else{var c=bo(t,e.anchorNode,e.anchorOffset),g=bo(t,e.focusNode,e.focusOffset);if(!c||c.bad||!g||g.bad||ze(dt(c,g),o)!=0||ze(yn(c,g),a)!=0){var _=t.display.view,S=o.line>=t.display.viewFrom&&Za(t,o)||{node:_[0].measure.map[2],offset:0},w=a.line<t.display.viewTo&&Za(t,a);if(!w){var O=_[_.length-1].measure,T=O.maps?O.maps[O.maps.length-1]:O.map;w={node:T[T.length-1],offset:T[T.length-2]-T[T.length-3]}}if(S&&w){var H,V=e.rangeCount&&e.getRangeAt(0);try{H=Ut(S.node,S.offset,w.offset,w.node)}catch{}H&&(!l&&t.state.focused?(e.collapse(S.node,S.offset),H.collapsed||(e.removeAllRanges(),e.addRange(H))):(e.removeAllRanges(),e.addRange(H)),V&&e.anchorNode==null?e.addRange(V):l&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},pt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},pt.prototype.showMultipleSelections=function(e){at(this.cm.display.cursorDiv,e.cursors),at(this.cm.display.selectionDiv,e.selection)},pt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},pt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return It(this.div,t)},pt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},pt.prototype.blur=function(){this.div.blur()},pt.prototype.getField=function(){return this.div},pt.prototype.supportsTouch=function(){return!0},pt.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():lr(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},pt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pt.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(ge&&z&&this.cm.display.gutterSpecs.length&&function(a){for(var c=a;c;c=c.parentNode)if(/CodeMirror-gutter-wrapper/.test(c.className))return 1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=bo(t,e.anchorNode,e.anchorOffset),o=bo(t,e.focusNode,e.focusOffset);i&&o&&lr(t,function(){Yt(t.doc,Kr(i,o),Rt),(i.bad||o.bad)&&(t.curOp.selectionChanged=!0)})}}},pt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,i,o=this.cm,a=o.display,c=o.doc.sel.primary(),g=c.from(),_=c.to();if(g.ch==0&&g.line>o.firstLine()&&(g=oe(g.line-1,Ee(o.doc,g.line-1).length)),_.ch==Ee(o.doc,_.line).text.length&&_.line<o.lastLine()&&(_=oe(_.line+1,0)),g.line<a.viewFrom||_.line>a.viewTo-1)return!1;i=g.line==a.viewFrom||(e=an(o,g.line))==0?(t=ut(a.view[0].line),a.view[0].node):(t=ut(a.view[e].line),a.view[e-1].node.nextSibling);var S,w,O=an(o,_.line);if(w=O==a.view.length-1?(S=a.viewTo-1,a.lineDiv.lastChild):(S=ut(a.view[O+1].line)-1,a.view[O+1].node.previousSibling),!i)return!1;for(var T=o.doc.splitLines(function(me,we,ve,Oe,Je){var tt="",Ne=!1,He=me.doc.lineSeparator(),Te=!1;function ft(){Ne&&(tt+=He,Te&&(tt+=He),Ne=Te=!1)}function $e(We){We&&(ft(),tt+=We)}function Re(We){if(We.nodeType==1){var rt=We.getAttribute("cm-text");if(rt)return void $e(rt);var Wt,or=We.getAttribute("cm-marker");if(or){var br=me.findMarks(oe(Oe,0),oe(Je+1,0),(Vn=+or,function(Rr){return Rr.id==Vn}));return void(br.length&&(Wt=br[0].find(0))&&$e(Zt(me.doc,Wt.from,Wt.to).join(He)))}if(We.getAttribute("contenteditable")=="false")return;var Or=/^(pre|div|p|li|table|br)$/i.test(We.nodeName);if(!/^br$/i.test(We.nodeName)&&We.textContent.length==0)return;Or&&ft();for(var ur=0;ur<We.childNodes.length;ur++)Re(We.childNodes[ur]);/^(pre|p)$/i.test(We.nodeName)&&(Te=!0),Or&&(Ne=!0)}else We.nodeType==3&&$e(We.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var Vn}for(;Re(we),we!=ve;)we=we.nextSibling,Te=!1;return tt}(o,i,w,t,S)),H=Zt(o.doc,oe(t,0),oe(S,Ee(o.doc,S).text.length));1<T.length&&1<H.length;)if(N(T)==N(H))T.pop(),H.pop(),S--;else{if(T[0]!=H[0])break;T.shift(),H.shift(),t++}for(var V=0,W=0,D=T[0],P=H[0],G=Math.min(D.length,P.length);V<G&&D.charCodeAt(V)==P.charCodeAt(V);)++V;for(var q=N(T),X=N(H),ee=Math.min(q.length-(T.length==1?V:0),X.length-(H.length==1?V:0));W<ee&&q.charCodeAt(q.length-W-1)==X.charCodeAt(X.length-W-1);)++W;if(T.length==1&&H.length==1&&t==g.line)for(;V&&V>g.ch&&q.charCodeAt(q.length-W-1)==X.charCodeAt(X.length-W-1);)V--,W++;T[T.length-1]=q.slice(0,q.length-W).replace(/^\u200b+/,""),T[0]=T[0].slice(V).replace(/\u200b+$/,"");var Y=oe(t,V),se=oe(S,H.length?N(H).length-W:0);return 1<T.length||T[0]||ze(Y,se)?(Bn(o.doc,T,Y,se,"+input"),!0):void 0},pt.prototype.ensurePolled=function(){this.forceCompositionEnd()},pt.prototype.reset=function(){this.forceCompositionEnd()},pt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},pt.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},pt.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||lr(this.cm,function(){return nr(e.cm)})},pt.prototype.setUneditable=function(e){e.contentEditable="false"},pt.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ht(this.cm,us)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},pt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},pt.prototype.onContextMenu=function(){},pt.prototype.resetPosition=function(){},pt.prototype.needsContentAttribute=!0;function At(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ft,this.hasSelection=!1,this.composing=null}var wo,Ya,kr,ds,dn;function Fe(e,t,i,o){wo.defaults[e]=t,i&&(Ya[e]=o?function(a,c,g){g!=Un&&i(a,c,g)}:i)}At.prototype.init=function(e){var t=this,i=this,o=this.cm;this.createField(e);var a=this.textarea;function c(g){if(!Tt(o,g)){if(o.somethingSelected())_o({lineWise:!1,text:o.getSelections()});else{if(!o.options.lineWiseCopyCut)return;var _=Ka(o);_o({lineWise:!0,text:_.text}),g.type=="cut"?o.setSelections(_.ranges,null,Rt):(i.prevInput="",a.value=_.text.join(`
`),jt(a))}g.type=="cut"&&(o.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),J&&(a.style.width="0px"),Be(a,"input",function(){x&&9<=k&&t.hasSelection&&(t.hasSelection=null),i.poll()}),Be(a,"paste",function(g){Tt(o,g)||Va(g,o)||(o.state.pasteIncoming=+new Date,i.fastPoll())}),Be(a,"cut",c),Be(a,"copy",c),Be(e.scroller,"paste",function(g){if(!Pr(e,g)&&!Tt(o,g)){if(!a.dispatchEvent)return o.state.pasteIncoming=+new Date,void i.focus();var _=new Event("paste");_.clipboardData=g.clipboardData,a.dispatchEvent(_)}}),Be(e.lineSpace,"selectstart",function(g){Pr(e,g)||Gt(g)}),Be(a,"compositionstart",function(){var g=o.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:g,range:o.markText(g,o.getCursor("to"),{className:"CodeMirror-composing"})}}),Be(a,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},At.prototype.createField=function(e){this.wrapper=qa(),this.textarea=this.wrapper.firstChild},At.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,o=Ps(e);if(e.options.moveInputWithCursor){var a=xr(e,i.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),g=t.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,a.top+g.top-c.top)),o.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,a.left+g.left-c.left))}return o},At.prototype.showSelection=function(e){var t=this.cm.display;at(t.cursorDiv,e.cursors),at(t.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},At.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&jt(this.textarea),x&&9<=k&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",x&&9<=k&&(this.hasSelection=null))}},At.prototype.getField=function(){return this.textarea},At.prototype.supportsTouch=function(){return!1},At.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!xe||Qe()!=this.textarea))try{this.textarea.focus()}catch{}},At.prototype.blur=function(){this.textarea.blur()},At.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},At.prototype.receivedFocus=function(){this.slowPoll()},At.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},At.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function i(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,i))})},At.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,o=this.prevInput;if(this.contextMenuPending||!t.state.focused||To(i)&&!o&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var a=i.value;if(a==o&&!t.somethingSelected())return!1;if(x&&9<=k&&this.hasSelection===a||re&&/[\uf700-\uf7ff]/.test(a))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var c=a.charCodeAt(0);if(c!=8203||o||(o=""),c==8666)return this.reset(),this.cm.execCommand("undo")}for(var g=0,_=Math.min(o.length,a.length);g<_&&o.charCodeAt(g)==a.charCodeAt(g);)++g;return lr(t,function(){us(t,a.slice(g),o.length-g,null,e.composing?"*compose":null),1e3<a.length||-1<a.indexOf(`
`)?i.value=e.prevInput="":e.prevInput=a,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},At.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},At.prototype.onKeyPress=function(){x&&9<=k&&(this.hasSelection=null),this.fastPoll()},At.prototype.onContextMenu=function(e){var t=this,i=t.cm,o=i.display,a=t.textarea;t.contextMenuPending&&t.contextMenuPending();var c=sn(i,e),g=o.scroller.scrollTop;if(c&&!F){i.options.resetSelectionOnContextMenu&&i.doc.sel.contains(c)==-1&&Ht(i,Yt)(i.doc,Kr(c),Rt);var _,S=a.style.cssText,w=t.wrapper.style.cssText,O=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",a.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-O.top-5)+"px; left: "+(e.clientX-O.left-5)+`px;
      z-index: 1000; background: `+(x?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,E&&(_=window.scrollY),o.input.focus(),E&&window.scrollTo(null,_),o.input.reset(),i.somethingSelected()||(a.value=t.prevInput=" "),t.contextMenuPending=V,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),x&&9<=k&&H(),mt){vr(e);var T=function(){qt(window,"mouseup",T),setTimeout(V,20)};Be(window,"mouseup",T)}else setTimeout(V,50)}function H(){if(a.selectionStart!=null){var W=i.somethingSelected(),D=""+(W?a.value:"");a.value="",a.value=D,t.prevInput=W?"":"",a.selectionStart=1,a.selectionEnd=D.length,o.selForContextMenu=i.doc.sel}}function V(){if(t.contextMenuPending==V&&(t.contextMenuPending=!1,t.wrapper.style.cssText=w,a.style.cssText=S,x&&k<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=g),a.selectionStart!=null)){(!x||x&&k<9)&&H();var W=0,D=function(){o.selForContextMenu==i.doc.sel&&a.selectionStart==0&&0<a.selectionEnd&&t.prevInput==""?Ht(i,ha)(i):W++<10?o.detectingSelectAll=setTimeout(D,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(D,200)}}},At.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor"},At.prototype.setUneditable=function(){},At.prototype.needsContentAttribute=!1,Ya=(wo=bt).optionHandlers,wo.defineOption=Fe,wo.Init=Un,Fe("value","",function(e,t){return e.setValue(t)},!0),Fe("mode",null,function(e,t){e.doc.modeOption=t,Jo(e)},!0),Fe("indentUnit",2,Jo,!0),Fe("indentWithTabs",!1),Fe("smartIndent",!0),Fe("tabSize",4,function(e){Si(e),gi(e),nr(e)},!0),Fe("lineSeparator",null,function(e,t){if(e.doc.lineSep=t){var i=[],o=e.doc.first;e.doc.iter(function(c){for(var g=0;;){var _=c.text.indexOf(t,g);if(_==-1)break;g=_+t.length,i.push(oe(o,_))}o++});for(var a=i.length-1;0<=a;a--)Bn(e.doc,t,i[a],oe(i[a].line,i[a].ch+t.length))}}),Fe("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),i!=Un&&e.refresh()}),Fe("specialCharPlaceholder",Q,function(e){return e.refresh()},!0),Fe("electricChars",!0),Fe("inputStyle",xe?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Fe("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),Fe("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),Fe("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),Fe("rtlMoveVisually",!Ce),Fe("wholeLineUpdateBefore",!0),Fe("theme","default",function(e){Ua(e),Ci(e)},!0),Fe("keyMap","default",function(e,t,i){var o=mo(t),a=i!=Un&&mo(i);a&&a.detach&&a.detach(e,o),o.attach&&o.attach(e,a||null)}),Fe("extraKeys",null),Fe("configureMouse",null),Fe("lineWrapping",!1,Al,!0),Fe("gutters",[],function(e,t){e.display.gutterSpecs=Zo(t,e.options.lineNumbers),Ci(e)},!0),Fe("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Do(e.display)+"px":"0",e.refresh()},!0),Fe("coverGutterNextToScrollbar",!1,function(e){return Nn(e)},!0),Fe("scrollbarStyle","native",function(e){js(e),Nn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Fe("lineNumbers",!1,function(e,t){e.display.gutterSpecs=Zo(e.options.gutters,t),Ci(e)},!0),Fe("firstLineNumber",1,Ci,!0),Fe("lineNumberFormatter",function(e){return e},Ci,!0),Fe("showCursorWhenSelecting",!1,mi,!0),Fe("resetSelectionOnContextMenu",!0),Fe("lineWiseCopyCut",!0),Fe("pasteLinesPerSelection",!0),Fe("selectionsMayTouch",!1),Fe("readOnly",!1,function(e,t){t=="nocursor"&&(vi(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),Fe("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Fe("dragDrop",!0,Tl),Fe("allowDropFileTypes",null),Fe("cursorBlinkRate",530),Fe("cursorScrollMargin",0),Fe("cursorHeight",1,mi,!0),Fe("singleCursorHeightPerLine",!0,mi,!0),Fe("workTime",100),Fe("workDelay",100),Fe("flattenSpans",!0,Si,!0),Fe("addModeClass",!1,Si,!0),Fe("pollInterval",100),Fe("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),Fe("historyEventDelay",1250),Fe("viewportMargin",10,function(e){return e.refresh()},!0),Fe("maxHighlightLength",1e4,Si,!0),Fe("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Fe("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),Fe("autofocus",null),Fe("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),Fe("phrases",null),ds=(kr=bt).optionHandlers,dn=kr.helpers={},kr.prototype={constructor:kr,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,o=i[e];i[e]==t&&e!="mode"||(i[e]=t,ds.hasOwnProperty(e)&&Ht(this,ds[e])(this,t,o),Ct(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](mo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:er(function(e,t){var i=e.token?e:kr.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");(function(o,a,c){for(var g=0,_=c(a);g<o.length&&c(o[g])<=_;)g++;o.splice(g,0,a)})(this.state.overlays,{mode:i,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(o){return o.priority}),this.state.modeGen++,nr(this)}),removeOverlay:er(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var o=t[i].modeSpec;if(o==e||typeof e=="string"&&o.name==e)return t.splice(i,1),this.state.modeGen++,void nr(this)}}),indentLine:er(function(e,t,i){typeof t!="string"&&typeof t!="number"&&(t=t==null?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Wr(this.doc,e)&&Bi(this,e,t,i)}),indentSelection:er(function(e){for(var t=this.doc.sel.ranges,i=-1,o=0;o<t.length;o++){var a=t[o];if(a.empty())a.head.line>i&&(Bi(this,a.head.line,e,!0),i=a.head.line,o==this.doc.sel.primIndex&&Rn(this));else{var c=a.from(),g=a.to(),_=Math.max(i,c.line);i=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var S=_;S<i;++S)Bi(this,S,e);var w=this.doc.sel.ranges;c.ch==0&&t.length==w.length&&0<w[o].from().ch&&ts(this.doc,o,new ct(c,w[o].to()),Rt)}}}),getTokenAt:function(e,t){return oi(this,e,t)},getLineTokens:function(e,t){return oi(this,oe(e),t,!0)},getTokenTypeAt:function(e){e=Ve(this.doc,e);var t,i=ni(this,Ee(this.doc,e.line)),o=0,a=(i.length-1)/2,c=e.ch;if(c==0)t=i[2];else for(;;){var g=o+a>>1;if((g?i[2*g-1]:0)>=c)a=g;else{if(!(i[2*g+1]<c)){t=i[2*g+2];break}o=1+g}}var _=t?t.indexOf("overlay "):-1;return _<0?t:_==0?null:t.slice(0,_-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?kr.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!dn.hasOwnProperty(t))return i;var o=dn[t],a=this.getModeAt(e);if(typeof a[t]=="string")o[a[t]]&&i.push(o[a[t]]);else if(a[t])for(var c=0;c<a[t].length;c++){var g=o[a[t][c]];g&&i.push(g)}else a.helperType&&o[a.helperType]?i.push(o[a.helperType]):o[a.name]&&i.push(o[a.name]);for(var _=0;_<o._global.length;_++){var S=o._global[_];S.pred(a,this)&&Et(i,S.val)==-1&&i.push(S.val)}return i},getStateAfter:function(e,t){var i=this.doc;return Ur(this,(e=qi(i,e??i.first+i.size-1))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary();return xr(this,e==null?i.head:typeof e=="object"?Ve(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return Lo(this,Ve(this.doc,e),t||"page")},coordsChar:function(e,t){return Fo(this,(e=As(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=As(this,{top:e,left:0},t||"page").top,Tr(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,i){var o,a=!1;if(typeof e=="number"){var c=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:c<e&&(e=c,a=!0),o=Ee(this.doc,e)}else o=e;return eo(this,o,{top:0,left:0},t||"page",i||a).top+(a?this.doc.height-m(o):0)},defaultTextHeight:function(){return In(this.display)},defaultCharWidth:function(){return On(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,o,a){var c,g,_,S=this.display,w=(e=xr(this,Ve(this.doc,e))).bottom,O=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),S.sizer.appendChild(t),o=="over")w=e.top;else if(o=="above"||o=="near"){var T=Math.max(S.wrapper.clientHeight,this.doc.height),H=Math.max(S.sizer.clientWidth,S.lineSpace.clientWidth);(o=="above"||e.bottom+t.offsetHeight>T)&&e.top>t.offsetHeight?w=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=T&&(w=e.bottom),O+t.offsetWidth>H&&(O=H-t.offsetWidth)}t.style.top=w+"px",t.style.left=t.style.right="",a=="right"?(O=S.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(a=="left"?O=0:a=="middle"&&(O=(S.sizer.clientWidth-t.offsetWidth)/2),t.style.left=O+"px"),i&&(c=this,g={left:O,top:w,right:O+t.offsetWidth,bottom:w+t.offsetHeight},(_=Vo(c,g)).scrollTop!=null&&_i(c,_.scrollTop),_.scrollLeft!=null&&ln(c,_.scrollLeft))},triggerOnKeyDown:er(La),triggerOnKeyPress:er(Fa),triggerOnKeyUp:Pa,triggerOnMouseDown:er(Ba),execCommand:function(e){if(Ni.hasOwnProperty(e))return Ni[e].call(null,this)},triggerElectric:er(function(e){ja(this,e)}),findPosH:function(e,t,i,o){var a=1;t<0&&(a=-1,t=-t);for(var c=Ve(this.doc,e),g=0;g<t&&!(c=cs(this.doc,c,a,i,o)).hitSide;++g);return c},moveH:er(function(e,t){var i=this;this.extendSelectionsBy(function(o){return i.display.shift||i.doc.extend||o.empty()?cs(i.doc,o.head,e,t,i.options.rtlMoveVisually):e<0?o.from():o.to()},tr)}),deleteH:er(function(e,t){var i=this.doc.sel,o=this.doc;i.somethingSelected()?o.replaceSelection("",null,"+delete"):Wn(this,function(a){var c=cs(o,a.head,e,t,!1);return e<0?{from:c,to:a.head}:{from:a.head,to:c}})}),findPosV:function(e,t,i,o){var a=1,c=o;t<0&&(a=-1,t=-t);for(var g=Ve(this.doc,e),_=0;_<t;++_){var S=xr(this,g,"div");if(c==null?c=S.left:S.left=c,(g=Ga(this,S,a,i)).hitSide)break}return g},moveV:er(function(e,t){var i=this,o=this.doc,a=[],c=!this.display.shift&&!o.extend&&o.sel.somethingSelected();if(o.extendSelectionsBy(function(_){if(c)return e<0?_.from():_.to();var S=xr(i,_.head,"div");_.goalColumn!=null&&(S.left=_.goalColumn),a.push(S.left);var w=Ga(i,S,e,t);return t=="page"&&_==o.sel.primary()&&jo(i,Lo(i,w,"div").top-S.top),w},tr),a.length)for(var g=0;g<o.sel.ranges.length;g++)o.sel.ranges[g].goalColumn=a[g]}),findWordAt:function(e){var t=Ee(this.doc,e.line).text,i=e.ch,o=e.ch;if(t){var a=this.getHelper(e,"wordChars");e.sticky!="before"&&o!=t.length||!i?++o:--i;for(var c=t.charAt(i),g=ae(c,a)?function(_){return ae(_,a)}:/\s/.test(c)?function(_){return/\s/.test(_)}:function(_){return!/\s/.test(_)&&!ae(_)};0<i&&g(t.charAt(i-1));)--i;for(;o<t.length&&g(t.charAt(o));)++o}return new ct(oe(e.line,i),oe(e.line,o))},toggleOverwrite:function(e){e!=null&&e==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?Ke:Mt)(this.display.cursorDiv,"CodeMirror-overwrite"),Ct(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Qe()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:er(function(e,t){yi(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ar(this)-this.display.barHeight,width:e.scrollWidth-Ar(this)-this.display.barWidth,clientHeight:Oo(this),clientWidth:nn(this)}},scrollIntoView:er(function(e,t){var i,o;e==null?(e={from:this.doc.sel.primary().head,to:null},t==null&&(t=this.options.cursorScrollMargin)):typeof e=="number"?e={from:oe(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,e.from.line!=null?(o=e,oo(i=this),i.curOp.scrollToPos=o):Ws(this,e.from,e.to,e.margin)}),setSize:er(function(e,t){function i(c){return typeof c=="number"||/^\d+$/.test(String(c))?c+"px":c}var o=this;e!=null&&(this.display.wrapper.style.width=i(e)),t!=null&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Ms(this);var a=this.display.viewFrom;this.doc.iter(a,this.display.viewTo,function(c){if(c.widgets){for(var g=0;g<c.widgets.length;g++)if(c.widgets[g].noHScroll){Vr(o,a,"widget");break}}++a}),this.curOp.forceUpdate=!0,Ct(this,"refresh",this)}),operation:function(e){return lr(this,e)},startOperation:function(){return cn(this)},endOperation:function(){return fn(this)},refresh:er(function(){var e=this.display.cachedTextHeight;nr(this),this.curOp.forceUpdate=!0,gi(this),yi(this,this.doc.scrollLeft,this.doc.scrollTop),qo(this.display),(e==null||.5<Math.abs(e-In(this.display)))&&Wo(this),Ct(this,"refresh",this)}),swapDoc:er(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),ea(this,e),gi(this),this.display.input.reset(),yi(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ht(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Br(kr),kr.registerHelper=function(e,t,i){dn.hasOwnProperty(e)||(dn[e]=kr[e]={_global:[]}),dn[e][t]=i},kr.registerGlobalHelper=function(e,t,i,o){kr.registerHelper(e,t,o),dn[e]._global.push({pred:i,val:o})};var Ze,Ol="iter insert remove copy getEditor constructor".split(" ");for(var xo in ir.prototype)ir.prototype.hasOwnProperty(xo)&&Et(Ol,xo)<0&&(bt.prototype[xo]=function(e){return function(){return e.apply(this.doc,arguments)}}(ir.prototype[xo]));return Br(ir),bt.inputStyles={textarea:At,contenteditable:pt},bt.defineMode=function(e){bt.defaults.mode||e=="null"||(bt.defaults.mode=e),(function(t,i){2<arguments.length&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Jn[t]=i}).apply(this,arguments)},bt.defineMIME=function(e,t){Hr[e]=t},bt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),bt.defineMIME("text/plain","null"),bt.defineExtension=function(e,t){bt.prototype[e]=t},bt.defineDocExtension=function(e,t){ir.prototype[e]=t},bt.fromTextArea=function(e,t){if((t=t?Ot(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=Qe();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function o(){e.value=_.getValue()}var a;if(e.form&&(Be(e.form,"submit",o),!t.leaveSubmitMethodAlone)){var c=e.form;a=c.submit;try{var g=c.submit=function(){o(),c.submit=a,c.submit(),c.submit=g}}catch{}}t.finishInit=function(S){S.save=o,S.getTextArea=function(){return e},S.toTextArea=function(){S.toTextArea=isNaN,o(),e.parentNode.removeChild(S.getWrapperElement()),e.style.display="",e.form&&(qt(e.form,"submit",o),t.leaveSubmitMethodAlone||typeof e.form.submit!="function"||(e.form.submit=a))}},e.style.display="none";var _=bt(function(S){return e.parentNode.insertBefore(S,e.nextSibling)},t);return _},(Ze=bt).off=qt,Ze.on=Be,Ze.wheelEventPixels=ml,Ze.Doc=ir,Ze.splitLines=mn,Ze.countColumn=vt,Ze.findColumn=fr,Ze.isWordChar=he,Ze.Pass=Kt,Ze.signal=Ct,Ze.Line=M,Ze.changeEnd=$r,Ze.scrollbarModel=Vs,Ze.Pos=oe,Ze.cmpPos=ze,Ze.modes=Jn,Ze.mimeModes=Hr,Ze.resolveMode=Dr,Ze.getMode=Xn,Ze.modeExtensions=Xt,Ze.extendMode=Ao,Ze.copyState=Er,Ze.startState=$i,Ze.innerMode=Qn,Ze.commands=Ni,Ze.keyMap=Fr,Ze.keyName=Aa,Ze.isModifierKey=Ea,Ze.lookupKey=Dn,Ze.normalizeKeyMap=kl,Ze.StringStream=St,Ze.SharedTextMarker=Ii,Ze.TextMarker=Gr,Ze.LineWidget=Ai,Ze.e_preventDefault=Gt,Ze.e_stopPropagation=qn,Ze.e_stop=vr,Ze.addClass=Ke,Ze.contains=It,Ze.rmClass=Mt,Ze.keyNames=Zr,bt.version="5.52.2",bt});const cm_min="";(function(r){typeof exports=="object"&&typeof module=="object"?r(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/dialog/dialog"),require("../addon/edit/matchbrackets.js")):typeof define=="function"&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog","../addon/edit/matchbrackets"],r):r(CodeMirror)})(function(r){var n=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],l=n.length,u=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],f=r.Pos,v=function(){function x(s){s.setOption("disableInput",!0),s.setOption("showCursorWhenSelecting",!1),r.signal(s,"vim-mode-change",{mode:"normal"}),s.on("cursorActivity",kn),Rt(s),r.on(s.getInputField(),"paste",re(s))}function k(s){s.setOption("disableInput",!1),s.off("cursorActivity",kn),r.off(s.getInputField(),"paste",re(s)),s.state.vim=null}function E(s,d){this==r.keyMap.vim&&(r.rmClass(s.getWrapperElement(),"cm-fat-cursor"),s.getOption("inputStyle")=="contenteditable"&&document.body.style.caretColor!=null&&(j(s),s.getInputField().style.caretColor="")),(!d||d.attach!=R)&&k(s)}function R(s,d){this==r.keyMap.vim&&(r.addClass(s.getWrapperElement(),"cm-fat-cursor"),s.getOption("inputStyle")=="contenteditable"&&document.body.style.caretColor!=null&&(Z(s),s.getInputField().style.caretColor="transparent")),(!d||d.attach!=R)&&x(s)}function z(s){if(s.state.fatCursorMarks){F(s);for(var d=s.listSelections(),h=[],m=0;m<d.length;m++){var y=d[m];if(y.empty()){var b=s.getLine(y.anchor.line).length;y.anchor.ch<b?h.push(s.markText(y.anchor,f(y.anchor.line,y.anchor.ch+1),{className:"cm-fat-cursor-mark"})):h.push(s.markText(f(y.anchor.line,b-1),f(y.anchor.line,b),{className:"cm-fat-cursor-mark"}))}}s.state.fatCursorMarks=h}}function F(s){var d=s.state.fatCursorMarks;if(d)for(var h=0;h<d.length;h++)d[h].clear()}function Z(s){s.state.fatCursorMarks=[],z(s),s.on("cursorActivity",z)}function j(s){F(s),s.off("cursorActivity",z),s.state.fatCursorMarks=null}r.defineOption("vimMode",!1,function(s,d,h){d&&s.getOption("keyMap")!="vim"?s.setOption("keyMap","vim"):!d&&h!=r.Init&&/^vim/.test(s.getOption("keyMap"))&&s.setOption("keyMap","default")});function fe(s,d){if(d){if(this[s])return this[s];var h=xe(s);if(!h)return!1;var m=r.Vim.findKey(d,h);return typeof m=="function"&&r.signal(d,"vim-keypress",h),m}}var J={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},ge={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function xe(s){if(s.charAt(0)=="'")return s.charAt(1);var d=s.split(/-(?!$)/),h=d[d.length-1];if(d.length==1&&d[0].length==1)return!1;if(d.length==2&&d[0]=="Shift"&&h.length==1)return!1;for(var m=!1,y=0;y<d.length;y++){var b=d[y];b in J?d[y]=J[b]:m=!0,b in ge&&(d[y]=ge[b])}return m?(Qe(h)&&(d[d.length-1]=h.toLowerCase()),"<"+d.join("-")+">"):!1}function re(s){var d=s.state.vim;return d.onPasteFn||(d.onPasteFn=function(){d.insertMode||(s.setCursor(je(s.getCursor(),0,1)),Me.enterInsertMode(s,{},d))}),d.onPasteFn}var Ae=/[\d]/,Ce=[r.isWordChar,function(s){return s&&!r.isWordChar(s)&&!/\s/.test(s)}],nt=[function(s){return/\S/.test(s)}];function Xe(s,d){for(var h=[],m=s;m<s+d;m++)h.push(String.fromCharCode(m));return h}var mt=Xe(65,26),yt=Xe(97,26),Ut=Xe(48,10),Mt=[].concat(mt,yt,Ut,["<",">"]),wt=[].concat(mt,yt,Ut,["-",'"',".",":","/"]);function at(s,d){return d>=s.firstLine()&&d<=s.lastLine()}function _e(s){return/^[a-z]$/.test(s)}function Jt(s){return"()[]{}".indexOf(s)!=-1}function It(s){return Ae.test(s)}function Qe(s){return/^[A-Z]$/.test(s)}function Ke(s){return/^\s*$/.test(s)}function ot(s){return".?!".indexOf(s)!=-1}function jt(s,d){for(var h=0;h<d.length;h++)if(d[h]==s)return!0;return!1}var Pt={};function Ot(s,d,h,m,y){if(d===void 0&&!y)throw Error("defaultValue is required unless callback is provided");if(h||(h="string"),Pt[s]={type:h,defaultValue:d,callback:y},m)for(var b=0;b<m.length;b++)Pt[m[b]]=Pt[s];d&&vt(s,d)}function vt(s,d,h,m){var y=Pt[s];m=m||{};var b=m.scope;if(!y)return new Error("Unknown option: "+s);if(y.type=="boolean"){if(d&&d!==!0)return new Error("Invalid argument: "+s+"="+d);d!==!1&&(d=!0)}y.callback?(b!=="local"&&y.callback(d,void 0),b!=="global"&&h&&y.callback(d,h)):(b!=="local"&&(y.value=y.type=="boolean"?!!d:d),b!=="global"&&h&&(h.state.vim.options[s]={value:d}))}function Ft(s,d,h){var m=Pt[s];h=h||{};var y=h.scope;if(!m)return new Error("Unknown option: "+s);if(m.callback){var b=d&&m.callback(void 0,d);return y!=="global"&&b!==void 0?b:y!=="local"?m.callback():void 0}else{var b=y!=="global"&&d&&d.state.vim.options[s];return(b||y!=="local"&&m||{}).value}}Ot("filetype",void 0,"string",["ft"],function(s,d){if(d!==void 0)if(s===void 0){var h=d.getOption("mode");return h=="null"?"":h}else{var h=s==""?"null":s;d.setOption("mode",h)}});var Et=function(){var s=100,d=-1,h=0,m=0,y=new Array(s);function b(A,B,U){var Q=d%s,te=y[Q];function K(be){var ue=++d%s,Pe=y[ue];Pe&&Pe.clear(),y[ue]=A.setBookmark(be)}if(te){var ce=te.find();ce&&!sr(ce,B)&&K(B)}else K(B);K(U),h=d,m=d-s+1,m<0&&(m=0)}function M(A,B){d+=B,d>h?d=h:d<m&&(d=m);var U=y[(s+d)%s];if(U&&!U.find()){var Q=B>0?1:-1,te,K=A.getCursor();do if(d+=Q,U=y[(s+d)%s],U&&(te=U.find())&&!sr(K,te))break;while(d<h&&d>m)}return U}function I(A,B){var U=d,Q=M(A,B);return d=U,Q&&Q.find()}return{cachedCursor:void 0,add:b,find:I,move:M}},Qr=function(s){return s?{changes:s.changes,expectCursorActivityForChange:s.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function Kt(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Qr()}Kt.prototype={exitMacroRecordMode:function(){var s=ye.macroModeState;s.onRecordingDone&&s.onRecordingDone(),s.onRecordingDone=void 0,s.isRecording=!1},enterMacroRecordMode:function(s,d){var h=ye.registerController.getRegister(d);h&&(h.clear(),this.latestRegister=d,s.openDialog&&(this.onRecordingDone=s.openDialog("(recording)["+d+"]",null,{bottom:!0})),this.isRecording=!0)}};function Rt(s){return s.state.vim||(s.state.vim={inputState:new L,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),s.state.vim}var ye;function tr(){ye={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Et(),macroModeState:new Kt,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new ne({}),searchHistoryController:new de,exCommandHistoryController:new de};for(var s in Pt){var d=Pt[s];d.value=d.defaultValue}}var fr,Mr={buildKeyMap:function(){},getRegisterController:function(){return ye.registerController},resetVimGlobalState_:tr,getVimGlobalState_:function(){return ye},maybeInitVimState_:Rt,suppressErrorLogging:!1,InsertModeKey:di,map:function(s,d,h){Nt.map(s,d,h)},unmap:function(s,d){Nt.unmap(s,d)},noremap:function(s,d,h){function m(te){return te?[te]:["normal","insert","visual"]}for(var y=m(h),b=n.length,M=l,I=b-M;I<b&&y.length;I++){var A=n[I];if(A.keys==d&&(!h||!A.context||A.context===h)&&A.type.substr(0,2)!=="ex"&&A.type.substr(0,3)!=="key"){var B={};for(var U in A)B[U]=A[U];B.keys=s,h&&!B.context&&(B.context=h),this._mapCommand(B);var Q=m(A.context);y=y.filter(function(te){return Q.indexOf(te)===-1})}}},mapclear:function(s){var d=n.length,h=l,m=n.slice(0,d-h);if(n=n.slice(d-h),s)for(var y=m.length-1;y>=0;y--){var b=m[y];if(s!==b.context)if(b.context)this._mapCommand(b);else{var M=["normal","insert","visual"];for(var I in M)if(M[I]!==s){var A={};for(var B in b)A[B]=b[B];A.context=M[I],this._mapCommand(A)}}}},setOption:vt,getOption:Ft,defineOption:Ot,defineEx:function(s,d,h){if(!d)d=s;else if(s.indexOf(d)!==0)throw new Error('(Vim.defineEx) "'+d+'" is not a prefix of "'+s+'", command not registered');li[s]=h,Nt.commandMap_[d]={name:s,shortName:d,type:"api"}},handleKey:function(s,d,h){var m=this.findKey(s,d,h);if(typeof m=="function")return m()},findKey:function(s,d,h){var m=Rt(s);function y(){var U=ye.macroModeState;if(U.isRecording){if(d=="q")return U.exitMacroRecordMode(),N(s),!0;h!="mapping"&&Ji(U,d)}}function b(){if(d=="<Esc>")return N(s),m.visualMode?ar(s):m.insertMode&&wr(s),!0}function M(U){for(var Q;U;)Q=/<\w+-.+?>|<\w+>|./.exec(U),d=Q[0],U=U.substring(Q.index+d.length),r.Vim.handleKey(s,d,"mapping")}function I(){if(b())return!0;for(var U=m.inputState.keyBuffer=m.inputState.keyBuffer+d,Q=d.length==1,te=he.matchCommand(U,n,m.inputState,"insert");U.length>1&&te.type!="full";){var U=m.inputState.keyBuffer=U.slice(1),K=he.matchCommand(U,n,m.inputState,"insert");K.type!="none"&&(te=K)}if(te.type=="none")return N(s),!1;if(te.type=="partial")return fr&&window.clearTimeout(fr),fr=window.setTimeout(function(){m.insertMode&&m.inputState.keyBuffer&&N(s)},Ft("insertModeEscKeysTimeout")),!Q;if(fr&&window.clearTimeout(fr),Q){for(var ce=s.listSelections(),be=0;be<ce.length;be++){var ue=ce[be].head;s.replaceRange("",je(ue,0,-(U.length-1)),ue,"+input")}ye.macroModeState.lastInsertModeChanges.changes.pop()}return N(s),te.command}function A(){if(y()||b())return!0;var U=m.inputState.keyBuffer=m.inputState.keyBuffer+d;if(/^[1-9]\d*$/.test(U))return!0;var K=/^(\d*)(.*)$/.exec(U);if(!K)return N(s),!1;var Q=m.visualMode?"visual":"normal",te=he.matchCommand(K[2]||K[1],n,m.inputState,Q);if(te.type=="none")return N(s),!1;if(te.type=="partial")return!0;m.inputState.keyBuffer="";var K=/^(\d*)(.*)$/.exec(U);return K[1]&&K[1]!="0"&&m.inputState.pushRepeatDigit(K[1]),te.command}var B;return m.insertMode?B=I():B=A(),B===!1?!m.insertMode&&d.length===1?function(){return!0}:void 0:B===!0?function(){return!0}:function(){return s.operation(function(){s.curOp.isVimOp=!0;try{B.type=="keyToKey"?M(B.toKeys):he.processCommand(s,m,B)}catch(U){throw s.state.vim=void 0,Rt(s),r.Vim.suppressErrorLogging||console.log(U),U}return!0})}},handleEx:function(s,d){Nt.processCommand(s,d)},defineMotion:pe,defineAction:De,defineOperator:Se,mapCommand:ui,_mapCommand:Zi,defineRegister:ie,exitVisualMode:ar,exitInsertMode:wr};function L(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}L.prototype.pushRepeatDigit=function(s){this.operator?this.motionRepeat=this.motionRepeat.concat(s):this.prefixRepeat=this.prefixRepeat.concat(s)},L.prototype.getRepeat=function(){var s=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(s=1,this.prefixRepeat.length>0&&(s*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(s*=parseInt(this.motionRepeat.join(""),10))),s};function N(s,d){s.state.vim.inputState=new L,r.signal(s,"vim-command-done",d)}function $(s,d,h){this.clear(),this.keyBuffer=[s||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!d,this.blockwise=!!h}$.prototype={setText:function(s,d,h){this.keyBuffer=[s||""],this.linewise=!!d,this.blockwise=!!h},pushText:function(s,d){d&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(s)},pushInsertModeChanges:function(s){this.insertModeChanges.push(Qr(s))},pushSearchQuery:function(s){this.searchQueries.push(s)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function ie(s,d){var h=ye.registerController.registers;if(!s||s.length!=1)throw Error("Register name must be 1 character");if(h[s])throw Error("Register already defined "+s);h[s]=d,wt.push(s)}function ne(s){this.registers=s,this.unnamedRegister=s['"']=new $,s["."]=new $,s[":"]=new $,s["/"]=new $}ne.prototype={pushText:function(s,d,h,m,y){m&&h.charAt(h.length-1)!==`
`&&(h+=`
`);var b=this.isValidRegister(s)?this.getRegister(s):null;if(!b){switch(d){case"yank":this.registers[0]=new $(h,m,y);break;case"delete":case"change":h.indexOf(`
`)==-1?this.registers["-"]=new $(h,m):(this.shiftNumericRegisters_(),this.registers[1]=new $(h,m));break}this.unnamedRegister.setText(h,m,y);return}var M=Qe(s);M?b.pushText(h,m):b.setText(h,m,y),this.unnamedRegister.setText(b.toString(),m)},getRegister:function(s){return this.isValidRegister(s)?(s=s.toLowerCase(),this.registers[s]||(this.registers[s]=new $),this.registers[s]):this.unnamedRegister},isValidRegister:function(s){return s&&jt(s,wt)},shiftNumericRegisters_:function(){for(var s=9;s>=2;s--)this.registers[s]=this.getRegister(""+(s-1))}};function de(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}de.prototype={nextMatch:function(s,d){var h=this.historyBuffer,m=d?-1:1;this.initialPrefix===null&&(this.initialPrefix=s);for(var y=this.iterator+m;d?y>=0:y<h.length;y+=m)for(var b=h[y],M=0;M<=b.length;M++)if(this.initialPrefix==b.substring(0,M))return this.iterator=y,b;if(y>=h.length)return this.iterator=h.length,this.initialPrefix;if(y<0)return s},pushInput:function(s){var d=this.historyBuffer.indexOf(s);d>-1&&this.historyBuffer.splice(d,1),s.length&&this.historyBuffer.push(s)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var he={matchCommand:function(s,d,h,m){var y=_t(s,d,m,h);if(!y.full&&!y.partial)return{type:"none"};if(!y.full&&y.partial)return{type:"partial"};for(var b,M=0;M<y.full.length;M++){var I=y.full[M];b||(b=I)}if(b.keys.slice(-11)=="<character>"){var A=mr(s);if(!A)return{type:"none"};h.selectedCharacter=A}return{type:"full",command:b}},processCommand:function(s,d,h){switch(d.inputState.repeatOverride=h.repeatOverride,h.type){case"motion":this.processMotion(s,d,h);break;case"operator":this.processOperator(s,d,h);break;case"operatorMotion":this.processOperatorMotion(s,d,h);break;case"action":this.processAction(s,d,h);break;case"search":this.processSearch(s,d,h);break;case"ex":case"keyToEx":this.processEx(s,d,h);break}},processMotion:function(s,d,h){d.inputState.motion=h.motion,d.inputState.motionArgs=it(h.motionArgs),this.evalInput(s,d)},processOperator:function(s,d,h){var m=d.inputState;if(m.operator)if(m.operator==h.operator){m.motion="expandToLine",m.motionArgs={linewise:!0},this.evalInput(s,d);return}else N(s);m.operator=h.operator,m.operatorArgs=it(h.operatorArgs),h.exitVisualBlock&&(d.visualBlock=!1,vr(s)),d.visualMode&&this.evalInput(s,d)},processOperatorMotion:function(s,d,h){var m=d.visualMode,y=it(h.operatorMotionArgs);y&&m&&y.visualLine&&(d.visualLine=!0),this.processOperator(s,d,h),m||this.processMotion(s,d,h)},processAction:function(s,d,h){var m=d.inputState,y=m.getRepeat(),b=!!y,M=it(h.actionArgs)||{};m.selectedCharacter&&(M.selectedCharacter=m.selectedCharacter),h.operator&&this.processOperator(s,d,h),h.motion&&this.processMotion(s,d,h),(h.motion||h.operator)&&this.evalInput(s,d),M.repeat=y||1,M.repeatIsExplicit=b,M.registerName=m.registerName,N(s),d.lastMotion=null,h.isEdit&&this.recordLastEdit(d,m,h),Me[h.action](s,M,d)},processSearch:function(s,d,h){if(!s.getSearchCursor)return;var m=h.searchArgs.forward,y=h.searchArgs.wholeWordOnly;Zt(s).setReversed(!m);var b=m?"/":"?",M=Zt(s).getQuery(),I=s.getScrollInfo();function A(ue,Pe,Ue){ye.searchHistoryController.pushInput(ue),ye.searchHistoryController.reset();try{Qt(s,ue,Pe,Ue)}catch{dt(s,"Invalid regex: "+ue),N(s);return}he.processMotion(s,d,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:h.searchArgs.toJumplist}})}function B(ue){s.scrollTo(I.left,I.top),A(ue,!0,!0);var Pe=ye.macroModeState;Pe.isRecording&&Sn(Pe,ue)}function U(ue,Pe,Ue){var Ge=r.keyName(ue),gt,ht;Ge=="Up"||Ge=="Down"?(gt=Ge=="Up",ht=ue.target?ue.target.selectionEnd:0,Pe=ye.searchHistoryController.nextMatch(Pe,gt)||"",Ue(Pe),ht&&ue.target&&(ue.target.selectionEnd=ue.target.selectionStart=Math.min(ht,ue.target.value.length))):Ge!="Left"&&Ge!="Right"&&Ge!="Ctrl"&&Ge!="Alt"&&Ge!="Shift"&&ye.searchHistoryController.reset();var kt;try{kt=Qt(s,Pe,!0,!0)}catch{}kt?s.scrollIntoView(bn(s,!m,kt),30):(wn(s),s.scrollTo(I.left,I.top))}function Q(ue,Pe,Ue){var Ge=r.keyName(ue);Ge=="Esc"||Ge=="Ctrl-C"||Ge=="Ctrl-["||Ge=="Backspace"&&Pe==""?(ye.searchHistoryController.pushInput(Pe),ye.searchHistoryController.reset(),Qt(s,M),wn(s),s.scrollTo(I.left,I.top),r.e_stop(ue),N(s),Ue(),s.focus()):Ge=="Up"||Ge=="Down"?r.e_stop(ue):Ge=="Ctrl-U"&&(r.e_stop(ue),Ue(""))}switch(h.searchArgs.querySrc){case"prompt":var te=ye.macroModeState;if(te.isPlaying){var be=te.replaySearchQueries.shift();A(be,!0,!1)}else tn(s,{onClose:B,prefix:b,desc:Ve,onKeyUp:U,onKeyDown:Q});break;case"wordUnderCursor":var K=pn(s,!1,!0,!1,!0),ce=!0;if(K||(K=pn(s,!1,!0,!1,!1),ce=!1),!K)return;var be=s.getLine(K.start.line).substring(K.start.ch,K.end.ch);ce&&y?be="\\b"+be+"\\b":be=Ct(be),ye.jumpList.cachedCursor=s.getCursor(),s.setCursor(K.start),A(be,!0,!1);break}},processEx:function(s,d,h){function m(b){ye.exCommandHistoryController.pushInput(b),ye.exCommandHistoryController.reset(),Nt.processCommand(s,b)}function y(b,M,I){var A=r.keyName(b),B,U;(A=="Esc"||A=="Ctrl-C"||A=="Ctrl-["||A=="Backspace"&&M=="")&&(ye.exCommandHistoryController.pushInput(M),ye.exCommandHistoryController.reset(),r.e_stop(b),N(s),I(),s.focus()),A=="Up"||A=="Down"?(r.e_stop(b),B=A=="Up",U=b.target?b.target.selectionEnd:0,M=ye.exCommandHistoryController.nextMatch(M,B)||"",I(M),U&&b.target&&(b.target.selectionEnd=b.target.selectionStart=Math.min(U,b.target.value.length))):A=="Ctrl-U"?(r.e_stop(b),I("")):A!="Left"&&A!="Right"&&A!="Ctrl"&&A!="Alt"&&A!="Shift"&&ye.exCommandHistoryController.reset()}h.type=="keyToEx"?Nt.processCommand(s,h.exArgs.input):d.visualMode?tn(s,{onClose:m,prefix:":",value:"'<,'>",onKeyDown:y,selectValueOnOpen:!1}):tn(s,{onClose:m,prefix:":",onKeyDown:y})},evalInput:function(s,d){var h=d.inputState,m=h.motion,y=h.motionArgs||{},b=h.operator,M=h.operatorArgs||{},I=h.registerName,A=d.sel,B=st(d.visualMode?Le(s,A.head):s.getCursor("head")),U=st(d.visualMode?Le(s,A.anchor):s.getCursor("anchor")),Q=st(B),te=st(U),K,ce,be;if(b&&this.recordLastEdit(d,h),h.repeatOverride!==void 0?be=h.repeatOverride:be=h.getRepeat(),be>0&&y.explicitRepeat?y.repeatIsExplicit=!0:(y.noRepeat||!y.explicitRepeat&&be===0)&&(be=1,y.repeatIsExplicit=!1),h.selectedCharacter&&(y.selectedCharacter=M.selectedCharacter=h.selectedCharacter),y.repeat=be,N(s),m){var ue=ae[m](s,B,y,d);if(d.lastMotion=ae[m],!ue)return;if(y.toJumplist){var Pe=ye.jumpList,Ue=Pe.cachedCursor;Ue?(gn(s,Ue,ue),delete Pe.cachedCursor):gn(s,B,ue)}ue instanceof Array?(ce=ue[0],K=ue[1]):K=ue,K||(K=st(B)),d.visualMode?(d.visualBlock&&K.ch===1/0||(K=Le(s,K)),ce&&(ce=Le(s,ce)),ce=ce||te,A.anchor=ce,A.head=K,vr(s),Xt(s,d,"<",qe(ce,K)?ce:K),Xt(s,d,">",qe(ce,K)?K:ce)):b||(K=Le(s,K),s.setCursor(K.line,K.ch))}if(b){if(M.lastSel){ce=te;var Ge=M.lastSel,gt=Math.abs(Ge.head.line-Ge.anchor.line),ht=Math.abs(Ge.head.ch-Ge.anchor.ch);Ge.visualLine?K=f(te.line+gt,te.ch):Ge.visualBlock?K=f(te.line+gt,te.ch+ht):Ge.head.line==Ge.anchor.line?K=f(te.line,te.ch+ht):K=f(te.line+gt,te.ch),d.visualMode=!0,d.visualLine=Ge.visualLine,d.visualBlock=Ge.visualBlock,A=d.sel={anchor:ce,head:K},vr(s)}else d.visualMode&&(M.lastSel={anchor:st(A.anchor),head:st(A.head),visualBlock:d.visualBlock,visualLine:d.visualLine});var kt,zt,et,Ye,Bt;if(d.visualMode){if(kt=lt(A.head,A.anchor),zt=dr(A.head,A.anchor),et=d.visualLine||M.linewise,Ye=d.visualBlock?"block":et?"line":"char",Bt=en(s,{anchor:kt,head:zt},Ye),et){var Vt=Bt.ranges;if(Ye=="block")for(var Lt=0;Lt<Vt.length;Lt++)Vt[Lt].head.ch=xt(s,Vt[Lt].head.line);else Ye=="line"&&(Vt[0].head=f(Vt[0].head.line+1,0))}}else{if(kt=st(ce||te),zt=st(K||Q),qe(zt,kt)){var Lr=kt;kt=zt,zt=Lr}et=y.linewise||M.linewise,et?Eo(s,kt,zt):y.forward&&Zn(s,kt,zt),Ye="char";var zr=!y.inclusive||et;Bt=en(s,{anchor:kt,head:zt},Ye,zr)}s.setSelections(Bt.ranges,Bt.primary),d.lastMotion=null,M.repeat=be,M.registerName=I,M.linewise=et;var Tn=Ie[b](s,M,Bt.ranges,te,K);d.visualMode&&ar(s,Tn!=null),Tn&&s.setCursor(Tn)}},recordLastEdit:function(s,d,h){var m=ye.macroModeState;m.isPlaying||(s.lastEditInputState=d,s.lastEditActionCommand=h,m.lastInsertModeChanges.changes=[],m.lastInsertModeChanges.expectCursorActivityForChange=!1,m.lastInsertModeChanges.visualBlock=s.visualBlock?s.sel.head.line-s.sel.anchor.line:0)}},ae={moveToTopLine:function(s,d,h){var m=xn(s).top+h.repeat-1;return f(m,yr(s.getLine(m)))},moveToMiddleLine:function(s){var d=xn(s),h=Math.floor((d.top+d.bottom)*.5);return f(h,yr(s.getLine(h)))},moveToBottomLine:function(s,d,h){var m=xn(s).bottom-h.repeat+1;return f(m,yr(s.getLine(m)))},expandToLine:function(s,d,h){var m=d;return f(m.line+h.repeat-1,1/0)},findNext:function(s,d,h){var m=Zt(s),y=m.getQuery();if(y){var b=!h.forward;return b=m.isReversed()?!b:b,Ur(s,y),bn(s,b,y,h.repeat)}},goToMark:function(s,d,h,m){var y=oi(s,m,h.selectedCharacter);return y?h.linewise?{line:y.line,ch:yr(s.getLine(y.line))}:y:null},moveToOtherHighlightedEnd:function(s,d,h,m){if(m.visualBlock&&h.sameLine){var y=m.sel;return[Le(s,f(y.anchor.line,y.head.ch)),Le(s,f(y.head.line,y.anchor.ch))]}else return[m.sel.head,m.sel.anchor]},jumpToMark:function(s,d,h,m){for(var y=d,b=0;b<h.repeat;b++){var M=y;for(var I in m.marks)if(_e(I)){var A=m.marks[I].find(),B=h.forward?qe(A,M):qe(M,A);if(!B&&!(h.linewise&&A.line==M.line)){var U=sr(M,y),Q=h.forward?Be(M,A,y):Be(y,A,M);(U||Q)&&(y=A)}}}return h.linewise&&(y=f(y.line,yr(s.getLine(y.line)))),y},moveByCharacters:function(s,d,h){var m=d,y=h.repeat,b=h.forward?m.ch+y:m.ch-y;return f(m.line,b)},moveByLines:function(s,d,h,m){var y=d,b=y.ch;switch(m.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:b=m.lastHPos;break;default:m.lastHPos=b}var M=h.repeat+(h.repeatOffset||0),I=h.forward?y.line+M:y.line-M,A=s.firstLine(),B=s.lastLine(),U=s.findPosV(y,h.forward?M:-M,"line",m.lastHSPos),Q=h.forward?U.line>I:U.line<I;return Q&&(I=U.line,b=U.ch),I<A&&y.line==A?this.moveToStartOfLine(s,d,h,m):I>B&&y.line==B?this.moveToEol(s,d,h,m,!0):(h.toFirstChar&&(b=yr(s.getLine(I)),m.lastHPos=b),m.lastHSPos=s.charCoords(f(I,b),"div").left,f(I,b))},moveByDisplayLines:function(s,d,h,m){var y=d;switch(m.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:m.lastHSPos=s.charCoords(y,"div").left}var b=h.repeat,M=s.findPosV(y,h.forward?b:-b,"line",m.lastHSPos);if(M.hitSide)if(h.forward)var I=s.charCoords(M,"div"),A={top:I.top+8,left:m.lastHSPos},M=s.coordsChar(A,"div");else{var B=s.charCoords(f(s.firstLine(),0),"div");B.left=m.lastHSPos,M=s.coordsChar(B,"div")}return m.lastHPos=M.ch,M},moveByPage:function(s,d,h){var m=d,y=h.repeat;return s.findPosV(m,h.forward?y:-y,"page")},moveByParagraph:function(s,d,h){var m=h.forward?1:-1;return Er(s,d,h.repeat,m)},moveBySentence:function(s,d,h){var m=h.forward?1:-1;return Qn(s,d,h.repeat,m)},moveByScroll:function(s,d,h,m){var y=s.getScrollInfo(),I=null,b=h.repeat;b||(b=y.clientHeight/(2*s.defaultTextHeight()));var M=s.charCoords(d,"local");h.repeat=b;var I=ae.moveByDisplayLines(s,d,h,m);if(!I)return null;var A=s.charCoords(I,"local");return s.scrollTo(null,y.top+A.top-M.top),I},moveByWords:function(s,d,h){return Hr(s,d,h.repeat,!!h.forward,!!h.wordEnd,!!h.bigWord)},moveTillCharacter:function(s,d,h){var m=h.repeat,y=Dr(s,m,h.forward,h.selectedCharacter),b=h.forward?-1:1;return mn(b,h),y?(y.ch+=b,y):null},moveToCharacter:function(s,d,h){var m=h.repeat;return mn(0,h),Dr(s,m,h.forward,h.selectedCharacter)||d},moveToSymbol:function(s,d,h){var m=h.repeat;return Yn(s,m,h.forward,h.selectedCharacter)||d},moveToColumn:function(s,d,h,m){var y=h.repeat;return m.lastHPos=y-1,m.lastHSPos=s.charCoords(d,"div").left,Xn(s,y)},moveToEol:function(s,d,h,m,y){var b=d,M=f(b.line+h.repeat-1,1/0),I=s.clipPos(M);return I.ch--,y||(m.lastHPos=1/0,m.lastHSPos=s.charCoords(I,"div").left),M},moveToFirstNonWhiteSpaceCharacter:function(s,d){var h=d;return f(h.line,yr(s.getLine(h.line)))},moveToMatchedSymbol:function(s,d){for(var h=d,m=h.line,y=h.ch,b=s.getLine(m),M;y<b.length;y++)if(M=b.charAt(y),M&&Jt(M)){var I=s.getTokenTypeAt(f(m,y+1));if(I!=="string"&&I!=="comment")break}if(y<b.length){var A=y==="<"||y===">"?/[(){}[\]<>]/:/[(){}[\]]/,B=s.findMatchingBracket(f(m,y),{bracketRegex:A});return B.to}else return h},moveToStartOfLine:function(s,d){return f(d.line,0)},moveToLineOrEdgeOfDocument:function(s,d,h){var m=h.forward?s.lastLine():s.firstLine();return h.repeatIsExplicit&&(m=h.repeat-s.getOption("firstLineNumber")),f(m,yr(s.getLine(m)))},textObjectManipulation:function(s,d,h,m){var y={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},b={"'":!0,'"':!0,"`":!0},M=h.selectedCharacter;M=="b"?M="(":M=="B"&&(M="{");var I=!h.textObjectInner,A;if(y[M])A=$i(s,d,M,I);else if(b[M])A=St(s,d,M,I);else if(M==="W")A=pn(s,I,!0,!0);else if(M==="w")A=pn(s,I,!0,!1);else if(M==="p")if(A=Er(s,d,h.repeat,0,I),h.linewise=!0,m.visualMode)m.visualLine||(m.visualLine=!0);else{var B=m.inputState.operatorArgs;B&&(B.linewise=!0),A.end.line--}else return null;return s.state.vim.visualMode?Gn(s,A.start,A.end):[A.start,A.end]},repeatLastCharacterSearch:function(s,d,h){var m=ye.lastCharacterSearch,y=h.repeat,b=h.forward===m.forward,M=(m.increment?1:0)*(b?-1:1);s.moveH(-M,"char"),h.inclusive=!!b;var I=Dr(s,y,b,m.selectedCharacter);return I?(I.ch+=M,I):(s.moveH(M,"char"),d)}};function pe(s,d){ae[s]=d}function le(s,d){for(var h=[],m=0;m<d;m++)h.push(s);return h}var Ie={change:function(s,d,h){var m,y,b=s.state.vim,M=h[0].anchor,I=h[0].head;if(b.visualMode)if(d.fullLine)I.ch=Number.MAX_VALUE,I.line--,s.setSelection(M,I),y=s.getSelection(),s.replaceSelection(""),m=M;else{y=s.getSelection();var te=le("",h.length);s.replaceSelections(te),m=lt(h[0].head,h[0].anchor)}else{y=s.getRange(M,I);var A=b.lastEditInputState||{};if(A.motion=="moveByWords"&&!Ke(y)){var B=/\s+$/.exec(y);B&&A.motionArgs&&A.motionArgs.forward&&(I=je(I,0,-B[0].length),y=y.slice(0,-B[0].length))}var U=new f(M.line-1,Number.MAX_VALUE),Q=s.firstLine()==s.lastLine();I.line>s.lastLine()&&d.linewise&&!Q?s.replaceRange("",U,I):s.replaceRange("",M,I),d.linewise&&(Q||(s.setCursor(U),r.commands.newlineAndIndent(s)),M.ch=Number.MAX_VALUE),m=M}ye.registerController.pushText(d.registerName,"change",y,d.linewise,h.length>1),Me.enterInsertMode(s,{head:m},s.state.vim)},delete:function(s,d,h){var m,y,b=s.state.vim;if(b.visualBlock){y=s.getSelection();var A=le("",h.length);s.replaceSelections(A),m=h[0].anchor}else{var M=h[0].anchor,I=h[0].head;d.linewise&&I.line!=s.firstLine()&&M.line==s.lastLine()&&M.line==I.line-1&&(M.line==s.firstLine()?M.ch=0:M=f(M.line-1,xt(s,M.line-1))),y=s.getRange(M,I),s.replaceRange("",M,I),m=M,d.linewise&&(m=ae.moveToFirstNonWhiteSpaceCharacter(s,M))}return ye.registerController.pushText(d.registerName,"delete",y,d.linewise,b.visualBlock),Le(s,m)},indent:function(s,d,h){var m=s.state.vim,y=h[0].anchor.line,b=m.visualBlock?h[h.length-1].anchor.line:h[0].head.line,M=m.visualMode?d.repeat:1;d.linewise&&b--;for(var I=y;I<=b;I++)for(var A=0;A<M;A++)s.indentLine(I,d.indentRight);return ae.moveToFirstNonWhiteSpaceCharacter(s,h[0].anchor)},indentAuto:function(s,d,h){return s.execCommand("indentAuto"),ae.moveToFirstNonWhiteSpaceCharacter(s,h[0].anchor)},changeCase:function(s,d,h,m,y){for(var b=s.getSelections(),M=[],I=d.toLower,A=0;A<b.length;A++){var B=b[A],U="";if(I===!0)U=B.toLowerCase();else if(I===!1)U=B.toUpperCase();else for(var Q=0;Q<B.length;Q++){var te=B.charAt(Q);U+=Qe(te)?te.toLowerCase():te.toUpperCase()}M.push(U)}return s.replaceSelections(M),d.shouldMoveCursor?y:!s.state.vim.visualMode&&d.linewise&&h[0].anchor.line+1==h[0].head.line?ae.moveToFirstNonWhiteSpaceCharacter(s,m):d.linewise?m:lt(h[0].anchor,h[0].head)},yank:function(s,d,h,m){var y=s.state.vim,b=s.getSelection(),M=y.visualMode?lt(y.sel.anchor,y.sel.head,h[0].head,h[0].anchor):m;return ye.registerController.pushText(d.registerName,"yank",b,d.linewise,y.visualBlock),M}};function Se(s,d){Ie[s]=d}var Me={jumpListWalk:function(s,d,h){if(!h.visualMode){var m=d.repeat,y=d.forward,b=ye.jumpList,M=b.move(s,y?m:-m),I=M?M.find():void 0;I=I||s.getCursor(),s.setCursor(I)}},scroll:function(s,d,h){if(!h.visualMode){var m=d.repeat||1,y=s.defaultTextHeight(),b=s.getScrollInfo().top,M=y*m,I=d.forward?b+M:b-M,A=st(s.getCursor()),B=s.charCoords(A,"local");if(d.forward)I>B.top?(A.line+=(I-B.top)/y,A.line=Math.ceil(A.line),s.setCursor(A),B=s.charCoords(A,"local"),s.scrollTo(null,B.top)):s.scrollTo(null,I);else{var U=I+s.getScrollInfo().clientHeight;U<B.bottom?(A.line-=(B.bottom-U)/y,A.line=Math.floor(A.line),s.setCursor(A),B=s.charCoords(A,"local"),s.scrollTo(null,B.bottom-s.getScrollInfo().clientHeight)):s.scrollTo(null,I)}}},scrollToCursor:function(s,d){var h=s.getCursor().line,m=s.charCoords(f(h,0),"local"),y=s.getScrollInfo().clientHeight,b=m.top,M=m.bottom-b;switch(d.position){case"center":b=b-y/2+M;break;case"bottom":b=b-y+M;break}s.scrollTo(null,b)},replayMacro:function(s,d,h){var m=d.selectedCharacter,y=d.repeat,b=ye.macroModeState;for(m=="@"?m=b.latestRegister:b.latestRegister=m;y--;)Yi(s,h,b,m)},enterMacroRecordMode:function(s,d){var h=ye.macroModeState,m=d.selectedCharacter;ye.registerController.isValidRegister(m)&&h.enterMacroRecordMode(s,m)},toggleOverwrite:function(s){s.state.overwrite?(s.toggleOverwrite(!1),s.setOption("keyMap","vim-insert"),r.signal(s,"vim-mode-change",{mode:"insert"})):(s.toggleOverwrite(!0),s.setOption("keyMap","vim-replace"),r.signal(s,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(s,d,h){if(!s.getOption("readOnly")){h.insertMode=!0,h.insertModeRepeat=d&&d.repeat||1;var m=d?d.insertAt:null,y=h.sel,b=d.head||s.getCursor("head"),M=s.listSelections().length;if(m=="eol")b=f(b.line,xt(s,b.line));else if(m=="bol")b=f(b.line,0);else if(m=="charAfter")b=je(b,0,1);else if(m=="firstNonBlank")b=ae.moveToFirstNonWhiteSpaceCharacter(s,b);else if(m=="startOfSelectedArea"){if(!h.visualMode)return;h.visualBlock?(b=f(Math.min(y.head.line,y.anchor.line),Math.min(y.head.ch,y.anchor.ch)),M=Math.abs(y.head.line-y.anchor.line)+1):y.head.line<y.anchor.line?b=y.head:b=f(y.anchor.line,0)}else if(m=="endOfSelectedArea"){if(!h.visualMode)return;h.visualBlock?(b=f(Math.min(y.head.line,y.anchor.line),Math.max(y.head.ch+1,y.anchor.ch)),M=Math.abs(y.head.line-y.anchor.line)+1):y.head.line>=y.anchor.line?b=je(y.head,0,1):b=f(y.anchor.line,0)}else if(m=="inplace"){if(h.visualMode)return}else m=="lastEdit"&&(b=si(s)||b);s.setOption("disableInput",!1),d&&d.replace?(s.toggleOverwrite(!0),s.setOption("keyMap","vim-replace"),r.signal(s,"vim-mode-change",{mode:"replace"})):(s.toggleOverwrite(!1),s.setOption("keyMap","vim-insert"),r.signal(s,"vim-mode-change",{mode:"insert"})),ye.macroModeState.isPlaying||(s.on("change",rn),r.on(s.getInputField(),"keydown",hi)),h.visualMode&&ar(s),rr(s,b,M)}},toggleVisualMode:function(s,d,h){var m=d.repeat,y=s.getCursor(),b;h.visualMode?h.visualLine^d.linewise||h.visualBlock^d.blockwise?(h.visualLine=!!d.linewise,h.visualBlock=!!d.blockwise,r.signal(s,"vim-mode-change",{mode:"visual",subMode:h.visualLine?"linewise":h.visualBlock?"blockwise":""}),vr(s)):ar(s):(h.visualMode=!0,h.visualLine=!!d.linewise,h.visualBlock=!!d.blockwise,b=Le(s,f(y.line,y.ch+m-1)),h.sel={anchor:y,head:b},r.signal(s,"vim-mode-change",{mode:"visual",subMode:h.visualLine?"linewise":h.visualBlock?"blockwise":""}),vr(s),Xt(s,h,"<",lt(y,b)),Xt(s,h,">",dr(y,b)))},reselectLastSelection:function(s,d,h){var m=h.lastSelection;if(h.visualMode&&qn(s,h),m){var y=m.anchorMark.find(),b=m.headMark.find();if(!y||!b)return;h.sel={anchor:y,head:b},h.visualMode=!0,h.visualLine=m.visualLine,h.visualBlock=m.visualBlock,vr(s),Xt(s,h,"<",lt(y,b)),Xt(s,h,">",dr(y,b)),r.signal(s,"vim-mode-change",{mode:"visual",subMode:h.visualLine?"linewise":h.visualBlock?"blockwise":""})}},joinLines:function(s,d,h){var m,y;if(h.visualMode){if(m=s.getCursor("anchor"),y=s.getCursor("head"),qe(y,m)){var b=y;y=m,m=b}y.ch=xt(s,y.line)-1}else{var M=Math.max(d.repeat,2);m=s.getCursor(),y=Le(s,f(m.line+M-1,1/0))}for(var I=0,A=m.line;A<y.line;A++){I=xt(s,m.line);var b=f(m.line+1,xt(s,m.line+1)),B=s.getRange(m,b);B=d.keepSpaces?B.replace(/\n\r?/g,""):B.replace(/\n\s*/g," "),s.replaceRange(B,m,b)}var U=f(m.line,I);h.visualMode&&ar(s,!1),s.setCursor(U)},newLineAndEnterInsertMode:function(s,d,h){h.insertMode=!0;var m=st(s.getCursor());if(m.line===s.firstLine()&&!d.after)s.replaceRange(`
`,f(s.firstLine(),0)),s.setCursor(s.firstLine(),0);else{m.line=d.after?m.line:m.line-1,m.ch=xt(s,m.line),s.setCursor(m);var y=r.commands.newlineAndIndentContinueComment||r.commands.newlineAndIndent;y(s)}this.enterInsertMode(s,{repeat:d.repeat},h)},paste:function(s,d,h){var m=st(s.getCursor()),y=ye.registerController.getRegister(d.registerName),b=y.toString();if(b){if(d.matchIndent){var M=s.getOption("tabSize"),I=function(Lt){var Lr=Lt.split("	").length-1,zr=Lt.split(" ").length-1;return Lr*M+zr*1},A=s.getLine(s.getCursor().line),B=I(A.match(/^\s*/)[0]),U=b.replace(/\n$/,""),Q=b!==U,te=I(b.match(/^\s*/)[0]),b=U.replace(/^\s*/gm,function(Lt){var Lr=B+(I(Lt)-te);if(Lr<0)return"";if(s.getOption("indentWithTabs")){var zr=Math.floor(Lr/M);return Array(zr+1).join("	")}else return Array(Lr+1).join(" ")});b+=Q?`
`:""}if(d.repeat>1)var b=Array(d.repeat+1).join(b);var K=y.linewise,ce=y.blockwise;if(ce){b=b.split(`
`),K&&b.pop();for(var be=0;be<b.length;be++)b[be]=b[be]==""?" ":b[be];m.ch+=d.after?1:0,m.ch=Math.min(xt(s,m.line),m.ch)}else K?h.visualMode?b=h.visualLine?b.slice(0,-1):`
`+b.slice(0,b.length-1)+`
`:d.after?(b=`
`+b.slice(0,b.length-1),m.ch=xt(s,m.line)):m.ch=0:m.ch+=d.after?1:0;var ue,Pe;if(h.visualMode){h.lastPastedText=b;var Ue,Ge=Gt(s,h),gt=Ge[0],ht=Ge[1],kt=s.getSelection(),zt=s.listSelections(),et=new Array(zt.length).join("1").split("1");h.lastSelection&&(Ue=h.lastSelection.headMark.find()),ye.registerController.unnamedRegister.setText(kt),ce?(s.replaceSelections(et),ht=f(gt.line+b.length-1,gt.ch),s.setCursor(gt),$n(s,ht),s.replaceSelections(b),ue=gt):h.visualBlock?(s.replaceSelections(et),s.setCursor(gt),s.replaceRange(b,gt,gt),ue=gt):(s.replaceRange(b,gt,ht),ue=s.posFromIndex(s.indexFromPos(gt)+b.length-1)),Ue&&(h.lastSelection.headMark=s.setBookmark(Ue)),K&&(ue.ch=0)}else if(ce){s.setCursor(m);for(var be=0;be<b.length;be++){var Ye=m.line+be;Ye>s.lastLine()&&s.replaceRange(`
`,f(Ye,0));var Bt=xt(s,Ye);Bt<m.ch&&Tt(s,Ye,m.ch)}s.setCursor(m),$n(s,f(m.line+b.length-1,m.ch)),s.replaceSelections(b),ue=m}else s.replaceRange(b,m),K&&d.after?ue=f(m.line+1,yr(s.getLine(m.line+1))):K&&!d.after?ue=f(m.line,yr(s.getLine(m.line))):!K&&d.after?(Pe=s.indexFromPos(m),ue=s.posFromIndex(Pe+b.length-1)):(Pe=s.indexFromPos(m),ue=s.posFromIndex(Pe+b.length));h.visualMode&&ar(s,!1),s.setCursor(ue)}},undo:function(s,d){s.operation(function(){Nr(s,r.commands.undo,d.repeat)(),s.setCursor(s.getCursor("anchor"))})},redo:function(s,d){Nr(s,r.commands.redo,d.repeat)()},setRegister:function(s,d,h){h.inputState.registerName=d.selectedCharacter},setMark:function(s,d,h){var m=d.selectedCharacter;Xt(s,h,m,s.getCursor())},replace:function(s,d,h){var m=d.selectedCharacter,y=s.getCursor(),b,M,I=s.listSelections();if(h.visualMode)y=s.getCursor("start"),M=s.getCursor("end");else{var A=s.getLine(y.line);b=y.ch+d.repeat,b>A.length&&(b=A.length),M=f(y.line,b)}if(m==`
`)h.visualMode||s.replaceRange("",y,M),(r.commands.newlineAndIndentContinueComment||r.commands.newlineAndIndent)(s);else{var B=s.getRange(y,M);if(B=B.replace(/[^\n]/g,m),h.visualBlock){var U=new Array(s.getOption("tabSize")+1).join(" ");B=s.getSelection(),B=B.replace(/\t/g,U).replace(/[^\n]/g,m).split(`
`),s.replaceSelections(B)}else s.replaceRange(B,y,M);h.visualMode?(y=qe(I[0].anchor,I[0].head)?I[0].anchor:I[0].head,s.setCursor(y),ar(s,!1)):s.setCursor(je(M,0,-1))}},incrementNumberToken:function(s,d){for(var h=s.getCursor(),m=s.getLine(h.line),y=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,b,M,I,A;(b=y.exec(m))!==null&&(M=b.index,I=M+b[0].length,!(h.ch<I)););if(!(!d.backtrack&&I<=h.ch)){if(b){var B=b[2]||b[4],U=b[3]||b[5],Q=d.increase?1:-1,te={"0b":2,0:8,"":10,"0x":16}[B.toLowerCase()],K=parseInt(b[1]+U,te)+Q*d.repeat;A=K.toString(te);var ce=B?new Array(U.length-A.length+1+b[1].length).join("0"):"";A.charAt(0)==="-"?A="-"+B+ce+A.substr(1):A=B+ce+A;var be=f(h.line,M),ue=f(h.line,I);s.replaceRange(A,be,ue)}else return;s.setCursor(f(h.line,M+A.length-1))}},repeatLastEdit:function(s,d,h){var m=h.lastEditInputState;if(m){var y=d.repeat;y&&d.repeatIsExplicit?h.lastEditInputState.repeatOverride=y:y=h.lastEditInputState.repeatOverride||y,hr(s,h,y,!1)}},indent:function(s,d){s.indentLine(s.getCursor().line,d.indentRight)},exitInsertMode:wr};function De(s,d){Me[s]=d}function Le(s,d){var h=s.state.vim,m=h.insertMode||h.visualMode,y=Math.min(Math.max(s.firstLine(),d.line),s.lastLine()),b=xt(s,y)-1+!!m,M=Math.min(Math.max(0,d.ch),b);return f(y,M)}function it(s){var d={};for(var h in s)s.hasOwnProperty(h)&&(d[h]=s[h]);return d}function je(s,d,h){return typeof d=="object"&&(h=d.ch,d=d.line),f(s.line+d,s.ch+h)}function _t(s,d,h,m){for(var y,b=[],M=[],I=0;I<d.length;I++){var A=d[I];h=="insert"&&A.context!="insert"||A.context&&A.context!=h||m.operator&&A.type=="action"||!(y=$t(s,A.keys))||(y=="partial"&&b.push(A),y=="full"&&M.push(A))}return{partial:b.length&&b,full:M.length&&M}}function $t(s,d){if(d.slice(-11)=="<character>"){var h=d.length-11,m=s.slice(0,h),y=d.slice(0,h);return m==y&&s.length>h?"full":y.indexOf(m)==0?"partial":!1}else return s==d?"full":d.indexOf(s)==0?"partial":!1}function mr(s){var d=/^.*(<[^>]+>)$/.exec(s),h=d?d[1]:s.slice(-1);if(h.length>1)switch(h){case"<CR>":h=`
`;break;case"<Space>":h=" ";break;default:h="";break}return h}function Nr(s,d,h){return function(){for(var m=0;m<h;m++)d(s)}}function st(s){return f(s.line,s.ch)}function sr(s,d){return s.ch==d.ch&&s.line==d.line}function qe(s,d){return s.line<d.line||s.line==d.line&&s.ch<d.ch}function lt(s,d){return arguments.length>2&&(d=lt.apply(void 0,Array.prototype.slice.call(arguments,1))),qe(s,d)?s:d}function dr(s,d){return arguments.length>2&&(d=dr.apply(void 0,Array.prototype.slice.call(arguments,1))),qe(s,d)?d:s}function Be(s,d,h){var m=qe(s,d),y=qe(d,h);return m&&y}function xt(s,d){return s.getLine(d).length}function qt(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function Ct(s){return s.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function Tt(s,d,h){var m=xt(s,d),y=new Array(h-m+1).join(" ");s.setCursor(f(d,m)),s.replaceRange(y,s.getCursor())}function $n(s,d){var h=[],m=s.listSelections(),y=st(s.clipPos(d)),b=!sr(d,y),M=s.getCursor("head"),I=Br(m,M),A=sr(m[I].head,m[I].anchor),B=m.length-1,U=B-I>I?B:0,Q=m[U].anchor,te=Math.min(Q.line,y.line),K=Math.max(Q.line,y.line),ce=Q.ch,be=y.ch,ue=m[U].head.ch-ce,Pe=be-ce;ue>0&&Pe<=0?(ce++,b||be--):ue<0&&Pe>=0?(ce--,A||be++):ue<0&&Pe==-1&&(ce--,be++);for(var Ue=te;Ue<=K;Ue++){var Ge={anchor:new f(Ue,ce),head:new f(Ue,be)};h.push(Ge)}return s.setSelections(h),d.ch=be,Q.ch=ce,Q}function rr(s,d,h){for(var m=[],y=0;y<h;y++){var b=je(d,y,0);m.push({anchor:b,head:b})}s.setSelections(m,0)}function Br(s,d,h){for(var m=0;m<s.length;m++){var y=h!="head"&&sr(s[m].anchor,d),b=h!="anchor"&&sr(s[m].head,d);if(y||b)return m}return-1}function Gt(s,d){var h=d.lastSelection,m=function(){var b=s.listSelections(),M=b[0],I=b[b.length-1],A=qe(M.anchor,M.head)?M.anchor:M.head,B=qe(I.anchor,I.head)?I.head:I.anchor;return[A,B]},y=function(){var b=s.getCursor(),M=s.getCursor(),I=h.visualBlock;if(I){var A=I.width,B=I.height;M=f(b.line+B,b.ch+A);for(var U=[],Q=b.line;Q<M.line;Q++){var te=f(Q,b.ch),K=f(Q,M.ch),ce={anchor:te,head:K};U.push(ce)}s.setSelections(U)}else{var be=h.anchorMark.find(),ue=h.headMark.find(),Pe=ue.line-be.line,Ue=ue.ch-be.ch;M={line:M.line+Pe,ch:Pe?M.ch:Ue+M.ch},h.visualLine&&(b=f(b.line,0),M=f(M.line,xt(s,M.line))),s.setSelection(b,M)}return[b,M]};return d.visualMode?m():y()}function qn(s,d){var h=d.sel.anchor,m=d.sel.head;d.lastPastedText&&(m=s.posFromIndex(s.indexFromPos(h)+d.lastPastedText.length),d.lastPastedText=null),d.lastSelection={anchorMark:s.setBookmark(h),headMark:s.setBookmark(m),anchor:st(h),head:st(m),visualMode:d.visualMode,visualLine:d.visualLine,visualBlock:d.visualBlock}}function Gn(s,d,h){var m=s.state.vim.sel,y=m.head,b=m.anchor,M;return qe(h,d)&&(M=h,h=d,d=M),qe(y,b)?(y=lt(d,y),b=dr(b,h)):(b=lt(d,b),y=dr(y,h),y=je(y,0,-1),y.ch==-1&&y.line!=s.firstLine()&&(y=f(y.line-1,xt(s,y.line-1)))),[b,y]}function vr(s,d,y){var m=s.state.vim;d=d||m.sel;var y=y||m.visualLine?"line":m.visualBlock?"block":"char",b=en(s,d,y);s.setSelections(b.ranges,b.primary),ci(s)}function en(s,d,h,m){var y=st(d.head),b=st(d.anchor);if(h=="char"){var M=!m&&!qe(d.head,d.anchor)?1:0,I=qe(d.head,d.anchor)?1:0;return y=je(d.head,0,M),b=je(d.anchor,0,I),{ranges:[{anchor:b,head:y}],primary:0}}else if(h=="line"){if(qe(d.head,d.anchor))y.ch=0,b.ch=xt(s,b.line);else{b.ch=0;var A=s.lastLine();y.line>A&&(y.line=A),y.ch=xt(s,y.line)}return{ranges:[{anchor:b,head:y}],primary:0}}else if(h=="block"){for(var B=Math.min(b.line,y.line),U=Math.min(b.ch,y.ch),Q=Math.max(b.line,y.line),te=Math.max(b.ch,y.ch)+1,K=Q-B+1,ce=y.line==B?0:K-1,be=[],ue=0;ue<K;ue++)be.push({anchor:f(B+ue,U),head:f(B+ue,te)});return{ranges:be,primary:ce}}}function ji(s){var d=s.getCursor("head");return s.getSelection().length==1&&(d=lt(d,s.getCursor("anchor"))),d}function ar(s,d){var h=s.state.vim;d!==!1&&s.setCursor(Le(s,h.sel.head)),qn(s,h),h.visualMode=!1,h.visualLine=!1,h.visualBlock=!1,r.signal(s,"vim-mode-change",{mode:"normal"}),fi(h)}function Zn(s,d,h){var m=s.getRange(d,h);if(/\n\s*$/.test(m)){var y=m.split(`
`);y.pop();for(var b,b=y.pop();y.length>0&&b&&Ke(b);b=y.pop())h.line--,h.ch=0;b?(h.line--,h.ch=xt(s,h.line)):h.ch=0}}function Eo(s,d,h){d.ch=0,h.ch=0,h.line++}function yr(s){if(!s)return 0;var d=s.search(/\S/);return d==-1?s.length:d}function pn(s,d,h,m,y){for(var b=ji(s),M=s.getLine(b.line),I=b.ch,A=y?Ce[0]:nt[0];!A(M.charAt(I));)if(I++,I>=M.length)return null;m?A=nt[0]:(A=Ce[0],A(M.charAt(I))||(A=Ce[1]));for(var B=I,U=I;A(M.charAt(B))&&B<M.length;)B++;for(;A(M.charAt(U))&&U>=0;)U--;if(U++,d){for(var Q=B;/\s/.test(M.charAt(B))&&B<M.length;)B++;if(Q==B){for(var te=U;/\s/.test(M.charAt(U-1))&&U>0;)U--;U||(U=te)}}return{start:f(b.line,U),end:f(b.line,B)}}function gn(s,d,h){sr(d,h)||ye.jumpList.add(s,d,h)}function mn(s,d){ye.lastCharacterSearch.increment=s,ye.lastCharacterSearch.forward=d.forward,ye.lastCharacterSearch.selectedCharacter=d.selectedCharacter}var To={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Ki={bracket:{isComplete:function(s){if(s.nextCh===s.symb){if(s.depth++,s.depth>=1)return!0}else s.nextCh===s.reverseSymb&&s.depth--;return!1}},section:{init:function(s){s.curMoveThrough=!0,s.symb=(s.forward?"]":"[")===s.symb?"{":"}"},isComplete:function(s){return s.index===0&&s.nextCh===s.symb}},comment:{isComplete:function(s){var d=s.lastCh==="*"&&s.nextCh==="/";return s.lastCh=s.nextCh,d}},method:{init:function(s){s.symb=s.symb==="m"?"{":"}",s.reverseSymb=s.symb==="{"?"}":"{"},isComplete:function(s){return s.nextCh===s.symb}},preprocess:{init:function(s){s.index=0},isComplete:function(s){if(s.nextCh==="#"){var d=s.lineText.match(/#(\w+)/)[1];if(d==="endif"){if(s.forward&&s.depth===0)return!0;s.depth++}else if(d==="if"){if(!s.forward&&s.depth===0)return!0;s.depth--}if(d==="else"&&s.depth===0)return!0}return!1}}};function Yn(s,d,h,m){var y=st(s.getCursor()),b=h?1:-1,M=h?s.lineCount():-1,I=y.ch,A=y.line,B=s.getLine(A),U={lineText:B,nextCh:B.charAt(I),lastCh:null,index:I,symb:m,reverseSymb:(h?{")":"(","}":"{"}:{"(":")","{":"}"})[m],forward:h,depth:0,curMoveThrough:!1},Q=To[m];if(!Q)return y;var te=Ki[Q].init,K=Ki[Q].isComplete;for(te&&te(U);A!==M&&d;){if(U.index+=b,U.nextCh=U.lineText.charAt(U.index),!U.nextCh){if(A+=b,U.lineText=s.getLine(A)||"",b>0)U.index=0;else{var ce=U.lineText.length;U.index=ce>0?ce-1:0}U.nextCh=U.lineText.charAt(U.index)}K(U)&&(y.line=A,y.ch=U.index,d--)}return U.nextCh||U.curMoveThrough?f(A,U.index):y}function Jn(s,d,h,m,y){var b=d.line,M=d.ch,I=s.getLine(b),A=h?1:-1,B=m?nt:Ce;if(y&&I==""){if(b+=A,I=s.getLine(b),!at(s,b))return null;M=h?0:I.length}for(;;){if(y&&I=="")return{from:0,to:0,line:b};for(var U=A>0?I.length:-1,Q=U,te=U;M!=U;){for(var K=!1,ce=0;ce<B.length&&!K;++ce)if(B[ce](I.charAt(M))){for(Q=M;M!=U&&B[ce](I.charAt(M));)M+=A;if(te=M,K=Q!=te,Q==d.ch&&b==d.line&&te==Q+A)continue;return{from:Math.min(Q,te+1),to:Math.max(Q,te),line:b}}K||(M+=A)}if(b+=A,!at(s,b))return null;I=s.getLine(b),M=A>0?0:I.length}}function Hr(s,d,h,m,y,b){var M=st(d),I=[];(m&&!y||!m&&y)&&h++;for(var A=!(m&&y),B=0;B<h;B++){var U=Jn(s,d,m,b,A);if(!U){var Q=xt(s,s.lastLine());I.push(m?{line:s.lastLine(),from:Q,to:Q}:{line:0,from:0,to:0});break}I.push(U),d=f(U.line,m?U.to-1:U.from)}var te=I.length!=h,K=I[0],ce=I.pop();return m&&!y?(!te&&(K.from!=M.ch||K.line!=M.line)&&(ce=I.pop()),f(ce.line,ce.from)):m&&y?f(ce.line,ce.to-1):!m&&y?(!te&&(K.to!=M.ch||K.line!=M.line)&&(ce=I.pop()),f(ce.line,ce.to)):f(ce.line,ce.from)}function Dr(s,d,h,m){for(var y=s.getCursor(),b=y.ch,M,I=0;I<d;I++){var A=s.getLine(y.line);if(M=Ao(b,A,m,h,!0),M==-1)return null;b=M}return f(s.getCursor().line,M)}function Xn(s,d){var h=s.getCursor().line;return Le(s,f(h,d-1))}function Xt(s,d,h,m){jt(h,Mt)&&(d.marks[h]&&d.marks[h].clear(),d.marks[h]=s.setBookmark(m))}function Ao(s,d,h,m,y){var b;return m?(b=d.indexOf(h,s+1),b!=-1&&!y&&(b-=1)):(b=d.lastIndexOf(h,s-1),b!=-1&&!y&&(b+=1)),b}function Er(s,d,h,m,y){var b=d.line,M=s.firstLine(),I=s.lastLine(),A,B,U=b;function Q(ue){return!s.getLine(ue)}function te(ue,Pe,Ue){return Ue?Q(ue)!=Q(ue+Pe):!Q(ue)&&Q(ue+Pe)}if(m){for(;M<=U&&U<=I&&h>0;)te(U,m)&&h--,U+=m;return new f(U,0)}var K=s.state.vim;if(K.visualLine&&te(b,1,!0)){var ce=K.sel.anchor;te(ce.line,-1,!0)&&(!y||ce.line!=b)&&(b+=1)}var be=Q(b);for(U=b;U<=I&&h;U++)te(U,1,!0)&&(!y||Q(U)!=be)&&h--;for(B=new f(U,0),U>I&&!be?be=!0:y=!1,U=b;U>M&&!((!y||Q(U)==be||U==b)&&te(U,-1,!0));U--);return A=new f(U,0),{start:A,end:B}}function Qn(s,d,h,m){function y(A,B){if(B.pos+B.dir<0||B.pos+B.dir>=B.line.length){if(B.ln+=B.dir,!at(A,B.ln)){B.line=null,B.ln=null,B.pos=null;return}B.line=A.getLine(B.ln),B.pos=B.dir>0?0:B.line.length-1}else B.pos+=B.dir}function b(A,B,U,Q){var ue=A.getLine(B),te=ue==="",K={line:ue,ln:B,pos:U,dir:Q},ce={ln:K.ln,pos:K.pos},be=K.line==="";for(y(A,K);K.line!==null;){if(ce.ln=K.ln,ce.pos=K.pos,K.line===""&&!be)return{ln:K.ln,pos:K.pos};if(te&&K.line!==""&&!Ke(K.line[K.pos]))return{ln:K.ln,pos:K.pos};ot(K.line[K.pos])&&!te&&(K.pos===K.line.length-1||Ke(K.line[K.pos+1]))&&(te=!0),y(A,K)}var ue=A.getLine(ce.ln);ce.pos=0;for(var Pe=ue.length-1;Pe>=0;--Pe)if(!Ke(ue[Pe])){ce.pos=Pe;break}return ce}function M(A,B,U,Q){var be=A.getLine(B),te={line:be,ln:B,pos:U,dir:Q},K={ln:te.ln,pos:null},ce=te.line==="";for(y(A,te);te.line!==null;){if(te.line===""&&!ce)return K.pos!==null?K:{ln:te.ln,pos:te.pos};if(ot(te.line[te.pos])&&K.pos!==null&&!(te.ln===K.ln&&te.pos+1===K.pos))return K;te.line!==""&&!Ke(te.line[te.pos])&&(ce=!1,K={ln:te.ln,pos:te.pos}),y(A,te)}var be=A.getLine(K.ln);K.pos=0;for(var ue=0;ue<be.length;++ue)if(!Ke(be[ue])){K.pos=ue;break}return K}for(var I={ln:d.line,pos:d.ch};h>0;)m<0?I=M(s,I.ln,I.pos,m):I=b(s,I.ln,I.pos,m),h--;return f(I.ln,I.pos)}function $i(s,d,h,m){var y=d,b,M,I={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[h],A={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[h],B=s.getLine(y.line).charAt(y.ch),U=B===A?1:0;if(b=s.scanForBracket(f(y.line,y.ch+U),-1,void 0,{bracketRegex:I}),M=s.scanForBracket(f(y.line,y.ch+U),1,void 0,{bracketRegex:I}),!b||!M)return{start:y,end:y};if(b=b.pos,M=M.pos,b.line==M.line&&b.ch>M.ch||b.line>M.line){var Q=b;b=M,M=Q}return m?M.ch+=1:b.ch+=1,{start:b,end:M}}function St(s,d,h,m){var y=st(d),b=s.getLine(y.line),M=b.split(""),I,A,B,U,Q=M.indexOf(h);if(y.ch<Q?y.ch=Q:Q<y.ch&&M[y.ch]==h&&(A=y.ch,--y.ch),M[y.ch]==h&&!A)I=y.ch+1;else for(B=y.ch;B>-1&&!I;B--)M[B]==h&&(I=B+1);if(I&&!A)for(B=I,U=M.length;B<U&&!A;B++)M[B]==h&&(A=B);return!I||!A?{start:y,end:y}:(m&&(--I,++A),{start:f(y.line,I),end:f(y.line,A)})}Ot("pcre",!0,"boolean");function Ee(){}Ee.prototype={getQuery:function(){return ye.query},setQuery:function(s){ye.query=s},getOverlay:function(){return this.searchOverlay},setOverlay:function(s){this.searchOverlay=s},isReversed:function(){return ye.isReversed},setReversed:function(s){ye.isReversed=s},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(s){this.annotate=s}};function Zt(s){var d=s.state.vim;return d.searchState_||(d.searchState_=new Ee)}function ei(s,d,h,m,y){s.openDialog?s.openDialog(d,m,{bottom:!0,value:y.value,onKeyDown:y.onKeyDown,onKeyUp:y.onKeyUp,selectValueOnOpen:!1}):m(prompt(h,""))}function _r(s){return Tr(s,"/")}function ut(s){return Wr(s,"/")}function Tr(s,d){var h=Wr(s,d)||[];if(!h.length)return[];var m=[];if(h[0]===0){for(var y=0;y<h.length;y++)typeof h[y]=="number"&&m.push(s.substring(h[y]+1,h[y+1]));return m}}function Wr(s,d){d||(d="/");for(var h=!1,m=[],y=0;y<s.length;y++){var b=s.charAt(y);!h&&b==d&&m.push(y),h=!h&&b=="\\"}return m}function ti(s){for(var d="|(){",h="}",m=!1,y=[],b=-1;b<s.length;b++){var M=s.charAt(b)||"",I=s.charAt(b+1)||"",A=I&&d.indexOf(I)!=-1;m?((M!=="\\"||!A)&&y.push(M),m=!1):M==="\\"?(m=!0,I&&h.indexOf(I)!=-1&&(A=!0),(!A||I==="\\")&&y.push(M)):(y.push(M),A&&I!=="\\"&&y.push("\\"))}return y.join("")}var oe={"\\n":`
`,"\\r":"\r","\\t":"	"};function ze(s){for(var d=!1,h=[],m=-1;m<s.length;m++){var y=s.charAt(m)||"",b=s.charAt(m+1)||"";oe[y+b]?(h.push(oe[y+b]),m++):d?(h.push(y),d=!1):y==="\\"?(d=!0,It(b)||b==="$"?h.push("$"):b!=="/"&&b!=="\\"&&h.push("\\")):(y==="$"&&h.push("$"),h.push(y),b==="/"&&h.push("\\"))}return h.join("")}var vn={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function ri(s){for(var d=new r.StringStream(s),h=[];!d.eol();){for(;d.peek()&&d.peek()!="\\";)h.push(d.next());var m=!1;for(var y in vn)if(d.match(y,!0)){m=!0,h.push(vn[y]);break}m||h.push(d.next())}return h.join("")}function yn(s,d,h){var m=ye.registerController.getRegister("/");if(m.setText(s),s instanceof RegExp)return s;var y=ut(s),b,M;if(!y.length)b=s;else{b=s.substring(0,y[0]);var I=s.substring(y[0]);M=I.indexOf("i")!=-1}if(!b)return null;Ft("pcre")||(b=ti(b)),h&&(d=/^[^A-Z]*$/.test(b));var A=new RegExp(b,d||M?"i":void 0);return A}function dt(s,d){s.openNotification?s.openNotification('<span style="color: red">'+d+"</span>",{bottom:!0,duration:5e3}):alert(d)}function qi(s,d){var h='<span style="font-family: monospace; white-space: pre">'+(s||"")+'<input type="text" autocorrect="off" autocapitalize="off" spellcheck="false"></span>';return d&&(h+=' <span style="color: #888">'+d+"</span>"),h}var Ve="(Javascript regexp)";function tn(s,d){var h=(d.prefix||"")+" "+(d.desc||""),m=qi(d.prefix,d.desc);ei(s,m,h,d.onClose,d)}function _n(s,d){if(s instanceof RegExp&&d instanceof RegExp){for(var h=["global","multiline","ignoreCase","source"],m=0;m<h.length;m++){var y=h[m];if(s[y]!==d[y])return!1}return!0}return!1}function Qt(s,d,h,m){if(d){var y=Zt(s),b=yn(d,!!h,!!m);if(b)return Ur(s,b),_n(b,y.getQuery())||y.setQuery(b),b}}function Gi(s){if(s.source.charAt(0)=="^")var d=!0;return{token:function(h){if(d&&!h.sol()){h.skipToEnd();return}var m=h.match(s,!1);if(m)return m[0].length==0?(h.next(),"searching"):!h.sol()&&(h.backUp(1),!s.exec(h.next()+m[0]))?(h.next(),null):(h.match(s),"searching");for(;!h.eol()&&(h.next(),!h.match(s,!1)););},query:s}}var ni=0;function Ur(s,d){clearTimeout(ni),ni=setTimeout(function(){var h=Zt(s),m=h.getOverlay();(!m||d!=m.query)&&(m&&s.removeOverlay(m),m=Gi(d),s.addOverlay(m),s.showMatchesOnScrollbar&&(h.getScrollbarAnnotate()&&h.getScrollbarAnnotate().clear(),h.setScrollbarAnnotate(s.showMatchesOnScrollbar(d))),h.setOverlay(m))},50)}function bn(s,d,h,m){return m===void 0&&(m=1),s.operation(function(){for(var y=s.getCursor(),b=s.getSearchCursor(h,y),M=0;M<m;M++){var I=b.find(d);if(M==0&&I&&sr(b.from(),y)&&(I=b.find(d)),!I&&(b=s.getSearchCursor(h,d?f(s.lastLine()):f(s.firstLine(),0)),!b.find(d)))return}return b.from()})}function wn(s){var d=Zt(s);s.removeOverlay(Zt(s).getOverlay()),d.setOverlay(null),d.getScrollbarAnnotate()&&(d.getScrollbarAnnotate().clear(),d.setScrollbarAnnotate(null))}function ii(s,d,h){return typeof s!="number"&&(s=s.line),d instanceof Array?jt(s,d):h?s>=d&&s<=h:s==d}function xn(s){var d=s.getScrollInfo(),h=6,m=10,y=s.coordsChar({left:0,top:h+d.top},"local"),b=d.clientHeight-m+d.top,M=s.coordsChar({left:0,top:b},"local");return{top:y.line,bottom:M.line}}function oi(s,d,h){if(h=="'"||h=="`")return ye.jumpList.find(s,-1)||f(0,0);if(h==".")return si(s);var m=d.marks[h];return m&&m.find()}function si(s){for(var d=s.doc.history.done,h=d.length;h--;)if(d[h].changes)return st(d[h].changes[0].to)}var ai=function(){this.buildCommandMap_()};ai.prototype={processCommand:function(s,d,h){var m=this;s.operation(function(){s.curOp.isVimOp=!0,m._processCommand(s,d,h)})},_processCommand:function(s,d,h){var m=s.state.vim,y=ye.registerController.getRegister(":"),b=y.toString();m.visualMode&&ar(s);var M=new r.StringStream(d);y.setText(d);var I=h||{};I.input=d;try{this.parseInput_(s,M,I)}catch(Q){throw dt(s,Q),Q}var A,B;if(!I.commandName)I.line!==void 0&&(B="move");else if(A=this.matchCommand_(I.commandName),A){if(B=A.name,A.excludeFromCommandHistory&&y.setText(b),this.parseCommandArgs_(M,I,A),A.type=="exToKey"){for(var U=0;U<A.toKeys.length;U++)r.Vim.handleKey(s,A.toKeys[U],"mapping");return}else if(A.type=="exToEx"){this.processCommand(s,A.toInput);return}}if(!B){dt(s,'Not an editor command ":'+d+'"');return}try{li[B](s,I),(!A||!A.possiblyAsync)&&I.callback&&I.callback()}catch(Q){throw dt(s,Q),Q}},parseInput_:function(s,d,h){d.eatWhile(":"),d.eat("%")?(h.line=s.firstLine(),h.lineEnd=s.lastLine()):(h.line=this.parseLineSpec_(s,d),h.line!==void 0&&d.eat(",")&&(h.lineEnd=this.parseLineSpec_(s,d)));var m=d.match(/^(\w+)/);return m?h.commandName=m[1]:h.commandName=d.match(/.*/)[0],h},parseLineSpec_:function(s,d){var h=d.match(/^(\d+)/);if(h)return parseInt(h[1],10)-1;switch(d.next()){case".":return this.parseLineSpecOffset_(d,s.getCursor().line);case"$":return this.parseLineSpecOffset_(d,s.lastLine());case"'":var m=d.next(),y=oi(s,s.state.vim,m);if(!y)throw new Error("Mark not set");return this.parseLineSpecOffset_(d,y.line);case"-":case"+":return d.backUp(1),this.parseLineSpecOffset_(d,s.getCursor().line);default:d.backUp(1);return}},parseLineSpecOffset_:function(s,d){var h=s.match(/^([+-])?(\d+)/);if(h){var m=parseInt(h[2],10);h[1]=="-"?d-=m:d+=m}return d},parseCommandArgs_:function(s,d,h){if(!s.eol()){d.argString=s.match(/.*/)[0];var m=h.argDelimiter||/\s+/,y=qt(d.argString).split(m);y.length&&y[0]&&(d.args=y)}},matchCommand_:function(s){for(var d=s.length;d>0;d--){var h=s.substring(0,d);if(this.commandMap_[h]){var m=this.commandMap_[h];if(m.name.indexOf(s)===0)return m}}return null},buildCommandMap_:function(){this.commandMap_={};for(var s=0;s<u.length;s++){var d=u[s],h=d.shortName||d.name;this.commandMap_[h]=d}},map:function(s,d,h){if(s!=":"&&s.charAt(0)==":"){if(h)throw Error("Mode not supported for ex mappings");var m=s.substring(1);d!=":"&&d.charAt(0)==":"?this.commandMap_[m]={name:m,type:"exToEx",toInput:d.substring(1),user:!0}:this.commandMap_[m]={name:m,type:"exToKey",toKeys:d,user:!0}}else if(d!=":"&&d.charAt(0)==":"){var y={keys:s,type:"keyToEx",exArgs:{input:d.substring(1)}};h&&(y.context=h),n.unshift(y)}else{var y={keys:s,type:"keyToKey",toKeys:d};h&&(y.context=h),n.unshift(y)}},unmap:function(s,d){if(s!=":"&&s.charAt(0)==":"){if(d)throw Error("Mode not supported for ex mappings");var h=s.substring(1);if(this.commandMap_[h]&&this.commandMap_[h].user){delete this.commandMap_[h];return}}else for(var m=s,y=0;y<n.length;y++)if(m==n[y].keys&&n[y].context===d){n.splice(y,1);return}throw Error("No such mapping.")}};var li={colorscheme:function(s,d){if(!d.args||d.args.length<1){dt(s,s.getOption("theme"));return}s.setOption("theme",d.args[0])},map:function(s,d,h){var m=d.args;if(!m||m.length<2){s&&dt(s,"Invalid mapping: "+d.input);return}Nt.map(m[0],m[1],h)},imap:function(s,d){this.map(s,d,"insert")},nmap:function(s,d){this.map(s,d,"normal")},vmap:function(s,d){this.map(s,d,"visual")},unmap:function(s,d,h){var m=d.args;if(!m||m.length<1){s&&dt(s,"No such mapping: "+d.input);return}Nt.unmap(m[0],h)},move:function(s,d){he.processCommand(s,s.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:d.line+1})},set:function(s,d){var h=d.args,m=d.setCfg||{};if(!h||h.length<1){s&&dt(s,"Invalid mapping: "+d.input);return}var y=h[0].split("="),b=y[0],M=y[1],I=!1;if(b.charAt(b.length-1)=="?"){if(M)throw Error("Trailing characters: "+d.argString);b=b.substring(0,b.length-1),I=!0}M===void 0&&b.substring(0,2)=="no"&&(b=b.substring(2),M=!1);var A=Pt[b]&&Pt[b].type=="boolean";if(A&&M==null&&(M=!0),!A&&M===void 0||I){var B=Ft(b,s,m);B instanceof Error?dt(s,B.message):B===!0||B===!1?dt(s," "+(B?"":"no")+b):dt(s,"  "+b+"="+B)}else{var U=vt(b,M,s,m);U instanceof Error&&dt(s,U.message)}},setlocal:function(s,d){d.setCfg={scope:"local"},this.set(s,d)},setglobal:function(s,d){d.setCfg={scope:"global"},this.set(s,d)},registers:function(s,d){var h=d.args,m=ye.registerController.registers,y="----------Registers----------<br><br>";if(h){var b;h=h.join("");for(var I=0;I<h.length;I++)if(b=h.charAt(I),!!ye.registerController.isValidRegister(b)){var A=m[b]||new $;y+='"'+b+"    "+A.toString()+"<br>"}}else for(var b in m){var M=m[b].toString();M.length&&(y+='"'+b+"    "+M+"<br>")}dt(s,y)},sort:function(s,d){var h,m,y,b,M;function I(){if(d.argString){var et=new r.StringStream(d.argString);if(et.eat("!")&&(h=!0),et.eol())return;if(!et.eatSpace())return"Invalid arguments";var Ye=et.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!Ye&&!et.eol())return"Invalid arguments";if(Ye[1]){m=Ye[1].indexOf("i")!=-1,y=Ye[1].indexOf("u")!=-1;var Bt=Ye[1].indexOf("d")!=-1||Ye[1].indexOf("n")!=-1&&1,Vt=Ye[1].indexOf("x")!=-1&&1,Lt=Ye[1].indexOf("o")!=-1&&1;if(Bt+Vt+Lt>1)return"Invalid arguments";b=Bt&&"decimal"||Vt&&"hex"||Lt&&"octal"}Ye[2]&&(M=new RegExp(Ye[2].substr(1,Ye[2].length-2),m?"i":""))}}var A=I();if(A){dt(s,A+": "+d.argString);return}var B=d.line||s.firstLine(),U=d.lineEnd||d.line||s.lastLine();if(B==U)return;var Q=f(B,0),te=f(U,xt(s,U)),K=s.getRange(Q,te).split(`
`),ce=M||(b=="decimal"?/(-?)([\d]+)/:b=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:b=="octal"?/([0-7]+)/:null),be=b=="decimal"?10:b=="hex"?16:b=="octal"?8:null,ue=[],Pe=[];if(b||M)for(var Ue=0;Ue<K.length;Ue++){var Ge=M?K[Ue].match(M):null;Ge&&Ge[0]!=""?ue.push(Ge):!M&&ce.exec(K[Ue])?ue.push(K[Ue]):Pe.push(K[Ue])}else Pe=K;function gt(et,Ye){if(h){var Bt;Bt=et,et=Ye,Ye=Bt}m&&(et=et.toLowerCase(),Ye=Ye.toLowerCase());var Vt=b&&ce.exec(et),Lt=b&&ce.exec(Ye);return Vt?(Vt=parseInt((Vt[1]+Vt[2]).toLowerCase(),be),Lt=parseInt((Lt[1]+Lt[2]).toLowerCase(),be),Vt-Lt):et<Ye?-1:1}function ht(et,Ye){if(h){var Bt;Bt=et,et=Ye,Ye=Bt}return m&&(et[0]=et[0].toLowerCase(),Ye[0]=Ye[0].toLowerCase()),et[0]<Ye[0]?-1:1}if(ue.sort(M?ht:gt),M)for(var Ue=0;Ue<ue.length;Ue++)ue[Ue]=ue[Ue].input;else b||Pe.sort(gt);if(K=h?ue.concat(Pe):Pe.concat(ue),y){var kt=K,zt;K=[];for(var Ue=0;Ue<kt.length;Ue++)kt[Ue]!=zt&&K.push(kt[Ue]),zt=kt[Ue]}s.replaceRange(K.join(`
`),Q,te)},global:function(s,d){var h=d.argString;if(!h){dt(s,"Regular Expression missing from global");return}var m=d.line!==void 0?d.line:s.firstLine(),y=d.lineEnd||d.line||s.lastLine(),b=_r(h),M=h,I;if(b.length&&(M=b[0],I=b.slice(1,b.length).join("/")),M)try{Qt(s,M,!0,!0)}catch{dt(s,"Invalid regex: "+M);return}for(var A=Zt(s).getQuery(),B=[],U="",Q=m;Q<=y;Q++){var te=A.test(s.getLine(Q));te&&(B.push(Q+1),U+=s.getLine(Q)+"<br>")}if(!I){dt(s,U);return}var K=0,ce=function(){if(K<B.length){var be=B[K]+I;Nt.processCommand(s,be,{callback:ce})}K++};ce()},substitute:function(s,d){if(!s.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var h=d.argString,m=h?Tr(h,h[0]):[],y,b="",M,I,A,B=!1,U=!1;if(m.length)y=m[0],Ft("pcre")&&y!==""&&(y=new RegExp(y).source),b=m[1],y&&y[y.length-1]==="$"&&(y=y.slice(0,y.length-1)+"\\n",b=b?b+`
`:`
`),b!==void 0&&(Ft("pcre")?b=ri(b.replace(/([^\\])&/g,"$1$$&")):b=ze(b),ye.lastSubstituteReplacePart=b),M=m[2]?m[2].split(" "):[];else if(h&&h.length){dt(s,"Substitutions should be of the form :s/pattern/replace/");return}if(M&&(I=M[0],A=parseInt(M[1]),I&&(I.indexOf("c")!=-1&&(B=!0,I.replace("c","")),I.indexOf("g")!=-1&&(U=!0,I.replace("g","")),Ft("pcre")?y=y+"/"+I:y=y.replace(/\//g,"\\/")+"/"+I)),y)try{Qt(s,y,!0,!0)}catch{dt(s,"Invalid regex: "+y);return}if(b=b||ye.lastSubstituteReplacePart,b===void 0){dt(s,"No previous substitute regular expression");return}var Q=Zt(s),te=Q.getQuery(),K=d.line!==void 0?d.line:s.getCursor().line,ce=d.lineEnd||K;K==s.firstLine()&&ce==s.lastLine()&&(ce=1/0),A&&(K=ce,ce=K+A-1);var be=Le(s,f(K,0)),ue=s.getSearchCursor(te,be);Cn(s,B,U,K,ce,ue,te,b,d.callback)},redo:r.commands.redo,undo:r.commands.undo,write:function(s){r.commands.save?r.commands.save(s):s.save&&s.save()},nohlsearch:function(s){wn(s)},yank:function(s){var d=st(s.getCursor()),h=d.line,m=s.getLine(h);ye.registerController.pushText("0","yank",m,!0,!0)},delmarks:function(s,d){if(!d.argString||!qt(d.argString)){dt(s,"Argument required");return}for(var h=s.state.vim,m=new r.StringStream(qt(d.argString));!m.eol();){m.eatSpace();var y=m.pos;if(!m.match(/[a-zA-Z]/,!1)){dt(s,"Invalid argument: "+d.argString.substring(y));return}var b=m.next();if(m.match("-",!0)){if(!m.match(/[a-zA-Z]/,!1)){dt(s,"Invalid argument: "+d.argString.substring(y));return}var M=b,I=m.next();if(_e(M)&&_e(I)||Qe(M)&&Qe(I)){var A=M.charCodeAt(0),B=I.charCodeAt(0);if(A>=B){dt(s,"Invalid argument: "+d.argString.substring(y));return}for(var U=0;U<=B-A;U++){var Q=String.fromCharCode(A+U);delete h.marks[Q]}}else{dt(s,"Invalid argument: "+M+"-");return}}else delete h.marks[b]}}},Nt=new ai;function Cn(s,d,h,m,y,b,M,I,A){s.state.vim.exMode=!0;var B=!1,U=b.from();function Q(){s.operation(function(){for(;!B;)te(),K();ce()})}function te(){var ue=s.getRange(b.from(),b.to()),Pe=ue.replace(M,I);b.replace(Pe)}function K(){for(;b.findNext()&&ii(b.from(),m,y);)if(!(!h&&U&&b.from().line==U.line)){s.scrollIntoView(b.from(),30),s.setSelection(b.from(),b.to()),U=b.from(),B=!1;return}B=!0}function ce(ue){if(ue&&ue(),s.focus(),U){s.setCursor(U);var Pe=s.state.vim;Pe.exMode=!1,Pe.lastHPos=Pe.lastHSPos=U.ch}A&&A()}function be(ue,Pe,Ue){r.e_stop(ue);var Ge=r.keyName(ue);switch(Ge){case"Y":te(),K();break;case"N":K();break;case"A":var gt=A;A=void 0,s.operation(Q),A=gt;break;case"L":te();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":ce(Ue);break}return B&&ce(Ue),!0}if(K(),B){dt(s,"No matches for "+M.source);return}if(!d){Q(),A&&A();return}tn(s,{prefix:"replace with <strong>"+I+"</strong> (y/n/a/q/l)",onKeyDown:be})}r.keyMap.vim={attach:R,detach:E,call:fe};function wr(s){var d=s.state.vim,h=ye.macroModeState,m=ye.registerController.getRegister("."),y=h.isPlaying,b=h.lastInsertModeChanges;y||(s.off("change",rn),r.off(s.getInputField(),"keydown",hi)),!y&&d.insertModeRepeat>1&&(hr(s,d,d.insertModeRepeat-1,!0),d.lastEditInputState.repeatOverride=d.insertModeRepeat),delete d.insertModeRepeat,d.insertMode=!1,s.setCursor(s.getCursor().line,s.getCursor().ch-1),s.setOption("keyMap","vim"),s.setOption("disableInput",!0),s.toggleOverwrite(!1),m.setText(b.changes.join("")),r.signal(s,"vim-mode-change",{mode:"normal"}),h.isRecording&&Xi(h)}function Zi(s){n.unshift(s)}function ui(s,d,h,m,y){var b={keys:s,type:d};b[d]=h,b[d+"Args"]=m;for(var M in y)b[M]=y[M];Zi(b)}Ot("insertModeEscKeysTimeout",200,"number"),r.keyMap["vim-insert"]={fallthrough:["default"],attach:R,detach:E,call:fe},r.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:R,detach:E,call:fe};function Yi(s,d,h,m){var y=ye.registerController.getRegister(m);if(m==":"){y.keyBuffer[0]&&Nt.processCommand(s,y.keyBuffer[0]),h.isPlaying=!1;return}var b=y.keyBuffer,M=0;h.isPlaying=!0,h.replaySearchQueries=y.searchQueries.slice(0);for(var I=0;I<b.length;I++)for(var A=b[I],B,U;A;)if(B=/<\w+-.+?>|<\w+>|./.exec(A),U=B[0],A=A.substring(B.index+U.length),r.Vim.handleKey(s,U,"macro"),d.insertMode){var Q=y.insertModeChanges[M++].changes;ye.macroModeState.lastInsertModeChanges.changes=Q,En(s,Q,1),wr(s)}h.isPlaying=!1}function Ji(s,d){if(!s.isPlaying){var h=s.latestRegister,m=ye.registerController.getRegister(h);m&&m.pushText(d)}}function Xi(s){if(!s.isPlaying){var d=s.latestRegister,h=ye.registerController.getRegister(d);h&&h.pushInsertModeChanges&&h.pushInsertModeChanges(s.lastInsertModeChanges)}}function Sn(s,d){if(!s.isPlaying){var h=s.latestRegister,m=ye.registerController.getRegister(h);m&&m.pushSearchQuery&&m.pushSearchQuery(d)}}function rn(s,d){var h=ye.macroModeState,m=h.lastInsertModeChanges;if(!h.isPlaying)for(;d;){if(m.expectCursorActivityForChange=!0,m.ignoreCount>1)m.ignoreCount--;else if(d.origin=="+input"||d.origin=="paste"||d.origin===void 0){var y=s.listSelections().length;y>1&&(m.ignoreCount=y);var b=d.text.join(`
`);m.maybeReset&&(m.changes=[],m.maybeReset=!1),b&&(s.state.overwrite&&!/\n/.test(b)?m.changes.push([b]):m.changes.push(b))}d=d.next}}function kn(s){var d=s.state.vim;if(d.insertMode){var h=ye.macroModeState;if(h.isPlaying)return;var m=h.lastInsertModeChanges;m.expectCursorActivityForChange?m.expectCursorActivityForChange=!1:m.maybeReset=!0}else s.curOp.isVimOp||Mn(s,d);d.visualMode&&ci(s)}function ci(s){var d="cm-animate-fat-cursor",h=s.state.vim,m=Le(s,st(h.sel.head)),y=je(m,0,1);if(fi(h),m.ch==s.getLine(m.line).length){var b=document.createElement("span");b.textContent=" ",b.className=d,h.fakeCursorBookmark=s.setBookmark(m,{widget:b})}else h.fakeCursor=s.markText(m,y,{className:d})}function fi(s){s.fakeCursor&&(s.fakeCursor.clear(),s.fakeCursor=null),s.fakeCursorBookmark&&(s.fakeCursorBookmark.clear(),s.fakeCursorBookmark=null)}function Mn(s,d){var h=s.getCursor("anchor"),m=s.getCursor("head");if(d.visualMode&&!s.somethingSelected()?ar(s,!1):!d.visualMode&&!d.insertMode&&s.somethingSelected()&&(d.visualMode=!0,d.visualLine=!1,r.signal(s,"vim-mode-change",{mode:"visual"})),d.visualMode){var y=qe(m,h)?0:-1,b=qe(m,h)?-1:0;m=je(m,0,y),h=je(h,0,b),d.sel={anchor:h,head:m},Xt(s,d,"<",lt(m,h)),Xt(s,d,">",dr(m,h))}else d.insertMode||(d.lastHPos=s.getCursor().ch)}function di(s){this.keyName=s}function hi(s){var d=ye.macroModeState,h=d.lastInsertModeChanges,m=r.keyName(s);if(!m)return;function y(){return h.maybeReset&&(h.changes=[],h.maybeReset=!1),h.changes.push(new di(m)),!0}(m.indexOf("Delete")!=-1||m.indexOf("Backspace")!=-1)&&r.lookupKey(m,"vim-insert",y)}function hr(s,d,h,m){var y=ye.macroModeState;y.isPlaying=!0;var b=!!d.lastEditActionCommand,M=d.inputState;function I(){b?he.processAction(s,d,d.lastEditActionCommand):he.evalInput(s,d)}function A(U){if(y.lastInsertModeChanges.changes.length>0){U=d.lastEditActionCommand?U:1;var Q=y.lastInsertModeChanges;En(s,Q.changes,U)}}if(d.inputState=d.lastEditInputState,b&&d.lastEditActionCommand.interlaceInsertRepeat)for(var B=0;B<h;B++)I(),A(1);else m||I(),A(h);d.inputState=M,d.insertMode&&!m&&wr(s),y.isPlaying=!1}function En(s,d,h){function m(te){return typeof te=="string"?r.commands[te](s):te(s),!0}var y=s.getCursor("head"),b=ye.macroModeState.lastInsertModeChanges.visualBlock;b&&(rr(s,y,b+1),h=s.listSelections().length,s.setCursor(y));for(var M=0;M<h;M++){b&&s.setCursor(je(y,M,0));for(var I=0;I<d.length;I++){var A=d[I];if(A instanceof di)r.lookupKey(A.keyName,"vim-insert",m);else if(typeof A=="string"){var B=s.getCursor();s.replaceRange(A,B,B)}else{var U=s.getCursor(),Q=je(U,0,A[0].length);s.replaceRange(A[0],U,Q)}}}b&&s.setCursor(je(y,0,1))}return tr(),Mr};r.Vim=v()});const simplescrollbars="";(function(r){typeof exports=="object"&&typeof module=="object"?r(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)})(function(r){function n(f,v,x){this.orientation=v,this.scroll=x,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=f+"-"+v,this.inner=this.node.appendChild(document.createElement("div"));var k=this;r.on(this.inner,"mousedown",function(R){if(R.which!=1)return;r.e_preventDefault(R);var z=k.orientation=="horizontal"?"pageX":"pageY",F=R[z],Z=k.pos;function j(){r.off(document,"mousemove",fe),r.off(document,"mouseup",j)}function fe(J){if(J.which!=1)return j();k.moveTo(Z+(J[z]-F)*(k.total/k.size))}r.on(document,"mousemove",fe),r.on(document,"mouseup",j)}),r.on(this.node,"click",function(R){r.e_preventDefault(R);var z=k.inner.getBoundingClientRect(),F;k.orientation=="horizontal"?F=R.clientX<z.left?-1:R.clientX>z.right?1:0:F=R.clientY<z.top?-1:R.clientY>z.bottom?1:0,k.moveTo(k.pos+F*k.screen)});function E(R){var z=r.wheelEventPixels(R)[k.orientation=="horizontal"?"x":"y"],F=k.pos;k.moveTo(k.pos+z),k.pos!=F&&r.e_preventDefault(R)}r.on(this.node,"mousewheel",E),r.on(this.node,"DOMMouseScroll",E)}n.prototype.setPos=function(f,v){return f<0&&(f=0),f>this.total-this.screen&&(f=this.total-this.screen),!v&&f==this.pos?!1:(this.pos=f,this.inner.style[this.orientation=="horizontal"?"left":"top"]=f*(this.size/this.total)+"px",!0)},n.prototype.moveTo=function(f){this.setPos(f)&&this.scroll(f,this.orientation)};var l=10;n.prototype.update=function(f,v,x){var k=this.screen!=v||this.total!=f||this.size!=x;k&&(this.screen=v,this.total=f,this.size=x);var E=this.screen*(this.size/this.total);E<l&&(this.size-=l-E,E=l),this.inner.style[this.orientation=="horizontal"?"width":"height"]=E+"px",this.setPos(this.pos,k)};function u(f,v,x){this.addClass=f,this.horiz=new n(f,"horizontal",x),v(this.horiz.node),this.vert=new n(f,"vertical",x),v(this.vert.node),this.width=null}u.prototype.update=function(f){if(this.width==null){var v=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;v&&(this.width=parseInt(v.height))}var x=this.width||0,k=f.scrollWidth>f.clientWidth+1,E=f.scrollHeight>f.clientHeight+1;return this.vert.node.style.display=E?"block":"none",this.horiz.node.style.display=k?"block":"none",E&&(this.vert.update(f.scrollHeight,f.clientHeight,f.viewHeight-(k?x:0)),this.vert.node.style.bottom=k?x+"px":"0"),k&&(this.horiz.update(f.scrollWidth,f.clientWidth,f.viewWidth-(E?x:0)-f.barLeft),this.horiz.node.style.right=E?x+"px":"0",this.horiz.node.style.left=f.barLeft+"px"),{right:E?x:0,bottom:k?x:0}},u.prototype.setScrollTop=function(f){this.vert.setPos(f)},u.prototype.setScrollLeft=function(f){this.horiz.setPos(f)},u.prototype.clear=function(){var f=this.horiz.node.parentNode;f.removeChild(this.horiz.node),f.removeChild(this.vert.node)},r.scrollbarModel.simple=function(f,v){return new u("CodeMirror-simplescroll",f,v)},r.scrollbarModel.overlay=function(f,v){return new u("CodeMirror-overlayscroll",f,v)}});(function(r){typeof exports=="object"&&typeof module=="object"?r(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)})(function(r){r.defineExtension("annotateScrollbar",function(l){return typeof l=="string"&&(l={className:l}),new n(this,l)}),r.defineOption("scrollButtonHeight",0);function n(l,u){this.cm=l,this.options=u,this.buttonHeight=u.scrollButtonHeight||l.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=l.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();function f(x){clearTimeout(v.doRedraw),v.doRedraw=setTimeout(function(){v.redraw()},x)}var v=this;l.on("refresh",this.resizeHandler=function(){clearTimeout(v.doUpdate),v.doUpdate=setTimeout(function(){v.computeScale()&&f(20)},100)}),l.on("markerAdded",this.resizeHandler),l.on("markerCleared",this.resizeHandler),u.listenForChanges!==!1&&l.on("changes",this.changeHandler=function(){f(250)})}n.prototype.computeScale=function(){var l=this.cm,u=(l.getWrapperElement().clientHeight-l.display.barHeight-this.buttonHeight*2)/l.getScrollerElement().scrollHeight;if(u!=this.hScale)return this.hScale=u,!0},n.prototype.update=function(l){this.annotations=l,this.redraw()},n.prototype.redraw=function(l){l!==!1&&this.computeScale();var u=this.cm,f=this.hScale,v=document.createDocumentFragment(),x=this.annotations,k=u.getOption("lineWrapping"),E=k&&u.defaultTextHeight()*1.5,R=null,z=null;function F(Ce,nt){if(R!=Ce.line){R=Ce.line,z=u.getLineHandle(Ce.line);var Xe=u.getLineHandleVisualStart(z);Xe!=z&&(R=u.getLineNumber(Xe),z=Xe)}if(z.widgets&&z.widgets.length||k&&z.height>E)return u.charCoords(Ce,"local")[nt?"top":"bottom"];var mt=u.heightAtLine(z,"local");return mt+(nt?0:z.height)}var Z=u.lastLine();if(u.display.barWidth)for(var j=0,fe;j<x.length;j++){var J=x[j];if(!(J.to.line>Z)){for(var ge=fe||F(J.from,!0)*f,xe=F(J.to,!1)*f;j<x.length-1&&!(x[j+1].to.line>Z||(fe=F(x[j+1].from,!0)*f,fe>xe+.9));)J=x[++j],xe=F(J.to,!1)*f;if(xe!=ge){var re=Math.max(xe-ge,3),Ae=v.appendChild(document.createElement("div"));Ae.style.cssText="position: absolute; right: 0px; width: "+Math.max(u.display.barWidth-1,2)+"px; top: "+(ge+this.buttonHeight)+"px; height: "+re+"px",Ae.className=this.options.className,J.id&&Ae.setAttribute("annotation-id",J.id)}}}this.div.textContent="",this.div.appendChild(v)},n.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}});(function(r){typeof exports=="object"&&typeof module=="object"?r(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)})(function(r){r.defineOption("scrollPastEnd",!1,function(u,f,v){v&&v!=r.Init&&(u.off("change",n),u.off("refresh",l),u.display.lineSpace.parentNode.style.paddingBottom="",u.state.scrollPastEndPadding=null),f&&(u.on("change",n),u.on("refresh",l),l(u))});function n(u,f){r.changeEnd(f).line==u.lastLine()&&l(u)}function l(u){var f="";if(u.lineCount()>1){var v=u.display.scroller.clientHeight-30,x=u.getLineHandle(u.lastLine()).height;f=v-x+"px"}u.state.scrollPastEndPadding!=f&&(u.state.scrollPastEndPadding=f,u.display.lineSpace.parentNode.style.paddingBottom=f,u.off("refresh",l),u.setSize(),u.on("refresh",l))}});(function(r){typeof exports=="object"&&typeof module=="object"?r(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)})(function(r){r.defineOption("codeLens",!0,function(n,l,u){})});const CodeMirror$1=CodeMirror;function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(r.__esModule)return r;var n=r.default;if(typeof n=="function"){var l=function u(){return this instanceof u?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};l.prototype=n.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(r).forEach(function(u){var f=Object.getOwnPropertyDescriptor(r,u);Object.defineProperty(l,u,f.get?f:{enumerable:!0,get:function(){return r[u]}})}),l}var treeSitter={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(r,n)=>{throw n},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary;function locateFile(r){return Module.locateFile?Module.locateFile(r,scriptDirectory):scriptDirectory+r}function logExceptionOnExit(r){r instanceof ExitStatus||err("exiting due to exception: "+r)}if(ENVIRONMENT_IS_NODE){var fs=require$$0,nodePath=require$$0;scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(r,n)=>(r=isFileURI(r)?new URL(r):nodePath.normalize(r),fs.readFileSync(r,n?void 0:"utf8")),readBinary=r=>{var n=read_(r,!0);return n.buffer||(n=new Uint8Array(n)),n},readAsync=(r,n,l)=>{r=isFileURI(r)?new URL(r):nodePath.normalize(r),fs.readFile(r,function(u,f){u?l(u):n(f.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),module.exports=Module,quit_=(r,n)=>{if(keepRuntimeAlive())throw process.exitCode=r,n;logExceptionOnExit(n),process.exit(r)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=r=>{var n=new XMLHttpRequest;return n.open("GET",r,!1),n.send(null),n.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=r=>{var n=new XMLHttpRequest;return n.open("GET",r,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),readAsync=(r,n,l)=>{var u=new XMLHttpRequest;u.open("GET",r,!0),u.responseType="arraybuffer",u.onload=()=>{u.status==200||u.status==0&&u.response?n(u.response):l()},u.onerror=l,u.send(null)});Module.print||console.log.bind(console);var err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(r,n,l){for(var u=n+l,f=n;r[f]&&!(f>=u);)++f;if(f-n>16&&r.buffer&&UTF8Decoder)return UTF8Decoder.decode(r.subarray(n,f));for(var v="";n<f;){var x=r[n++];if(128&x){var k=63&r[n++];if((224&x)!=192){var E=63&r[n++];if((x=(240&x)==224?(15&x)<<12|k<<6|E:(7&x)<<18|k<<12|E<<6|63&r[n++])<65536)v+=String.fromCharCode(x);else{var R=x-65536;v+=String.fromCharCode(55296|R>>10,56320|1023&R)}}else v+=String.fromCharCode((31&x)<<6|k)}else v+=String.fromCharCode(x)}return v}function UTF8ToString(r,n){return r?UTF8ArrayToString(HEAPU8,r,n):""}function stringToUTF8Array(r,n,l,u){if(!(u>0))return 0;for(var f=l,v=l+u-1,x=0;x<r.length;++x){var k=r.charCodeAt(x);if(k>=55296&&k<=57343&&(k=65536+((1023&k)<<10)|1023&r.charCodeAt(++x)),k<=127){if(l>=v)break;n[l++]=k}else if(k<=2047){if(l+1>=v)break;n[l++]=192|k>>6,n[l++]=128|63&k}else if(k<=65535){if(l+2>=v)break;n[l++]=224|k>>12,n[l++]=128|k>>6&63,n[l++]=128|63&k}else{if(l+3>=v)break;n[l++]=240|k>>18,n[l++]=128|k>>12&63,n[l++]=128|k>>6&63,n[l++]=128|63&k}}return n[l]=0,l-f}function stringToUTF8(r,n,l){return stringToUTF8Array(r,HEAPU8,n,l)}function lengthBytesUTF8(r){for(var n=0,l=0;l<r.length;++l){var u=r.charCodeAt(l);u<=127?n++:u<=2047?n+=2:u>=55296&&u<=57343?(n+=4,++l):n+=3}return n}function updateGlobalBufferAndViews(r){buffer=r,Module.HEAP8=HEAP8=new Int8Array(r),Module.HEAP16=HEAP16=new Int16Array(r),Module.HEAP32=HEAP32=new Int32Array(r),Module.HEAPU8=HEAPU8=new Uint8Array(r),Module.HEAPU16=new Uint16Array(r),Module.HEAPU32=HEAPU32=new Uint32Array(r),Module.HEAPF32=HEAPF32=new Float32Array(r),Module.HEAPF64=HEAPF64=new Float64Array(r)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(r){__ATPRERUN__.unshift(r)}function addOnInit(r){__ATINIT__.unshift(r)}function addOnPostRun(r){__ATPOSTRUN__.unshift(r)}var runDependencies=0,dependenciesFulfilled=null;function addRunDependency(r){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(r){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var n=dependenciesFulfilled;dependenciesFulfilled=null,n()}}function abort(r){throw Module.onAbort&&Module.onAbort(r),err(r="Aborted("+r+")"),ABORT=!0,EXITSTATUS=1,r+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(r)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(r){return r.startsWith(dataURIPrefix)}function isFileURI(r){return r.startsWith("file://")}function getBinary(r){try{if(r==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(r);throw"both async and sync fetching of the wasm failed"}catch(n){abort(n)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(r){if(!r.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return r.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(r,n){readAsync(wasmBinaryFile,function(l){r(new Uint8Array(l))},n)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var r={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function n(f,v){var x=f.exports;x=relocateExports(x,1024);var k=getDylinkMetadata(v);k.neededDynlibs&&(dynamicLibraries=k.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(x),Module.asm=x,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency()}function l(f){n(f.instance,f.module)}function u(f){return getBinaryPromise().then(function(v){return WebAssembly.instantiate(v,r)}).then(function(v){return v}).then(f,function(v){err("failed to asynchronously prepare wasm: "+v),abort(v)})}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(r,n)}catch(f){return err("Module.instantiateWasm callback failed with error: "+f),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?u(l):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(f){return WebAssembly.instantiateStreaming(f,r).then(l,function(v){return err("wasm streaming compile failed: "+v),err("falling back to ArrayBuffer instantiation"),u(l)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));function ExitStatus(r){this.name="ExitStatus",this.message="Program terminated with exit("+r+")",this.status=r}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(r,n){var l=GOT[n];return l||(l=GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(n)||(l.required=!0),l}};function callRuntimeCallbacks(r){for(;r.length>0;)r.shift()(Module)}function getDylinkMetadata(r){var n=0,l=0;function u(){for(var xe=0,re=1;;){var Ae=r[n++];if(xe+=(127&Ae)*re,re*=128,!(128&Ae))break}return xe}function f(){var xe=u();return UTF8ArrayToString(r,(n+=xe)-xe,xe)}function v(xe,re){if(xe)throw new Error(re)}var x="dylink.0";if(r instanceof WebAssembly.Module){var k=WebAssembly.Module.customSections(r,x);k.length===0&&(x="dylink",k=WebAssembly.Module.customSections(r,x)),v(k.length===0,"need dylink section"),l=(r=new Uint8Array(k[0])).length}else{v(new Uint32Array(new Uint8Array(r.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),v(r[8]!==0,"need the dylink section to be first"),n=9;var E=u();l=n+E,x=f()}var R={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(x=="dylink"){R.memorySize=u(),R.memoryAlign=u(),R.tableSize=u(),R.tableAlign=u();for(var z=u(),F=0;F<z;++F){var Z=f();R.neededDynlibs.push(Z)}}else for(v(x!=="dylink.0");n<l;){var j=r[n++],fe=u();if(j===1)R.memorySize=u(),R.memoryAlign=u(),R.tableSize=u(),R.tableAlign=u();else if(j===2)for(z=u(),F=0;F<z;++F)Z=f(),R.neededDynlibs.push(Z);else if(j===3)for(var J=u();J--;){var ge=f();256&u()&&R.tlsExports.add(ge)}else if(j===4)for(J=u();J--;)f(),ge=f(),(3&u())==1&&R.weakImports.add(ge);else n+=fe}return R}function getValue(r,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":return HEAP8[r>>0];case"i16":return HEAP16[r>>1];case"i32":case"i64":return HEAP32[r>>2];case"float":return HEAPF32[r>>2];case"double":return HEAPF64[r>>3];case"*":return HEAPU32[r>>2];default:abort("invalid type for getValue: "+n)}return null}function asmjsMangle(r){return r.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(r)?r:"_"+r}function mergeLibSymbols(r,n){for(var l in r)if(r.hasOwnProperty(l)){asmLibraryArg.hasOwnProperty(l)||(asmLibraryArg[l]=r[l]);var u=asmjsMangle(l);Module.hasOwnProperty(u)||(Module[u]=r[l]),l=="__main_argc_argv"&&(Module._main=r[l])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(r,n,l){var u=Module["dynCall_"+r];return l&&l.length?u.apply(null,[n].concat(l)):u.call(null,n)}var wasmTableMirror=[];function getWasmTableEntry(r){var n=wasmTableMirror[r];return n||(r>=wasmTableMirror.length&&(wasmTableMirror.length=r+1),wasmTableMirror[r]=n=wasmTable.get(r)),n}function dynCall(r,n,l){return r.includes("j")?dynCallLegacy(r,n,l):getWasmTableEntry(n).apply(null,l)}function createInvokeFunction(r){return function(){var n=stackSave();try{return dynCall(r,arguments[0],Array.prototype.slice.call(arguments,1))}catch(l){if(stackRestore(n),l!==l+0)throw l;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(r,n){return HEAPU8.fill(0,r,r+n),r}function getMemory(r){if(runtimeInitialized)return zeroMemory(_malloc(r),r);var n=___heap_base,l=n+r+15&-16;return ___heap_base=l,GOT.__heap_base.value=l,n}function isInternalSym(r){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(r)}function uleb128Encode(r,n){r<128?n.push(r):n.push(r%128|128,r>>7)}function sigToWasmTypes(r){for(var n={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},l={parameters:[],results:r[0]=="v"?[]:[n[r[0]]]},u=1;u<r.length;++u)l.parameters.push(n[r[u]]),r[u]==="j"&&l.parameters.push("i32");return l}function generateFuncType(r,n){var l=r.slice(0,1),u=r.slice(1),f={i:127,p:127,j:126,f:125,d:124};n.push(96),uleb128Encode(u.length,n);for(var v=0;v<u.length;++v)n.push(f[u[v]]);l=="v"?n.push(0):n.push(1,f[l])}function convertJsFunctionToWasm(r,n){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(n),r);var l=[1];generateFuncType(n,l);var u=[0,97,115,109,1,0,0,0,1];uleb128Encode(l.length,u),u.push.apply(u,l),u.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var f=new WebAssembly.Module(new Uint8Array(u));return new WebAssembly.Instance(f,{e:{f:r}}).exports.f}function updateTableMap(r,n){if(functionsInTableMap)for(var l=r;l<r+n;l++){var u=getWasmTableEntry(l);u&&functionsInTableMap.set(u,l)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(r){throw r instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":r}return wasmTable.length-1}function setWasmTableEntry(r,n){wasmTable.set(r,n),wasmTableMirror[r]=wasmTable.get(r)}function addFunction(r,n){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(r))return functionsInTableMap.get(r);var l=getEmptyTableSlot();try{setWasmTableEntry(l,r)}catch(u){if(!(u instanceof TypeError))throw u;setWasmTableEntry(l,convertJsFunctionToWasm(r,n))}return functionsInTableMap.set(r,l),l}function updateGOT(r,n){for(var l in r)if(!isInternalSym(l)){var u=r[l];l.startsWith("orig$")&&(l=l.split("$")[1],n=!0),GOT[l]||(GOT[l]=new WebAssembly.Global({value:"i32",mutable:!0})),(n||GOT[l].value==0)&&(typeof u=="function"?GOT[l].value=addFunction(u):typeof u=="number"?GOT[l].value=u:err("unhandled export type for `"+l+"`: "+typeof u))}}function relocateExports(r,n,l){var u={};for(var f in r){var v=r[f];typeof v=="object"&&(v=v.value),typeof v=="number"&&(v+=n),u[f]=v}return updateGOT(u,l),u}function resolveGlobalSymbol(r,n){var l;return n&&(l=asmLibraryArg["orig$"+r]),l||(l=asmLibraryArg[r])&&l.stub&&(l=void 0),l||(l=Module[asmjsMangle(r)]),!l&&r.startsWith("invoke_")&&(l=createInvokeFunction(r.split("_")[1])),l}function alignMemory(r,n){return Math.ceil(r/n)*n}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(r){var n=resolveGlobalSymbol(r,!1);return n||(n=moduleExports[r]),n}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(r,n){switch(n){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(n in asmLibraryArg)return asmLibraryArg[n];var l;return n in r||(r[n]=function(){return l||(l=resolveSymbol(n)),l.apply(null,arguments)}),r[n]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(r){return postInstantiation(r.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(r,n){return r.then(function(){return loadDynamicLibrary(n,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(r){loadDynamicLibrary(r,flags)}),loadModule())}function loadDynamicLibrary(r,n,l){n=n||{global:!0,nodelete:!0};var u=LDSO.loadedLibsByName[r];if(u)return n.global&&!u.global&&(u.global=!0,u.module!=="loading"&&mergeLibSymbols(u.module)),n.nodelete&&u.refcount!==1/0&&(u.refcount=1/0),u.refcount++,l&&(LDSO.loadedLibsByHandle[l]=u),!n.loadAsync||Promise.resolve(!0);function f(k){if(n.fs&&n.fs.findObject(k)){var E=n.fs.readFile(k,{encoding:"binary"});return E instanceof Uint8Array||(E=new Uint8Array(E)),n.loadAsync?Promise.resolve(E):E}if(k=locateFile(k),n.loadAsync)return new Promise(function(R,z){readAsync(k,F=>R(new Uint8Array(F)),z)});if(!readBinary)throw new Error(k+": file not found, and synchronous loading of external files is not available");return readBinary(k)}function v(){if(typeof preloadedWasm<"u"&&preloadedWasm[r]){var k=preloadedWasm[r];return n.loadAsync?Promise.resolve(k):k}return n.loadAsync?f(r).then(function(E){return loadWebAssemblyModule(E,n,l)}):loadWebAssemblyModule(f(r),n,l)}function x(k){u.global&&mergeLibSymbols(k),u.module=k}return u={refcount:n.nodelete?1/0:1,name:r,module:"loading",global:n.global},LDSO.loadedLibsByName[r]=u,l&&(LDSO.loadedLibsByHandle[l]=u),n.loadAsync?v().then(function(k){return x(k),!0}):(x(v()),!0)}function reportUndefinedSymbols(){for(var r in GOT)if(GOT[r].value==0){var n=resolveGlobalSymbol(r,!0);if(!n&&!GOT[r].required)continue;if(typeof n=="function")GOT[r].value=addFunction(n,n.sig);else{if(typeof n!="number")throw new Error("bad export type for `"+r+"`: "+typeof n);GOT[r].value=n}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency(),dynamicLibraries.reduce(function(r,n){return r.then(function(){return loadDynamicLibrary(n,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency()})):reportUndefinedSymbols()}function setValue(r,n,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":HEAP8[r>>0]=n;break;case"i16":HEAP16[r>>1]=n;break;case"i32":HEAP32[r>>2]=n;break;case"i64":tempI64=[n>>>0,(tempDouble=n,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r>>2]=tempI64[0],HEAP32[r+4>>2]=tempI64[1];break;case"float":HEAPF32[r>>2]=n;break;case"double":HEAPF64[r>>3]=n;break;case"*":HEAPU32[r>>2]=n;break;default:abort("invalid type for setValue: "+l)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_memcpy_big(r,n,l){HEAPU8.copyWithin(r,n,n+l)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(r){try{return wasmMemory.grow(r-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(r){var n=HEAPU8.length;r>>>=0;var l=getHeapMax();if(r>l)return!1;for(var u=1;u<=4;u*=2){var f=n*(1+.2/u);if(f=Math.min(f,r+100663296),emscripten_realloc_buffer(Math.min(l,(v=Math.max(r,f))+((x=65536)-v%x)%x)))return!0}var v,x;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var r=process.hrtime();return 1e3*r[0]+r[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(r,n,l){if(PATH.isAbs(n))return n;var u;if(r===-100?u=FS.cwd():u=SYSCALLS.getStreamFromFD(r).path,n.length==0){if(!l)throw new FS.ErrnoError(44);return u}return PATH.join2(u,n)},doStat:function(r,n,l){try{var u=r(n)}catch(k){if(k&&k.node&&PATH.normalize(n)!==PATH.normalize(FS.getPath(k.node)))return-54;throw k}HEAP32[l>>2]=u.dev,HEAP32[l+8>>2]=u.ino,HEAP32[l+12>>2]=u.mode,HEAPU32[l+16>>2]=u.nlink,HEAP32[l+20>>2]=u.uid,HEAP32[l+24>>2]=u.gid,HEAP32[l+28>>2]=u.rdev,tempI64=[u.size>>>0,(tempDouble=u.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+40>>2]=tempI64[0],HEAP32[l+44>>2]=tempI64[1],HEAP32[l+48>>2]=4096,HEAP32[l+52>>2]=u.blocks;var f=u.atime.getTime(),v=u.mtime.getTime(),x=u.ctime.getTime();return tempI64=[Math.floor(f/1e3)>>>0,(tempDouble=Math.floor(f/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+56>>2]=tempI64[0],HEAP32[l+60>>2]=tempI64[1],HEAPU32[l+64>>2]=f%1e3*1e3,tempI64=[Math.floor(v/1e3)>>>0,(tempDouble=Math.floor(v/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+72>>2]=tempI64[0],HEAP32[l+76>>2]=tempI64[1],HEAPU32[l+80>>2]=v%1e3*1e3,tempI64=[Math.floor(x/1e3)>>>0,(tempDouble=Math.floor(x/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+88>>2]=tempI64[0],HEAP32[l+92>>2]=tempI64[1],HEAPU32[l+96>>2]=x%1e3*1e3,tempI64=[u.ino>>>0,(tempDouble=u.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+104>>2]=tempI64[0],HEAP32[l+108>>2]=tempI64[1],0},doMsync:function(r,n,l,u,f){if(!FS.isFile(n.node.mode))throw new FS.ErrnoError(43);if(2&u)return 0;var v=HEAPU8.slice(r,r+l);FS.msync(n,v,f,l,u)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(r){return UTF8ToString(r)},getStreamFromFD:function(r){var n=FS.getStream(r);if(!n)throw new FS.ErrnoError(8);return n}};function _proc_exit(r){EXITSTATUS=r,keepRuntimeAlive()||(Module.onExit&&Module.onExit(r),ABORT=!0),quit_(r,new ExitStatus(r))}function exitJS(r,n){EXITSTATUS=r,_proc_exit(r)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(r){try{var n=SYSCALLS.getStreamFromFD(r);return FS.close(n),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}function convertI32PairToI53Checked(r,n){return n+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*n:NaN}function _fd_seek(r,n,l,u,f){try{var v=convertI32PairToI53Checked(n,l);if(isNaN(v))return 61;var x=SYSCALLS.getStreamFromFD(r);return FS.llseek(x,v,u),tempI64=[x.position>>>0,(tempDouble=x.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[f>>2]=tempI64[0],HEAP32[f+4>>2]=tempI64[1],x.getdents&&v===0&&u===0&&(x.getdents=null),0}catch(k){if(typeof FS>"u"||!(k instanceof FS.ErrnoError))throw k;return k.errno}}function doWritev(r,n,l,u){for(var f=0,v=0;v<l;v++){var x=HEAPU32[n>>2],k=HEAPU32[n+4>>2];n+=8;var E=FS.write(r,HEAP8,x,k,u);if(E<0)return-1;f+=E,u!==void 0&&(u+=E)}return f}function _fd_write(r,n,l,u){try{var f=doWritev(SYSCALLS.getStreamFromFD(r),n,l);return HEAPU32[u>>2]=f,0}catch(v){if(typeof FS>"u"||!(v instanceof FS.ErrnoError))throw v;return v.errno}}function _tree_sitter_log_callback(r,n){if(currentLogCallback){const l=UTF8ToString(n);currentLogCallback(l,r!==0)}}function _tree_sitter_parse_callback(r,n,l,u,f){var v=currentParseCallback(n,{row:l,column:u});typeof v=="string"?(setValue(f,v.length,"i32"),stringToUTF16(v,r,10240)):setValue(f,0,"i32")}function handleException(r){if(r instanceof ExitStatus||r=="unwind")return EXITSTATUS;quit_(1,r)}function allocateUTF8OnStack(r){var n=lengthBytesUTF8(r)+1,l=stackAlloc(n);return stringToUTF8Array(r,HEAP8,l,n),l}function stringToUTF16(r,n,l){if(l===void 0&&(l=2147483647),l<2)return 0;for(var u=n,f=(l-=2)<2*r.length?l/2:r.length,v=0;v<f;++v){var x=r.charCodeAt(v);HEAP16[n>>1]=x,n+=2}return HEAP16[n>>1]=0,n-u}function AsciiToString(r){for(var n="";;){var l=HEAPU8[r++>>0];if(!l)return n;n+=String.fromCharCode(l)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback};createWasm(),Module.___wasm_call_ctors=function(){return(Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},Module.___wasm_apply_data_relocs=function(){return(Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)};var _malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)};Module._calloc=function(){return(Module._calloc=Module.asm.calloc).apply(null,arguments)},Module._realloc=function(){return(Module._realloc=Module.asm.realloc).apply(null,arguments)},Module._free=function(){return(Module._free=Module.asm.free).apply(null,arguments)},Module._ts_language_symbol_count=function(){return(Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},Module._ts_language_version=function(){return(Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},Module._ts_language_field_count=function(){return(Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},Module._ts_language_symbol_name=function(){return(Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},Module._ts_language_symbol_for_name=function(){return(Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},Module._ts_language_symbol_type=function(){return(Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},Module._ts_language_field_name_for_id=function(){return(Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},Module._memset=function(){return(Module._memset=Module.asm.memset).apply(null,arguments)},Module._memcpy=function(){return(Module._memcpy=Module.asm.memcpy).apply(null,arguments)},Module._ts_parser_delete=function(){return(Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},Module._ts_parser_reset=function(){return(Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},Module._ts_parser_set_language=function(){return(Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},Module._ts_parser_timeout_micros=function(){return(Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},Module._ts_parser_set_timeout_micros=function(){return(Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},Module._memmove=function(){return(Module._memmove=Module.asm.memmove).apply(null,arguments)},Module._memcmp=function(){return(Module._memcmp=Module.asm.memcmp).apply(null,arguments)},Module._ts_query_new=function(){return(Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},Module._ts_query_delete=function(){return(Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},Module._iswspace=function(){return(Module._iswspace=Module.asm.iswspace).apply(null,arguments)},Module._iswalnum=function(){return(Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},Module._ts_query_pattern_count=function(){return(Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},Module._ts_query_capture_count=function(){return(Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},Module._ts_query_string_count=function(){return(Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},Module._ts_query_capture_name_for_id=function(){return(Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},Module._ts_query_string_value_for_id=function(){return(Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},Module._ts_query_predicates_for_pattern=function(){return(Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},Module._ts_tree_copy=function(){return(Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},Module._ts_tree_delete=function(){return(Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},Module._ts_init=function(){return(Module._ts_init=Module.asm.ts_init).apply(null,arguments)},Module._ts_parser_new_wasm=function(){return(Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},Module._ts_parser_enable_logger_wasm=function(){return(Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},Module._ts_parser_parse_wasm=function(){return(Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},Module._ts_language_type_is_named_wasm=function(){return(Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},Module._ts_language_type_is_visible_wasm=function(){return(Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},Module._ts_tree_root_node_wasm=function(){return(Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},Module._ts_tree_edit_wasm=function(){return(Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},Module._ts_tree_get_changed_ranges_wasm=function(){return(Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},Module._ts_tree_cursor_new_wasm=function(){return(Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},Module._ts_tree_cursor_delete_wasm=function(){return(Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},Module._ts_tree_cursor_reset_wasm=function(){return(Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},Module._ts_tree_cursor_goto_first_child_wasm=function(){return(Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},Module._ts_tree_cursor_goto_parent_wasm=function(){return(Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},Module._ts_tree_cursor_current_node_id_wasm=function(){return(Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},Module._ts_tree_cursor_start_position_wasm=function(){return(Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},Module._ts_tree_cursor_end_position_wasm=function(){return(Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},Module._ts_tree_cursor_start_index_wasm=function(){return(Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},Module._ts_tree_cursor_end_index_wasm=function(){return(Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},Module._ts_tree_cursor_current_field_id_wasm=function(){return(Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},Module._ts_tree_cursor_current_node_wasm=function(){return(Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},Module._ts_node_symbol_wasm=function(){return(Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},Module._ts_node_child_count_wasm=function(){return(Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},Module._ts_node_named_child_count_wasm=function(){return(Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},Module._ts_node_child_wasm=function(){return(Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},Module._ts_node_named_child_wasm=function(){return(Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},Module._ts_node_child_by_field_id_wasm=function(){return(Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},Module._ts_node_next_sibling_wasm=function(){return(Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},Module._ts_node_prev_sibling_wasm=function(){return(Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},Module._ts_node_next_named_sibling_wasm=function(){return(Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},Module._ts_node_prev_named_sibling_wasm=function(){return(Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},Module._ts_node_parent_wasm=function(){return(Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},Module._ts_node_descendant_for_index_wasm=function(){return(Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},Module._ts_node_named_descendant_for_index_wasm=function(){return(Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},Module._ts_node_descendant_for_position_wasm=function(){return(Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},Module._ts_node_named_descendant_for_position_wasm=function(){return(Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},Module._ts_node_start_point_wasm=function(){return(Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},Module._ts_node_end_point_wasm=function(){return(Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},Module._ts_node_start_index_wasm=function(){return(Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},Module._ts_node_end_index_wasm=function(){return(Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},Module._ts_node_to_string_wasm=function(){return(Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},Module._ts_node_children_wasm=function(){return(Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},Module._ts_node_named_children_wasm=function(){return(Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},Module._ts_node_descendants_of_type_wasm=function(){return(Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},Module._ts_node_is_named_wasm=function(){return(Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},Module._ts_node_has_changes_wasm=function(){return(Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},Module._ts_node_has_error_wasm=function(){return(Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},Module._ts_node_is_missing_wasm=function(){return(Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},Module._ts_query_matches_wasm=function(){return(Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},Module._ts_query_captures_wasm=function(){return(Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},Module.___cxa_atexit=function(){return(Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},Module._iswdigit=function(){return(Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},Module._iswalpha=function(){return(Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},Module._iswlower=function(){return(Module._iswlower=Module.asm.iswlower).apply(null,arguments)},Module._memchr=function(){return(Module._memchr=Module.asm.memchr).apply(null,arguments)},Module._strlen=function(){return(Module._strlen=Module.asm.strlen).apply(null,arguments)},Module._towupper=function(){return(Module._towupper=Module.asm.towupper).apply(null,arguments)};var _setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)};Module.__Znwm=function(){return(Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},Module.__ZdlPv=function(){return(Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},Module.dynCall_jiji=function(){return(Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},Module._orig$ts_parser_timeout_micros=function(){return(Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},Module._orig$ts_parser_set_timeout_micros=function(){return(Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)};var calledRun;function callMain(r){var n=Module._main;if(n){(r=r||[]).unshift(thisProgram);var l=r.length,u=stackAlloc(4*(l+1)),f=u>>2;r.forEach(x=>{HEAP32[f++]=allocateUTF8OnStack(x)}),HEAP32[f]=0;try{var v=n(l,u);return exitJS(v,!0),v}catch(x){return handleException(x)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function r(){calledRun||run(),calledRun||(dependenciesFulfilled=r)};var dylibsLoaded=!1;function run(r){function n(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(r),postRun()))}r=r||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),n()},1)):n()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();const C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(n){let l;if(n){if(n.constructor!==Language)throw new Error("Argument must be a Language");{l=n[0];const u=C._ts_language_version(l);if(u<MIN_COMPATIBLE_VERSION||VERSION<u)throw new Error(`Incompatible language version ${u}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else l=0,n=null;return this.language=n,C._ts_parser_set_language(this[0],l),this}getLanguage(){return this.language}parse(n,l,u){if(typeof n=="string")currentParseCallback=(E,R,z)=>n.slice(E,z);else{if(typeof n!="function")throw new Error("Argument must be a string or a function");currentParseCallback=n}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let f=0,v=0;if(u&&u.includedRanges){f=u.includedRanges.length,v=C._calloc(f,SIZE_OF_RANGE);let E=v;for(let R=0;R<f;R++)marshalRange(E,u.includedRanges[R]),E+=SIZE_OF_RANGE}const x=C._ts_parser_parse_wasm(this[0],this[1],l?l[0]:0,v,f);if(!x)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");const k=new Tree(INTERNAL,x,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,k}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(n){C._ts_parser_set_timeout_micros(this[0],n)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(n){if(n){if(typeof n!="function")throw new Error("Logger callback must be a function")}else n=null;return this.logCallback=n,this}getLogger(){return this.logCallback}}class Tree{constructor(n,l,u,f){assertInternal(n),this[0]=l,this.language=u,this.textCallback=f}copy(){const n=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,n,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(n){marshalEdit(n),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(n){if(n.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],n[0]);const l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),f=new Array(l);if(l>0){let v=u;for(let x=0;x<l;x++)f[x]=unmarshalRange(v),v+=SIZE_OF_RANGE;C._free(u)}return f}}class Node{constructor(n,l){assertInternal(n),this.tree=l}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(n){return this.id===n.id}child(n){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],n),unmarshalNode(this.tree)}namedChild(n){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],n),unmarshalNode(this.tree)}childForFieldId(n){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],n),unmarshalNode(this.tree)}childForFieldName(n){const l=this.tree.language.fields.indexOf(n);if(l!==-1)return this.childForFieldId(l)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);const n=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(n),n>0){let u=l;for(let f=0;f<n;f++)this._children[f]=unmarshalNode(this.tree,u),u+=SIZE_OF_NODE;C._free(l)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);const n=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(n),n>0){let u=l;for(let f=0;f<n;f++)this._namedChildren[f]=unmarshalNode(this.tree,u),u+=SIZE_OF_NODE;C._free(l)}}return this._namedChildren}descendantsOfType(n,l,u){Array.isArray(n)||(n=[n]),l||(l=ZERO_POINT),u||(u=ZERO_POINT);const f=[],v=this.tree.language.types;for(let z=0,F=v.length;z<F;z++)n.includes(v[z])&&f.push(z);const x=C._malloc(SIZE_OF_INT*f.length);for(let z=0,F=f.length;z<F;z++)setValue(x+z*SIZE_OF_INT,f[z],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],x,f.length,l.row,l.column,u.row,u.column);const k=getValue(TRANSFER_BUFFER,"i32"),E=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),R=new Array(k);if(k>0){let z=E;for(let F=0;F<k;F++)R[F]=unmarshalNode(this.tree,z),z+=SIZE_OF_NODE}return C._free(E),C._free(x),R}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(n,l=n){if(typeof n!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let u=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(u,n,"i32"),setValue(u+SIZE_OF_INT,l,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(n,l=n){if(typeof n!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let u=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(u,n,"i32"),setValue(u+SIZE_OF_INT,l,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(n,l=n){if(!isPoint(n)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let u=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(u,n),marshalPoint(u+SIZE_OF_POINT,l),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(n,l=n){if(!isPoint(n)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let u=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(u,n),marshalPoint(u+SIZE_OF_POINT,l),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);const n=C._ts_node_to_string_wasm(this.tree[0]),l=AsciiToString(n);return C._free(n),l}}class TreeCursor{constructor(n,l){assertInternal(n),this.tree=l,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(n){marshalNode(n),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);const n=C._ts_tree_cursor_start_index_wasm(this.tree[0]),l=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,n,l)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);const n=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),n===1}gotoNextSibling(){marshalTreeCursor(this);const n=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),n===1}gotoParent(){marshalTreeCursor(this);const n=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),n===1}}class Language{constructor(n,l){assertInternal(n),this[0]=l,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let u=0,f=this.types.length;u<f;u++)C._ts_language_symbol_type(this[0],u)<2&&(this.types[u]=UTF8ToString(C._ts_language_symbol_name(this[0],u)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let u=0,f=this.fields.length;u<f;u++){const v=C._ts_language_field_name_for_id(this[0],u);this.fields[u]=v!==0?UTF8ToString(v):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(n){const l=this.fields.indexOf(n);return l!==-1?l:null}fieldNameForId(n){return this.fields[n]||null}idForNodeType(n,l){const u=lengthBytesUTF8(n),f=C._malloc(u+1);stringToUTF8(n,f,u+1);const v=C._ts_language_symbol_for_name(this[0],f,u,l);return C._free(f),v||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(n){const l=C._ts_language_symbol_name(this[0],n);return l?UTF8ToString(l):null}nodeTypeIsNamed(n){return!!C._ts_language_type_is_named_wasm(this[0],n)}nodeTypeIsVisible(n){return!!C._ts_language_type_is_visible_wasm(this[0],n)}query(n){const l=lengthBytesUTF8(n),u=C._malloc(l+1);stringToUTF8(n,u,l+1);const f=C._ts_query_new(this[0],u,l,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!f){const J=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),ge=UTF8ToString(u,getValue(TRANSFER_BUFFER,"i32")).length,xe=n.substr(ge,100).split(`
`)[0];let re,Ae=xe.match(QUERY_WORD_REGEX)[0];switch(J){case 2:re=new RangeError(`Bad node name '${Ae}'`);break;case 3:re=new RangeError(`Bad field name '${Ae}'`);break;case 4:re=new RangeError(`Bad capture name @${Ae}`);break;case 5:re=new TypeError(`Bad pattern structure at offset ${ge}: '${xe}'...`),Ae="";break;default:re=new SyntaxError(`Bad syntax at offset ${ge}: '${xe}'...`),Ae=""}throw re.index=ge,re.length=Ae.length,C._free(u),re}const v=C._ts_query_string_count(f),x=C._ts_query_capture_count(f),k=C._ts_query_pattern_count(f),E=new Array(x),R=new Array(v);for(let J=0;J<x;J++){const ge=C._ts_query_capture_name_for_id(f,J,TRANSFER_BUFFER),xe=getValue(TRANSFER_BUFFER,"i32");E[J]=UTF8ToString(ge,xe)}for(let J=0;J<v;J++){const ge=C._ts_query_string_value_for_id(f,J,TRANSFER_BUFFER),xe=getValue(TRANSFER_BUFFER,"i32");R[J]=UTF8ToString(ge,xe)}const z=new Array(k),F=new Array(k),Z=new Array(k),j=new Array(k),fe=new Array(k);for(let J=0;J<k;J++){const ge=C._ts_query_predicates_for_pattern(f,J,TRANSFER_BUFFER),xe=getValue(TRANSFER_BUFFER,"i32");j[J]=[],fe[J]=[];const re=[];let Ae=ge;for(let Ce=0;Ce<xe;Ce++){const nt=getValue(Ae,"i32");Ae+=SIZE_OF_INT;const Xe=getValue(Ae,"i32");if(Ae+=SIZE_OF_INT,nt===PREDICATE_STEP_TYPE_CAPTURE)re.push({type:"capture",name:E[Xe]});else if(nt===PREDICATE_STEP_TYPE_STRING)re.push({type:"string",value:R[Xe]});else if(re.length>0){if(re[0].type!=="string")throw new Error("Predicates must begin with a literal value");const mt=re[0].value;let yt=!0;switch(mt){case"not-eq?":yt=!1;case"eq?":if(re.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(re.length-1));if(re[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${re[1].value}"`);if(re[2].type==="capture"){const at=re[1].name,_e=re[2].name;fe[J].push(function(Jt){let It,Qe;for(const Ke of Jt)Ke.name===at&&(It=Ke.node),Ke.name===_e&&(Qe=Ke.node);return It===void 0||Qe===void 0||It.text===Qe.text===yt})}else{const at=re[1].name,_e=re[2].value;fe[J].push(function(Jt){for(const It of Jt)if(It.name===at)return It.node.text===_e===yt;return!0})}break;case"not-match?":yt=!1;case"match?":if(re.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${re.length-1}.`);if(re[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${re[1].value}".`);if(re[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${re[2].value}.`);const Ut=re[1].name,Mt=new RegExp(re[2].value);fe[J].push(function(at){for(const _e of at)if(_e.name===Ut)return Mt.test(_e.node.text)===yt;return!0});break;case"set!":if(re.length<2||re.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${re.length-1}.`);if(re.some(at=>at.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');z[J]||(z[J]={}),z[J][re[1].value]=re[2]?re[2].value:null;break;case"is?":case"is-not?":if(re.length<2||re.length>3)throw new Error(`Wrong number of arguments to \`#${mt}\` predicate. Expected 1 or 2. Got ${re.length-1}.`);if(re.some(at=>at.type!=="string"))throw new Error(`Arguments to \`#${mt}\` predicate must be a strings.".`);const wt=mt==="is?"?F:Z;wt[J]||(wt[J]={}),wt[J][re[1].value]=re[2]?re[2].value:null;break;default:j[J].push({operator:mt,operands:re.slice(1)})}re.length=0}}Object.freeze(z[J]),Object.freeze(F[J]),Object.freeze(Z[J])}return C._free(u),new Query(INTERNAL,f,E,fe,j,Object.freeze(z),Object.freeze(F),Object.freeze(Z))}static load(n){let l;if(n instanceof Uint8Array)l=Promise.resolve(n);else{const f=n;if(typeof process<"u"&&process.versions&&process.versions.node){const v=require$$0;l=Promise.resolve(v.readFileSync(f))}else l=fetch(f).then(v=>v.arrayBuffer().then(x=>{if(v.ok)return new Uint8Array(x);{const k=new TextDecoder("utf-8").decode(x);throw new Error(`Language.load failed with status ${v.status}.

${k}`)}}))}const u=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return l.then(f=>u(f,{loadAsync:!0})).then(f=>{const v=Object.keys(f),x=v.find(E=>LANGUAGE_FUNCTION_REGEX.test(E)&&!E.includes("external_scanner_"));x||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(v,null,2)}`);const k=f[x]();return new Language(INTERNAL,k)})}}class Query{constructor(n,l,u,f,v,x,k,E){assertInternal(n),this[0]=l,this.captureNames=u,this.textPredicates=f,this.predicates=v,this.setProperties=x,this.assertedProperties=k,this.refutedProperties=E,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(n,l,u,f){l||(l=ZERO_POINT),u||(u=ZERO_POINT),f||(f={});let v=f.matchLimit;if(v===void 0)v=0;else if(typeof v!="number")throw new Error("Arguments must be numbers");marshalNode(n),C._ts_query_matches_wasm(this[0],n.tree[0],l.row,l.column,u.row,u.column,v);const x=getValue(TRANSFER_BUFFER,"i32"),k=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),E=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),R=new Array(x);this.exceededMatchLimit=!!E;let z=0,F=k;for(let Z=0;Z<x;Z++){const j=getValue(F,"i32");F+=SIZE_OF_INT;const fe=getValue(F,"i32");F+=SIZE_OF_INT;const J=new Array(fe);if(F=unmarshalCaptures(this,n.tree,F,J),this.textPredicates[j].every(ge=>ge(J))){R[z++]={pattern:j,captures:J};const ge=this.setProperties[j];ge&&(R[Z].setProperties=ge);const xe=this.assertedProperties[j];xe&&(R[Z].assertedProperties=xe);const re=this.refutedProperties[j];re&&(R[Z].refutedProperties=re)}}return R.length=z,C._free(k),R}captures(n,l,u,f){l||(l=ZERO_POINT),u||(u=ZERO_POINT),f||(f={});let v=f.matchLimit;if(v===void 0)v=0;else if(typeof v!="number")throw new Error("Arguments must be numbers");marshalNode(n),C._ts_query_captures_wasm(this[0],n.tree[0],l.row,l.column,u.row,u.column,v);const x=getValue(TRANSFER_BUFFER,"i32"),k=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),E=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),R=[];this.exceededMatchLimit=!!E;const z=[];let F=k;for(let Z=0;Z<x;Z++){const j=getValue(F,"i32");F+=SIZE_OF_INT;const fe=getValue(F,"i32");F+=SIZE_OF_INT;const J=getValue(F,"i32");if(F+=SIZE_OF_INT,z.length=fe,F=unmarshalCaptures(this,n.tree,F,z),this.textPredicates[j].every(ge=>ge(z))){const ge=z[J],xe=this.setProperties[j];xe&&(ge.setProperties=xe);const re=this.assertedProperties[j];re&&(ge.assertedProperties=re);const Ae=this.refutedProperties[j];Ae&&(ge.refutedProperties=Ae),R.push(ge)}}return C._free(k),R}predicatesForPattern(n){return this.predicates[n]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(r,n,l){const u=l-n;let f=r.textCallback(n,null,l);for(n+=f.length;n<l;){const v=r.textCallback(n,null,l);if(!(v&&v.length>0))break;n+=v.length,f+=v}return n>l&&(f=f.slice(0,u)),f}function unmarshalCaptures(r,n,l,u){for(let f=0,v=u.length;f<v;f++){const x=getValue(l,"i32"),k=unmarshalNode(n,l+=SIZE_OF_INT);l+=SIZE_OF_NODE,u[f]={name:r.captureNames[x],node:k}}return l}function assertInternal(r){if(r!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(r){return r&&typeof r.row=="number"&&typeof r.column=="number"}function marshalNode(r){let n=TRANSFER_BUFFER;setValue(n,r.id,"i32"),n+=SIZE_OF_INT,setValue(n,r.startIndex,"i32"),n+=SIZE_OF_INT,setValue(n,r.startPosition.row,"i32"),n+=SIZE_OF_INT,setValue(n,r.startPosition.column,"i32"),n+=SIZE_OF_INT,setValue(n,r[0],"i32")}function unmarshalNode(r,n=TRANSFER_BUFFER){const l=getValue(n,"i32");if(l===0)return null;const u=getValue(n+=SIZE_OF_INT,"i32"),f=getValue(n+=SIZE_OF_INT,"i32"),v=getValue(n+=SIZE_OF_INT,"i32"),x=getValue(n+=SIZE_OF_INT,"i32"),k=new Node(INTERNAL,r);return k.id=l,k.startIndex=u,k.startPosition={row:f,column:v},k[0]=x,k}function marshalTreeCursor(r,n=TRANSFER_BUFFER){setValue(n+0*SIZE_OF_INT,r[0],"i32"),setValue(n+1*SIZE_OF_INT,r[1],"i32"),setValue(n+2*SIZE_OF_INT,r[2],"i32")}function unmarshalTreeCursor(r){r[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),r[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),r[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(r,n){setValue(r,n.row,"i32"),setValue(r+SIZE_OF_INT,n.column,"i32")}function unmarshalPoint(r){return{row:getValue(r,"i32"),column:getValue(r+SIZE_OF_INT,"i32")}}function marshalRange(r,n){marshalPoint(r,n.startPosition),marshalPoint(r+=SIZE_OF_POINT,n.endPosition),setValue(r+=SIZE_OF_POINT,n.startIndex,"i32"),setValue(r+=SIZE_OF_INT,n.endIndex,"i32"),r+=SIZE_OF_INT}function unmarshalRange(r){const n={};return n.startPosition=unmarshalPoint(r),r+=SIZE_OF_POINT,n.endPosition=unmarshalPoint(r),r+=SIZE_OF_POINT,n.startIndex=getValue(r,"i32"),r+=SIZE_OF_INT,n.endIndex=getValue(r,"i32"),n}function marshalEdit(r){let n=TRANSFER_BUFFER;marshalPoint(n,r.startPosition),n+=SIZE_OF_POINT,marshalPoint(n,r.oldEndPosition),n+=SIZE_OF_POINT,marshalPoint(n,r.newEndPosition),n+=SIZE_OF_POINT,setValue(n,r.startIndex,"i32"),n+=SIZE_OF_INT,setValue(n,r.oldEndIndex,"i32"),n+=SIZE_OF_INT,setValue(n,r.newEndIndex,"i32"),n+=SIZE_OF_INT}for(const r of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,r,{value:ParserImpl.prototype[r],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();module.exports=TreeSitter})(treeSitter);var treeSitterExports=treeSitter.exports;const Parser=getDefaultExportFromCjs(treeSitterExports),parser_minion=async()=>{await Parser.init({locateFile(l){return"ts/"+l}});let r={instance:null,lines:[],parser:{},parsing:{tree:{}}};r.instance=r,await Parser.Language.load("ts/tree-sitter-javascript.wasm");const n=await Parser.Language.load("ts/tree-sitter-typescript.wasm");return cat.info("loading tree-sitter binary",r),r.parser=new Parser,r.parser.setLanguage(n),cat.info("loaded language grammer - parser ready"),async l=>(r.parsing.tree=r.parser.parse(l),r.parsing.tree=r.parser.parse(function(u,f){let v=r.lines[f.row];return v?v.slice(f.column):new Promise((x,k)=>x(this))},r.parsing.tree),r)},sitter=parser_minion();new Promise((r,n)=>r());const isChainedRef=(r,n,l)=>{if(!sh.assert.isOpVec(r[n.key]))return l;let u=deepClone(r[n.key]),[f,v]=u[0].split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2);return v==="block"&&(u[0]=f+":current"),u[u.length-1]=n.bang_name+":"+u[u.length-1],sh.ref(u,n.ctx.current,n.ctx.cmp)};sitter.then(async()=>{});const std_bng={"!test"(r){cat$1.debug("[ 49 | @ed::std ]  !test bang - codemirror",r.runtime.el);let n;return new Promise(l=>{l(l)}),()=>(n=CodeMirror$1(r.runtime.el,{lineNumbers:!0,tabSize:2,value:sh.refs.pad?JSON.stringify(sh.refs.pad,api.json_replacers.arrayFromSet,2):"none",lineSeparator:`
`,mode:"javascript",theme:"paraiso-dark",showCursorWhenSelecting:!0,lineWrapping:!0,scrollbarStyle:"simple",scrollPastEnd:!0}),cat$1.debug("[ 57 | @ed::std ]  !test bang - codemirror",n),document.addEventListener("keydown",l=>{l.altKey&&l.key==="v"&&(n.setOption("vimMode",!n.options.vimMode),cat$1.debug("95 | @ed::std |   vimMode",n.options.vimMode))}),n)},"!ctx"(r,n,l,u="current"){let f=/^(cur|current)$/,v=/^(blc|block)$/,x=/^(cmp|component)$/;switch(!0){case f.test(u):return r;case v.test(u):return n;case x.test(u):return l;case u==="root":return sh;case u==="sh":return sh;default:return sh.refs[u]}},"!inc"(r,n){let l=()=>{r[n.key]++};return l=isChainedRef(r,n,l),l},"!expr"(r,{key:n,val:l}){return()=>{cat$1.debug("139 | @ed::std |   expr - ",r)}},"!prop"(r,n){var f;let[l,u]=((f=n.key)==null?void 0:f.replace(/\{|\}/g,"").split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2))??[n.key,null];Object.defineProperty(n.props,l,{get(){return u?r[u]:r[l]}})},"!set"(r,n){var f;let[l,u]=((f=n.key)==null?void 0:f.replace(/\{|\}/g,"").split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2))??[n.key,null];return cat$1.debug("322 | @ed::std |   !!!!!!getter",r,n),()=>{r[l]=n.props[u],cat$1.debug("319 | @ed::std |   !!!!!SET3333",r,n.props[u])}},"!set_prop"(r,n){var f;let[l,u]=((f=n.key)==null?void 0:f.replace(/\{|\}/g,"").split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2))??[n.key,null];return()=>{cat$1.debug("139 | @ed::std |   ref -",r,"kv:",l,u,"ref.key:",r[l])}},"!rndm_clr"(){return`rgb(${~~(Math.random()*255)}, ${~~(Math.random()*255)}, ${~~(Math.random()*255)})`}},iter_bng={"!iter_void"(r,n){},"!to_iter"(r,n,l){n[Symbol.iterator]=function(u,f){cat$1.debug("[ 12 | @ed::iter ]  ???",r,n)}},"!bidi_ctrl"(r){}},event_bng={"!drag"(r,n){let[l,u]=n.key.replace(/\{|\}/g,"").split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2),f=[];~u.indexOf("$")&&(f=u.match(/\$\d/g));const v=u;let x=[0,0];return k=>{let E=k.target;E.id,E.dataset.sqiid,E.dataset.idx,E.dataset;let R,z=F=>{R=F.dataset.sqiid,R||z(F.parentElement)};k.target.dataset.sq&&(R=k.target.dataset.sq),usePointer.move((F,Z)=>{if(Z.altKey)return;Z.preventDefault(),Z.stopImmediatePropagation(),R||z(F.target),u=v;let j=[F.offset.x,F.offset.y];for(let fe=0;fe<j.length;fe++)u=u.replace(f[fe],j[fe]+x[fe]+"px");r[l]=u}),r.pointerEvents="none",usePointer.up((F,Z)=>{var fe,J;let j=[F.offset.x,F.offset.y];for(let ge=0;ge<j.length;ge++)u=u.replace(f[ge],j[ge]+x[ge]+"px"),x[ge]=j[ge]+x[ge];r[l]=u,document.elementFromPoint(F.x,F.y),parseInt(R)===4&&((J=sh.refs.PadContainer)==null||J.children.splice((fe=sh.refs.PadContainer)==null?void 0:fe.children.length,0,{bid:"rndm_clr_row",style:{backgroundColor:`rgb(${~~(Math.random()*255)}, ${~~(Math.random()*255)}, ${~~(Math.random()*255)})`}})),r.pointerEvents=""})}}},utils_bng={"!splice"(r,n,l,u){return r.splice(n,l,u)},"!clone"(r){return deepClone(r)},"!push"(r,n){}},factory_bng={"!factory"(r,n){}},blues={path:{state:{buffer_idx:0,d:[["M",0,0]]},attr:{is:"path",stroke:"red","stroke-width":4,fill:"#7627ff2b",d:["!ref","state","d","!flat_join_computed"],nodetype:"helper:svg"},style:{},traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.Attr,BlockTrait.State]},circle:{state:{cx:0,cy:0},attr:{is:"circle",stroke:"purple","stroke-width":3,fill:"skyblue",cx:["!ref","state","cx"],cy:["!ref","state","cy"],r:5,nodetype:"helper:svg:point"},style:{},event:{pointerdown:"!pointer_test"},traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.Attr,BlockTrait.State,BlockTrait.Event]}},newBlock=(r,{ev:n,attr:l})=>{var f;let u=sh.hug(reactive(deepClone(blues[r])));if(l)for(let v in l)u.attr[v]=l[v];return u.runtime&&((f=u.state.d)!=null&&f[0])?(u.state.d[0][0]="M",u.state.d[0][1]=n.offsetX,u.state.d[0][2]=n.offsetY):u.state.d||(u.state.d=[["M",n.offsetX,n.offsetY]]),u},makeEdge=(r,n,{cx:l,cy:u,idx:f},v)=>{var k;let x=sh.uid.hash();if(!(!r||!n))return(k=n==null?void 0:n.forEach)==null||k.call(n,E=>{}),sh.hug(reactive({id:x,cx:l,cy:u,idx:f,link_map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[8,0,9,4],[3,13,1,4],[-1,7,5,4],[7,0,1,3]],next:{idx:-1,cx:0,cy:0,dx:0,dy:0,d1x:0,d1y:0,d2x:0,d2y:0,...r[f+1]},prev:{idx:-1,cx:0,cy:0,dx:0,dy:0,d1x:0,d1y:0,d2x:0,d2y:0,...r[f-1]}}))},svg_bng={"!start_draw_path"(r,n){let l=30;return u=>{var x,k,E;if(console.log("cccc",u.target.nodetype),u.preventDefault(),sh.app_state.draw){u.stopImmediatePropagation();return}let f=newBlock("path",{ev:u});(x=f.runtime).svg??(x.svg={}),(k=f.runtime.svg).helpers??(k.helpers=[]),(E=f.runtime.svg).edges??(E.edges={}),f.state.d.forEach((R,z)=>{var fe,J,ge,xe,re,Ae,Ce;let F=newBlock("circle",{ev:u}),Z=newBlock("circle",{ev:u,attr:{nodetype:"helper:svg:handle_point",stroke:"#1f0a0a","stroke-width":2,r:3}});F.state.cx=u.offsetX,F.state.cy=u.offsetY,Z.state.cx=u.offsetX,Z.state.cy=u.offsetY,F.runtime.type="point",F.runtime.cp=f.state.d[z],F.runtime.point_data={idx:z},Z.runtime.type="handle_point",Z.runtime.cp=F.runtime.cp,Z.runtime.point_data={idx:z},f.state.buffer_idx=z;let j=makeEdge(F,Z,F.state,{cx:F.state.cx,cy:F.state.cy,idx:z});(fe=f.runtime.svg.edges)[J=j.id]??(fe[J]=j),(ge=f.runtime.svg.edges[j.id]).bi??(ge.bi=new Set),(xe=f.runtime.svg.edges[j.id]).to??(xe.to=new Set),(re=f.runtime.svg.edges[j.id]).fr??(re.fr=new Set),f.runtime.svg.edges[j.id].bi.add(F.id),f.runtime.svg.helpers.push(F),f.runtime.svg.helpers.push(Z),r[0].children[0].children.push(F),r[0].children[0].children.push(Z),(Ae=F.runtime).svg??(Ae.svg=new Set),(Ce=F.runtime).svg??(Ce.svg=new Set),F.runtime.svg.has()&&console.log("trrrrrrrr")}),r[0].children[0].children.push(f);let v={x:0,y:0};usePointer.move(R=>{var re;let z=f.state.d.length-1,F=v.x+u.offsetX,Z=v.y+u.offsetY,j=R.offset.x+v.x+u.offsetX,fe=R.offset.y+v.x+u.offsetY,J=Math.atan2(u.offsetY+R.offset.y-(u.offsetY+v.y),u.offsetX+R.offset.x-(u.offsetX+v.x))-Math.PI/2,ge=(F-j)*-.5*Math.sin(J),xe=(Z-fe)*-.5*Math.cos(J);if(f.state.buffer_idx=z,f.state.d[z][3]=j,f.state.d[z][4]=fe,f.state.d[z][1]=ge*1.5,f.state.d[z][2]=xe*1.5,Math.abs(R.offset.x-v.x)>=l||Math.abs(R.offset.y-v.y)>=l){console.log("aaaaa",f);let Ae=reactive(["L",u.offsetX*.5,u.offsetY*.5,u.offsetX,u.offsetY]);f.state.d.push(Ae),v=R.offset;let Ce=0,nt=0,Xe=newBlock("circle",{ev:u}),mt=newBlock("circle",{ev:u,attr:{nodetype:"helper:svg:handle_point",stroke:"#1f0a0a","stroke-width":2,r:3}});(re=Xe.runtime).getHelperVector??(re.getHelperVector=({x:yt,y:Ut,cx:Mt,cy:wt})=>(Xe.state.cx=yt,Xe.state.cy=Ut,mt.state.cx=Mt+yt,mt.state.cy=wt+Ut,Xe.state)),Xe.runtime.getHelperVector({x:u.offsetX+R.offset.x,y:u.offsetY+R.offset.y,cx:Ce,cy:nt}),Xe.runtime.type="point",Xe.runtime.cp=Ae,Xe.runtime.point_data={idx:z},mt.runtime.type="handle_point",mt.runtime.cp=Ae,mt.runtime.point_data={idx:z},f.runtime.svg.helpers.push(Xe),f.runtime.svg.helpers.push(mt),r[0].children[0].children.push(Xe),r[0].children[0].children.push(mt)}f.runtime.svg.helpers.forEach((Ae,Ce,nt)=>{var Xe;Ae.runtime.type!=="handle_point"||Math.abs(((Xe=Ae.runtime.point_data)==null?void 0:Xe.idx)-f.state.buffer_idx)>2||(f.state.d[Ce]&&(f.state.d[Ce][3]=j,f.state.d[Ce][4]=fe,f.state.d[Ce][1]=j*.5,f.state.d[Ce][2]=fe*.5),Ae.state.cx=j*.5+u.offsetX+v.x,Ae.state.cy=fe*.5+u.offsetY+v.y)})})}},"!pointer_test"(r){return n=>{sh.app_state.draw=!0,usePointer.move(l=>{var f;let u=(f=r.runtime)==null?void 0:f.getHelperVector({x:n.offsetX+l.offset.x,y:n.offsetY+l.offset.y});r.runtime.cp[3]=l.offset.x,r.runtime.cp[4]=l.offset.y,r.runtime.cp[1]=l.offset.x*.5,r.runtime.cp[2]=l.offset.y*.5,console.log("ttt",r,u)}),usePointer.up(l=>{sh.app_state.draw=!1})}},"!flat_join_computed"(r,n){return r.flat(1/0).join(" ")}},api_bng={"!save_canvas"(r){cat.debug("7 | @ed::api |   save_canvas",r);let n="block";return async()=>{if(cat.debug("16 | @ed::api |   save post ",r.root),!r.root)return;r.root.id||(r.root.id=uid.hash()),r.root.name||(r.root.name=r.root.id);let l={name:r.root.name};r.root.description&&(l.description=r.root.description),await api.post(`/editor/${n}/${r.root.id}`,r.root,l,{replacer:"arrayFromSet"})}},"!save_block"(r){cat.debug("7 | @ed::api |   save_block",r);let n="block";return async()=>{if(cat.debug("16 | @ed::api |   save post ",r),!r||!r.traits)return;r.id||(r.id=uid.hash()),r.name||(r.name=r.id);let l={name:r.name};r.description&&(l.description=r.description),await api.post(`/editor/${n}/${r.id}`,r,l,{replacer:"arrayFromSet"})}},"!get_blocks"(){return async()=>{let r=await api.get("/editor/block/manifest"),n=Object.keys(r).join(","),l=await api.get("/editor/block",{ids:n});l.forEach(u=>{u.bid=u.id,sh.factory.blues[u.bid]=u}),cat.debug("54 | @ed::api |   !!!!get manifest",l)}},"!load_blue"(r,n){return()=>{cat.debug("110 | @ed::api |   pppppp",n),n.props.$runtime.cmi.setValue(JSON.stringify(r,api.json_replacers.arrayFromSet,2))}}},embedded_bangers=Object.assign(svg_bng,std_bng,utils_bng,iter_bng,event_bng,factory_bng,api_bng),app_state=reactive({active_layer:1}),THE_BIG_LIST_OF_OPTIONS=reactive({root_font_size:16,canvas:{viewport:{inset:[10,4]}}}),editor_state=reactive({canvas_mode:"edit",self_mode:"view",selected_items:null,focused_items:[],active_lines:null,active_ws:"canvas",active_layer:1,TBLOO:THE_BIG_LIST_OF_OPTIONS}),editorEvent=new Emittable,FidoOptions={base:"http://127.0.0.1:6661"},api=new Fido(FidoOptions),usePointer=new UsePointer,uid=new MakeUID,layers=[],workspaces={},sh=new SuperHugger({factory,app_state,uid,editorEvent,editor_state,bang:embedded_bangers,workspaces,layers});sh.workspaces.canvas=factory.build({bid:"workspace",id:"canvas_ws",root:sh.factory.build({bid:"container",id:"bsc"})});const editor_bo={id:"edroot",name:"editor_root",traits:[BlockTrait.Style,BlockTrait.Children,BlockTrait.Content,BlockTrait.Event],event:{},style:{display:"flex",position:"absolute",top:0,left:0,userSelect:"none",margin:"auto",grid:"1fr/1fr",placeItems:"center",pointerEvents:"auto"},content:"editor_ws",children:[]};sh.workspaces.editor=factory.build({bid:"workspace",id:"editor_ws",root:editor_bo});const getEditorStuff=async()=>{await sh.bang["!get_blocks"]()();let r=await api.get("editor/block/pad");sh.factory.blues.pad1=r,cat$1.debug("143 | @ed::main |   get stuff",r),r=JSON.parse(JSON.stringify(r).replace(/:pad/g,":edws_pad")),r.id="edws_pad",sh.workspaces.editor.root=sh.hug(reactive(r))};getEditorStuff();document.addEventListener("keydown",r=>{var n;r.altKey&&r.key=="q"&&(r.preventDefault(),r.key==="q"&&r.preventDefault(),((n=sh.workspaces.canvas.root)==null?void 0:n.id)==="pad"?sh.workspaces.canvas.root=sh.refs.bsc:sh.workspaces.canvas.root=sh.refs.pad??sh.hug(reactive(sh.factory.blues.pad1)))});const _hoisted_1$1={key:2},component$1={name:"BuildingBlock"},__default__$1={...component$1},_sfc_main$1=defineComponent({...__default__$1,__name:"Block",props:{block:{}},setup(r){var f,v,x,k,E,R,z,F,Z;const n=r,l=computed(()=>{var j;return Object.keys(n.block.event??((j=sh.factory.blues[n.block.bid])==null?void 0:j.event)??{}).reduce((fe,J)=>{var ge,xe,re,Ae,Ce;if(Array.isArray((n.block.event??((ge=sh.factory.blues[n.block.bid])==null?void 0:ge.event))[J])){let nt=n.block.event[J];return fe[J]=sh.ref(nt,n.block,n.block.runtime.ctx),fe}else{let[nt,Xe]=(re=(n.block.event??((xe=sh.factory.blues[n.block.bid])==null?void 0:xe.event))[J])==null?void 0:re.split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2);fe[J]=(Ce=(Ae=sh.bang)[nt])==null?void 0:Ce.call(Ae,n.block,Xe)}return fe},{})});if(n.block.traits.has(BlockTrait.Attr)){(f=n.block).attr??(f.attr={}),(v=n.block.runtime).attr??(v.attr={});for(let j in n.block.attr){if(sh.assert.isOpVec(n.block.attr[j])){(x=n.block.runtime.attr)[j]??(x[j]=computed(()=>sh.ref(n.block.attr[j],n.block,n.block.runtime.ctx)));continue}if(n.block.attr[j][0]==="!"){let[fe,J]=(k=n.block.attr[j])==null?void 0:k.split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2);n.block.runtime.attr[j]=sh.bang[fe](n.block,J);continue}n.block.runtime.attr[j]=n.block.attr[j]}}n.block.traits.has(BlockTrait.Attr);//! LAZY_BLOCK: a more abstract DOM ref impl is planned.
let u=ref();(E=n.block.runtime).attr??(E.attr={}),n.block.runtime.attr.ref="block_ref",onMounted(()=>{var j,fe,J;n.block.runtime.el=u.value,(j=n.block.runtime.state)!=null&&j.codemirror&&(n.block.runtime.cmi=(J=(fe=n.block.runtime.state)==null?void 0:fe.codemirror)==null?void 0:J.call(fe))});//! END LAZY_BLOCK
//! LAZY_BLOCK: handle BlockTrait.State bangers & OpVectors
if(n.block.traits.has(BlockTrait.State)){(R=n.block).state??(R.state={}),(z=n.block.runtime).state??(z.state={});for(let j in n.block.state){if(sh.assert.isOpVec(n.block.state[j])){(F=n.block.runtime.state)[j]??(F[j]=computed(()=>sh.ref(n.block.state[j],n.block,n.block.runtime.ctx)));continue}if(n.block.state[j][0]==="!"){let[fe,J]=(Z=n.block.state[j])==null?void 0:Z.split(new RegExp("(?:(?=[\\s\\S]*\\{)\\.|(?<!\\.[\\s\\S]*):)"),2);n.block.runtime.state[j]=sh.bang[fe](n.block,J);continue}}}//! END LAZY_BLOCK
return(j,fe)=>{var ge,xe;const J=resolveComponent("Block",!0);return openBlock(),createBlock(resolveDynamicComponent(((ge=j.block.attr)==null?void 0:ge.is)??"div"),mergeProps({id:j.block.id,"data-sqiid":j.block.sqiid,style:{...j.block.bid?(xe=unref(sh).factory.blues[j.block.bid])==null?void 0:xe.style:{},...j.block.style}},j.block.runtime.attr,toHandlers(l.value)),{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(j.block.traits,re=>{var Ae;return openBlock(),createElementBlock(Fragment,{key:`${j.block.sqiid}#${re}`},[re===unref(BlockTrait).Workspace?(openBlock(),createElementBlock(Fragment,{key:0},[j.block.root?(openBlock(),createBlock(J,{key:0,block:j.block.root,"data-ws":j.block.id},null,8,["block","data-ws"])):createCommentVNode("",!0)],64)):createCommentVNode("",!0),re===unref(BlockTrait).Children?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(j.block.runtime.children,(Ce,nt)=>(openBlock(),createBlock(J,{block:Ce,key:`${j.block.sqiid}#${re}`,"data-idx":nt.toString()},null,8,["block","data-idx"]))),128)):createCommentVNode("",!0),re===unref(BlockTrait).Content?(openBlock(),createElementBlock("span",_hoisted_1$1,toDisplayString(j.block.runtime.content??((Ae=unref(sh).factory.blues[j.block.bid])==null?void 0:Ae.content)),1)):createCommentVNode("",!0)],64)}),128))]),_:1},16,["id","data-sqiid","style"])}}}),_hoisted_1={id:"edera"},component={name:"EderaMain"},__default__={...component},_sfc_main=defineComponent({...__default__,__name:"Edera",setup(r){return window.dev=sh,(n,l)=>(openBlock(),createElementBlock("main",_hoisted_1,[createVNode(_sfc_main$1,{class:"ed-ws",block:unref(sh).workspaces.canvas},null,8,["block"]),createVNode(_sfc_main$1,{class:"ed-ws",block:unref(sh).workspaces.editor},null,8,["block"])]))}}),Edera_vue_vue_type_style_index_0_lang="",root=createApp(_sfc_main);root.config.globalProperties.cat=cat$1;root.mount("#approot");//!" time to test to factory the first block and
//!" and features in a documentation driven manner..
//! ILL TRY TO DETAIL, LINK FILES AND GIVE EXAMPLES 
//! goal: step frw/back with something like key events (numbpad: 4 & 6)
//! -  alright, if paul can successfully time travel trough logpoints
//! - then we can start implementing an svg trait!!!
});export default Bl();
//# sourceMappingURL=edera-b795131c.js.map